(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[14865,12127],{615071:(e,t,a)=>{"use strict";a.d(t,{Z:()=>v});var n=a(487462),i=a(263366),l=a(894578);function r(e,t){return e.replace(RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}a(45697);var s=a(667294),o=a(973935);let c={disabled:!1};var u=a(500220),d="unmounted",p="exited",m="entering",h="entered",g="exiting",y=function(e){function t(t,a){n=e.call(this,t,a)||this;var n,i,l=a&&!a.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?l?(i=p,n.appearStatus=m):i=h:i=t.unmountOnExit||t.mountOnEnter?d:p,n.state={status:i},n.nextCallback=null,n}(0,l.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===d?{status:p}:null};var a=t.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var a=this.state.status;this.props.in?a!==m&&a!==h&&(t=m):(a===m||a===h)&&(t=g)}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,a,n=this.props.timeout;return e=t=a=n,null!=n&&"number"!=typeof n&&(e=n.exit,t=n.enter,a=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:a}},a.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===m?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===p&&this.setState({status:d})},a.performEnter=function(e){var t=this,a=this.props.enter,n=this.context?this.context.isMounting:e,i=this.props.nodeRef?[n]:[o.findDOMNode(this),n],l=i[0],r=i[1],s=this.getTimeouts(),u=n?s.appear:s.enter;if(!e&&!a||c.disabled){this.safeSetState({status:h},function(){t.props.onEntered(l)});return}this.props.onEnter(l,r),this.safeSetState({status:m},function(){t.props.onEntering(l,r),t.onTransitionEnd(u,function(){t.safeSetState({status:h},function(){t.props.onEntered(l,r)})})})},a.performExit=function(){var e=this,t=this.props.exit,a=this.getTimeouts(),n=this.props.nodeRef?void 0:o.findDOMNode(this);if(!t||c.disabled){this.safeSetState({status:p},function(){e.props.onExited(n)});return}this.props.onExit(n),this.safeSetState({status:g},function(){e.props.onExiting(n),e.onTransitionEnd(a.exit,function(){e.safeSetState({status:p},function(){e.props.onExited(n)})})})},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,a=!0;return this.nextCallback=function(n){a&&(a=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},a.onTransitionEnd=function(e,t){this.setNextCallback(t);var a=this.props.nodeRef?this.props.nodeRef.current:o.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(!a||n){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],l=i[0],r=i[1];this.props.addEndListener(l,r)}null!=e&&setTimeout(this.nextCallback,e)},a.render=function(){var e=this.state.status;if(e===d)return null;var t=this.props,a=t.children,n=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,i.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return s.createElement(u.Z.Provider,{value:null},"function"==typeof a?a(e,n):s.cloneElement(s.Children.only(a),n))},t}(s.Component);function f(){}y.contextType=u.Z,y.propTypes={},y.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:f,onEntering:f,onEntered:f,onExit:f,onExiting:f,onExited:f},y.UNMOUNTED=d,y.EXITED=p,y.ENTERING=m,y.ENTERED=h,y.EXITING=g;var _=function(e,t){return e&&t&&t.split(" ").forEach(function(t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))})},x=function(e){function t(){for(var t,a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,a){var n=t.resolveArguments(e,a),i=n[0],l=n[1];t.removeClasses(i,"exit"),t.addClass(i,l?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,a)},t.onEntering=function(e,a){var n=t.resolveArguments(e,a),i=n[0],l=n[1];t.addClass(i,l?"appear":"enter","active"),t.props.onEntering&&t.props.onEntering(e,a)},t.onEntered=function(e,a){var n=t.resolveArguments(e,a),i=n[0],l=n[1]?"appear":"enter";t.removeClasses(i,l),t.addClass(i,l,"done"),t.props.onEntered&&t.props.onEntered(e,a)},t.onExit=function(e){var a=t.resolveArguments(e)[0];t.removeClasses(a,"appear"),t.removeClasses(a,"enter"),t.addClass(a,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var a=t.resolveArguments(e)[0];t.addClass(a,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var a=t.resolveArguments(e)[0];t.removeClasses(a,"exit"),t.addClass(a,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,a){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,a]},t.getClassNames=function(e){var a=t.props.classNames,n="string"==typeof a,i=n?(n&&a?a+"-":"")+e:a[e],l=n?i+"-active":a[e+"Active"],r=n?i+"-done":a[e+"Done"];return{baseClassName:i,activeClassName:l,doneClassName:r}},t}(0,l.Z)(t,e);var a=t.prototype;return a.addClass=function(e,t,a){var n,i=this.getClassNames(t)[a+"ClassName"],l=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===a&&l&&(i+=" "+l),"active"===a&&e&&e.scrollTop,i&&(this.appliedClasses[t][a]=i,n=i,e&&n&&n.split(" ").forEach(function(t){var a,n;return a=e,n=t,void(a.classList?a.classList.add(n):(a.classList?n&&a.classList.contains(n):-1!==(" "+(a.className.baseVal||a.className)+" ").indexOf(" "+n+" "))||("string"==typeof a.className?a.className=a.className+" "+n:a.setAttribute("class",(a.className&&a.className.baseVal||"")+" "+n)))}))},a.removeClasses=function(e,t){var a=this.appliedClasses[t],n=a.base,i=a.active,l=a.done;this.appliedClasses[t]={},n&&_(e,n),i&&_(e,i),l&&_(e,l)},a.render=function(){var e=this.props,t=(e.classNames,(0,i.Z)(e,["classNames"]));return s.createElement(y,(0,n.Z)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(s.Component);x.defaultProps={classNames:""},x.propTypes={};let v=x},500220:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(667294);let i=n.createContext(null)},542473:e=>{"use strict";e.exports=function(){}},453364:(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>l});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardAttribution_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="610a35d46510240eb58e262c1909310c";let l=i},516658:(e,t,a)=>{"use strict";var n,i,l;a.r(t),a.d(t,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardBody_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"lastRepinDate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[l={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},{args:null,kind:"FragmentSpread",name:"RecipeMetadata_recipe"}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null}],storageKey:null},n,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"repinCount",storageKey:null},l,{args:null,kind:"FragmentSpread",name:"usePinImageUrls_pin"},{args:null,kind:"FragmentSpread",name:"useNormalizePinData_pin"},{args:null,kind:"FragmentSpread",name:"BestPinCardAttribution_pin"}],type:"Pin",abstractKey:null};r.hash="833cd5d58bc1ac105444aa923e882675";let s=r},394671:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightCropperContainer_pin",selections:[{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"FlashlightSpotlightDots_pin"}],type:"Pin",abstractKey:null};n.hash="0076d9d7f3a603762037e2b4fc289da9";let i=n},163431:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightResultGrid_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null}],type:"Pin",abstractKey:null};n.hash="0e18466f59f891e9ea12d1c056d9f627";let i=n},247821:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightSpotlightDots_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};n.hash="3a8409077905af94eb39568e4a5a57fc";let i=n},853512:(e,t,a)=>{"use strict";var n,i,l,r,s,o,c,u,d,p,m,h,g,y,f,_,x,v,b,S,w,k,P,T;a.r(t),a.d(t,{default:()=>F});let j=(n=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],i=[{kind:"Variable",name:"pin",variableName:"pinId"}],l={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},u={alias:"imageOrig",args:o=[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"orig")'},p={alias:"image736x",args:d=[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"736x")'},h={alias:"image564x",args:m=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"564x")'},y={alias:"image474x",args:g=[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"474x")'},_={alias:"image236x",args:f=[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"236x")'},x={alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},v={alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[s,{alias:"imageOrig",args:o,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"orig")'},{alias:"image736x",args:d,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"736x")'},{alias:"image564x",args:m,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"564x")'},{alias:"image474x",args:g,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"474x")'},{alias:"image236x",args:f,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"236x")'}],storageKey:null},w={alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:S=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:"additionalImageOrig",args:o,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:b=[s,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:c,storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"orig")'},{alias:"additionalImage564x",args:m,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:b,storageKey:'additionalImagesPerSpec(spec:"564x")'},{alias:"additionalImage736x",args:d,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:b,storageKey:'additionalImagesPerSpec(spec:"736x")'},{alias:"additionalImage474x",args:g,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:b,storageKey:'additionalImagesPerSpec(spec:"474x")'},{alias:"additionalImage236x",args:f,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:b,storageKey:'additionalImagesPerSpec(spec:"236x")'}],storageKey:null}],storageKey:null},k={alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:S,storageKey:null},P={alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},x,{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null}],storageKey:null},{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,r,s,u,p,h,y,_,{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[x,v],storageKey:null},w,k,P],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,r,s,u,p,h,y,_,{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[x,v,T={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},w,k,P,T],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"67eedd3e1834ee184411ff81c5eeea7cf9dc9ec53a5e099459966ce5369828ee",metadata:{},name:"MobileFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});j.hash="1647166e8b02809a5f8ccfca2dc5019a";let F=j;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(j.default||j)},990563:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileFlashlightPage_pin",selections:[{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"UnifiedPinRep_pin"}],type:"Pin",abstractKey:null};n.hash="97621a830643ac50c2f15e7aa19a3b57";let i=n},567637:(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>l});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RecipeMetadata_recipe",selections:[{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTimes",kind:"LinkedField",name:"cookTimes",plural:!1,selections:[{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"cook",plural:!1,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"m",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"prep",plural:!1,selections:n,storageKey:null}],storageKey:null}],type:"RecipeMetadata",abstractKey:null};i.hash="12f77507a9fdec344b44b7e659fa5ac1";let l=i},75306:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsImageContent_pin",selections:[{args:null,kind:"FragmentSpread",name:"FlashlightCropperContainer_pin"}],type:"Pin",abstractKey:null};n.hash="d3343cbed0df46adae9a256f0fc6f167";let i=n},900228:(e,t,a)=>{"use strict";var n,i,l,r,s,o,c,u,d,p,m,h,g,y,f,_,x,v,b,S,w,k,P;a.r(t),a.d(t,{default:()=>j});let T=(n=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],i=[{kind:"Variable",name:"pin",variableName:"pinId"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},u={alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null},m={alias:"imageOrig",args:d=[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"orig")'},g={alias:"image736x",args:h=[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"736x")'},f={alias:"image564x",args:y=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"564x")'},x={alias:"image474x",args:_=[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"474x")'},b={alias:"image236x",args:v=[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"236x")'},k={alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:w=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:"additionalImageOrig",args:d,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:S=[s,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:p,storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"orig")'},{alias:"additionalImage564x",args:y,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:S,storageKey:'additionalImagesPerSpec(spec:"564x")'},{alias:"additionalImage736x",args:h,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:S,storageKey:'additionalImagesPerSpec(spec:"736x")'},{alias:"additionalImage474x",args:_,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:S,storageKey:'additionalImagesPerSpec(spec:"474x")'},{alias:"additionalImage236x",args:v,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:S,storageKey:'additionalImagesPerSpec(spec:"236x")'},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,concreteType:"AdditionalImages",kind:"LinkedField",name:"additionalImages",plural:!0,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"canonicalImages",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"RelatedProductsPageQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[l,{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[r,s,o,c,u,m,g,f,x,b,k,P={alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:w,storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"RelatedProductsPageQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[r,s,o,c,u,m,g,f,x,b,k,P,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"c332f73995f8391ce4dfe3a30b03b24486b095d386805c50b8e3281506519216",metadata:{},name:"RelatedProductsPageQuery",operationKind:"query",text:null}});T.hash="7b85bceb87ab7e53ddca6d802c98eed3";let j=T;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(T.default||T)},237583:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsUnifiedFeed_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};n.hash="395dd0c72ba79e629fa9cf482a4b73d6";let i=n},23136:(e,t,a)=>{"use strict";var n,i,l,r,s,o,c,u,d,p,m,h,g,y,f,_,x,v,b,S,w,k,P,T,j,F,C,I,E,A,L,D,M,R,K,O,Z,N,z,H,U,$,B,G,V,W,Y,q,X,Q,J,ee,et,ea;a.r(t),a.d(t,{default:()=>ei});let en=(n=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],i=[{kind:"Variable",name:"pin",variableName:"pinId"}],l={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"repinCount",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},x={alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null},{alias:null,args:null,concreteType:"AnnotationsWithLinks",kind:"LinkedField",name:"annotationsWithLinksArray",plural:!0,selections:[f={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],storageKey:null},v={alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null},P=[b={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null}],T=[l,b,S,w,k],j={alias:null,args:null,kind:"ScalarField",name:"imageThumbnailUrl",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},D={alias:"imageOrig",args:C=[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:L=[I={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},_,E={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null}],storageKey:'images(spec:"orig")'},R={alias:"image564x",args:M=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:L,storageKey:'images(spec:"564x")'},O={alias:"image736x",args:K=[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:L,storageKey:'images(spec:"736x")'},N={alias:"image474x",args:Z=[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:L,storageKey:'images(spec:"474x")'},H={alias:"image236x",args:z=[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:L,storageKey:'images(spec:"236x")'},U={alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null},$={alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"inStock",storageKey:null}],storageKey:null},G={alias:"additionalImageOrig",args:C,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:B=[r,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:[A,_,I],storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"orig")'},X={alias:null,args:null,kind:"ScalarField",name:"canonicalImages",storageKey:null},Q={alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[s,u,{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[f,{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MakeCardTutorialMetadata",kind:"LinkedField",name:"tutorial",plural:!1,selections:[f,E],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[f,$,G,V={alias:"additionalImage564x",args:M,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:B,storageKey:'additionalImagesPerSpec(spec:"564x")'},W={alias:"additionalImage736x",args:K,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:B,storageKey:'additionalImagesPerSpec(spec:"736x")'},Y={alias:"additionalImage474x",args:Z,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:B,storageKey:'additionalImagesPerSpec(spec:"474x")'},q={alias:"additionalImage236x",args:z,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:B,storageKey:'additionalImagesPerSpec(spec:"236x")'},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,concreteType:"AdditionalImages",kind:"LinkedField",name:"additionalImages",plural:!0,selections:[r,X],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},J={alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[f,$,G,V,W,Y,q,{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,concreteType:"AdditionalImages",kind:"LinkedField",name:"additionalImages",plural:!0,selections:[X,r],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},et=[b,S,w,k,ee={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],ea=[l,b,S,w,k,ee],{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,r,s,o,c,u,d,p,m,h,g,y,x,{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[v],storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:P,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:P,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:T,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:T,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:T,storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[l,j,f,F,_],storageKey:null},D,R,O,N,H,U,Q,J],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,r,s,o,c,u,d,p,m,h,g,y,x,{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[v,ee],storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:et,storageKey:null},ee],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:et,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:ea,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:ea,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:ea,storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[l,j,f,F,_,ee],storageKey:null},D,R,O,N,H,U,Q,J,ee],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"5f09d38fcc19ea4defe9a2ced0ea73c23f12ec0bc0e6d4bd4f24974e35d6e8ea",metadata:{},name:"UnauthDesktopFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});en.hash="41066749b18be6f77425904cd44e3d69";let ei=en;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(en.default||en)},982385:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualLiveSearchProductFeedResourceContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"}],type:"Pin",abstractKey:null};n.hash="b69967adff40ae068eb5d3aad8f106f3";let i=n},290602:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualLiveSearchResourceContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"}],type:"Pin",abstractKey:null};n.hash="9d37ca13b584492c1fba958c00317b73";let i=n},91856:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchContainer_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"useGetViewLog_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsImageContent_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsUnifiedFeed_pin"},{args:null,kind:"FragmentSpread",name:"FlashlightResultGrid_pin"}],type:"Pin",abstractKey:null};n.hash="ecc8a2a34b852db42ada7b81f966ef5a";let i=n},620254:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchPageWithPinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetInitialCropArea_pin"},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"VisualLiveSearchProductFeedResourceContainer_pin"},{args:null,kind:"FragmentSpread",name:"VisualLiveSearchResourceContainer_pin"},{args:null,kind:"FragmentSpread",name:"VisualSearchUnifiedResourceContainer_pin"}],type:"Pin",abstractKey:null};n.hash="559409b5cdf594ceadec1100a8e980f8";let i=n},593390:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchUnifiedResourceContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"}],type:"Pin",abstractKey:null};n.hash="7074039637fc6e2b8dd0bdad128d63c8";let i=n},73129:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetInitialCropArea_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"}],type:"Pin",abstractKey:null};n.hash="120ad104e33b94ab10be1098dc10d74b";let i=n},467061:(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>l});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetNormalizedPinImage_pin",selections:[{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"236x")'}],type:"Pin",abstractKey:null};i.hash="3d7a6d04f923d00acfb2887f852aea16";let l=i},684824:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetViewLog_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};n.hash="4d2dba5ab4f3957f62edf10d66e5a060";let i=n},374963:(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>l});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useNormalizePinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:n=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:n,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null}],type:"Pin",abstractKey:null};i.hash="01a93671cde480baa2cfd8b781589acd";let l=i},77003:(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>l});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinImageUrls_pin",selections:[{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"60x60")'},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"170x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"236x")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"474x")'},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"736x")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"600x315")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"orig")'}],type:"Pin",abstractKey:null};i.hash="b7ea441f2c20a68b323088ebe3847835";let l=i},706737:(e,t,a)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/visual-search"]=function(){return a(19845).Z}},892254:(e,t,a)=>{"use strict";a.d(t,{$:()=>u,r:()=>d});var n=a(667294),i=a(342513),l=a(321329),r=a(5859),s=a(494125),o=a(785893);let{Provider:c,useHook:u}=(0,i.Z)("PinRep");function d({children:e}){let{isAuthenticated:t}=(0,r.B)(),[a,i]=(0,n.useState)(!0),[u,d]=(0,n.useState)(!1),p=(0,l.Z)(1000069);(0,s.Z)(()=>{let e=async()=>{if(!t){i(!1);return}let e=await p.fetchAllExperiences();e&&e.payload&&e.payload.experiences?.[1000069]?.experience_id===500417&&e.payload.experiences?.[1000069]?.display_data.hide_footer?p.viewExperience(1000069,500417):i(!1),d(!0)};e()});let m=(0,n.useMemo)(()=>({hasSimplifiedPinGridExpLoaded:u,hidePinRepFooter:a}),[u,a]);return(0,o.jsx)(c,{value:m,children:e})}},160408:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var n=a(667294),i=a(883119),l=a(140017),r=a(340523),s=a(5859),o=a(785893);function c({collapsed:e,displayViewState:t,forceTappableHeader:a,headerPaddingRight:c,headerPreview:u,heading:d,onClick:p,showArrow:m}){let h=(0,l.ZP)(),{checkExperiment:g}=(0,r.F)(),{isAuthenticated:y}=(0,s.B)(),f=y?g("auth_closeup_redesign").anyEnabled:g("unauth_closeup_redesign").anyEnabled;return(0,o.jsx)(n.Fragment,{children:a||null!==t?(0,o.jsx)(i.iP,{onTap:p,children:(0,o.jsxs)(i.kC,{alignItems:"center",dataTestId:"collapsible-header",direction:"row",flex:"grow",justifyContent:"between",children:[(0,o.jsx)(i.X6,{accessibilityLevel:2,align:"start",id:"comments-heading",size:f?"300":"400",children:d}),(0,o.jsxs)(i.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{paddingRight:c}},direction:"row",display:"flex",children:[e&&u,m&&(0,o.jsx)(i.xu,{alignItems:"center","data-test-id":"collapse-button",display:"flex",justifyContent:"center",marginStart:u?4:0,width:48,children:(0,o.jsx)(i.JO,{accessibilityLabel:h._('Expand icon', 'accordion.actionButton', 'accessibility label on accordion'),color:"default",icon:e?"arrow-down":"arrow-up"})})]})]})}):(0,o.jsx)(i.X6,{accessibilityLevel:2,align:"start",id:"comments-heading",size:"400",children:d})})}},803947:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var n=a(667294),i=a(883119),l=a(160408),r=a(340523),s=a(5859),o=a(554786),c=a(785893);function u({children:e,displayViewState:t,forceTappableHeader:a,headerPaddingRight:u,headerPreview:d,heading:p,collapseByDefault:m=!0}){let h=(0,o.ml)(),{checkExperiment:g}=(0,r.F)(),{isAuthenticated:y,isBot:f}=(0,s.B)(),_=h&&g(y?"closeup_auth_mweb_collapsable_modules":"closeup_unauth_mweb_collapsable_modules").group||"",x=["no_collapse_by_default","collapse_by_default"].includes(_),v="collapse_by_default"===_,[b,S]=(0,n.useState)(x&&!f&&v&&m||[1,2].includes(t));return(0,c.jsxs)(i.kC,{dataTestId:"collapsible-layout",direction:"column",gap:x?4:0,children:[(0,c.jsx)(l.Z,{collapsed:b,displayViewState:t,forceTappableHeader:a,headerPaddingRight:u,headerPreview:d,heading:p,onClick:()=>{S(!b)},showArrow:!0}),!b&&(0,c.jsx)(i.xu,{children:e})]})}},230556:(e,t,a)=>{"use strict";a.d(t,{n:()=>n});let n="300"},249123:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var n=a(667294),i=a(883119),l=a(230556),r=a(696534),s=a(140017),o=a(785893);function c({children:e,maxLines:t=10}){let a=(0,n.useRef)(null),[c,u]=(0,n.useState)({isFirstLoad:!0,isTruncated:!1}),d=(0,s.ZP)(),p=(0,r.vs)(),m=p?"#111":"#fff",{isFirstLoad:h,isTruncated:g}=c;return(0,n.useEffect)(()=>{var e;h&&a.current&&((e=a.current).offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)&&u({isFirstLoad:!1,isTruncated:!0})},[h,g]),(0,o.jsxs)(i.xu,{"data-test-id":"truncated-text",position:"relative",children:[(0,o.jsx)(i.xv,{ref:a,inline:!0,lineClamp:h||g?t:0,children:e}),g&&(0,o.jsx)(i.xu,{bottom:!0,display:"block",position:"absolute",width:"100%",children:(0,o.jsxs)(i.kC,{flex:"grow",children:[(0,o.jsx)(i.xu,{display:"inlineBlock",height:"14px",width:"120px"}),(0,o.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{paddingLeft:15,background:`linear-gradient(90deg, transparent 0%, ${m} 15%)`}},"data-test-id":"more-button",display:"inlineBlock",children:(0,o.jsx)(i.iP,{fullWidth:!1,onTap:()=>u({...c,isTruncated:!1}),children:(0,o.jsx)(i.xv,{inline:!0,size:l.n,weight:"bold",children:d._(' \u2026 more', 'closeup.TruncatedTextContent.moreLabel', 'Expand content label')})})}),(0,o.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{background:m}},display:"inlineBlock",flex:"grow"})]})})]})}},369971:(e,t,a)=>{"use strict";a.d(t,{Z:()=>g});var n=a(667294),i=a(883119),l=a(838011),r=a(214877),s=a(549629),o=a(205841),c=a(140017),u=a(572345),d=a(561916),p=a(785893);function m({component:e,cropSource:t,fadeBottomEdge:a,filterOptions:l,filterType:s,handleFilterChange:m,maxContentHeight:h,paddingX:g,showVerifiedMerchants:y,uiType:f,viewParameter:_,viewType:x}){let v=(0,c.ZP)(),{logContextEvent:b}=(0,r.v)(),S=a=>{let n=l[a];b({aux_data:{commerce_data:JSON.stringify({filter_value:n.string_value??n.numeric_value??n.search_type,select:!n.checked,source:(0,d.Z)({cropSource:t,viewType:x})}),filter_type:s},component:e,event_type:101,view_parameter:_,view_type:x}),m(a)},[w,k]=(0,n.useState)(!1),P=(0,n.useRef)(null);return(0,p.jsxs)(i.xu,{maxHeight:h||void 0,position:"relative",children:[(0,p.jsxs)(i.xu,{ref:P,maxHeight:h||void 0,onScroll:()=>{if(!a||!P.current)return;let{scrollTop:e,scrollHeight:t,clientHeight:n}=P.current;k(t-e-n<10)},overflow:"auto",paddingX:g,children:["check-circles"===f&&l.map(({label:e,image_url:t,is_verified_merchant:a,checked:n},l)=>(0,p.jsx)(i.iP,{onTap:()=>S(l),children:(0,p.jsxs)(i.xu,{alignItems:"center","data-test-id":"multi-select-option",direction:"row",display:"flex",marginBottom:3,children:[(0,p.jsx)(i.xu,{marginEnd:3,children:(0,p.jsx)(o.qE,{name:e,size:"sm",src:t})}),(0,p.jsxs)(i.kC,{alignItems:"center",direction:"row",flex:"grow",children:[(0,p.jsx)(i.xv,{children:e}),y&&a&&(0,p.jsx)(i.xu,{marginStart:1,children:(0,p.jsx)(u.Z,{isVerifiedMerchant:!0,size:"xs"})})]}),(0,p.jsx)(i.xu,{"data-test-id":n?"option-selected":void 0,margin:-2,marginBottom:-3,marginTop:-3,children:(0,p.jsx)(i.hU,{accessibilityLabel:v._('Domain Filter Option', 'UnifiedFilter.MultiSelectFilter.domainFilterOptionAccessibilityLabel', 'Accessibility label for radio button of domain filter choices'),icon:n?"check-circle":"circle-outline",iconColor:"darkGray",onClick:()=>S(l),size:"lg"})})]})},e)),"check-boxes"===f&&l.map(({label:e,image_url:t,is_verified_merchant:a,checked:n},l)=>(0,p.jsxs)(i.xu,{alignItems:"center","data-test-id":"multi-select-option",direction:"row",display:"flex",marginBottom:3,children:[(0,p.jsx)(i.xu,{marginEnd:3,children:t?.startsWith("color_")?(0,p.jsx)(i.xu,{borderStyle:"sm",dangerouslySetInlineStyle:{__style:{backgroundColor:t.split("_")[1]}},height:20,rounding:"circle",width:20}):(0,p.jsx)(o.qE,{name:e,size:"sm",src:t})}),(0,p.jsxs)(i.kC,{alignItems:"center",direction:"row",flex:"grow",children:[(0,p.jsx)(i.__,{htmlFor:`multi-select-filter--${e}`,children:(0,p.jsx)(i.xv,{children:e})}),y&&a&&(0,p.jsx)(i.xu,{marginStart:1,children:(0,p.jsx)(u.Z,{isVerifiedMerchant:!0,size:"xs"})})]}),(0,p.jsx)(i.xu,{"data-test-id":n?"option-selected":void 0,margin:1,children:(0,p.jsx)(i.XZ,{checked:n,id:`multi-select-filter--${e}`,onChange:()=>S(l)})})]},e))]}),a&&(0,p.jsx)(i.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{background:"linear-gradient(0deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%)",pointerEvents:"none",transition:"opacity 0.1s",opacity:w?0:1}},"data-test-id":"multi-select-filter-fade-bottom-edge",height:30,position:"absolute",width:"100%"})]})}function h({children:e,filterOptions:t,filterType:a,title:s,viewLogData:o,viewParameter:u,viewType:d}){let{logContextEvent:m}=(0,r.v)(),h=(0,c.ZP)(),g=(0,l.Z)(),[y,f]=(0,n.useState)(!0),_=g?14325:13469;return(0,p.jsxs)(n.Fragment,{children:[(0,p.jsx)(i.xu,{marginBottom:2,children:(0,p.jsxs)(i.kC,{alignItems:"center",justifyContent:"between",children:[(0,p.jsx)(i.xv,{weight:"bold",children:s||h._('Sellers', 'UnifiedFilter.MultiSelectFilter.sellersHeaderText', 'ProductFilters.Domains.HeaderText')}),(0,p.jsx)(i.xu,{flex:"none",children:(0,p.jsx)(i.hU,{accessibilityLabel:h._('Domain filter', 'UnifiedFilter.MultiSelectFilter.domainFilterAccessibilityLabel', 'accessibility label for the icon button to open or close domain filter'),icon:y?"arrow-up":"arrow-down",iconColor:"darkGray",onClick:()=>{f(!y),m({aux_data:{commerce_data:JSON.stringify({filter:y?"collapsed":"expanded"}),filter_type:a},component:_,element:g?13522:11547,event_type:101,view_parameter:u,view_type:d}),y||m(o)},size:"sm"})})]})}),y?e:(0,p.jsx)(i.xu,{width:"80%",children:(0,p.jsx)(i.xv,{color:"subtle",size:"200",children:function(e=[],t){let a=e.filter(e=>e.checked),n=a.length,i=0===n?t._('All', 'UnifiedFilter.MultiSelectFilter.allDomainsSelectedText', 'text indicates that no domain filter is currently applied for filtering'):`(${n}) ${a.map(e=>e.label).join(", ")}`;return i}(t,h)})})]})}function g({cropSource:e,fadeBottomEdge:t,filterOptions:a,filterType:n,handleFilterChange:i,isCollapsible:o,maxContentHeight:c,paddingX:u,showVerifiedMerchants:g,title:y,uiType:f,viewParameter:_,viewType:x}){let{logContextEvent:v}=(0,r.v)(),b=(0,l.Z)(),S=b?14325:13469,w={aux_data:{commerce_data:JSON.stringify({source:(0,d.Z)({cropSource:e,viewType:x})}),filter_type:n},component:S,event_type:13,view_parameter:_,view_type:x},k=(0,p.jsx)(m,{component:S,cropSource:e,fadeBottomEdge:t,filterOptions:a,filterType:n,handleFilterChange:t=>{let l=a[t];v({aux_data:{commerce_data:JSON.stringify({filter_value:l.string_value??l.numeric_value??l.search_type,select:!l.checked,source:(0,d.Z)({cropSource:e,viewType:x})}),filter_type:n},component:S,event_type:101,view_parameter:_,view_type:x}),i(t)},maxContentHeight:c,paddingX:u,showVerifiedMerchants:g,uiType:f,viewParameter:_,viewType:x});return(0,p.jsx)(s.Z,{log:w,children:o?(0,p.jsx)(h,{filterOptions:a,filterType:n,title:y,viewLogData:w,viewParameter:_,viewType:x,children:k}):k})}},318612:(e,t,a)=>{"use strict";a.d(t,{Z:()=>b});var n=a(667294),i=a(883119),l=a(367295),r=a(306604),s=a(5859),o=a(785893);function c(e,t,a,n){let i=(0,r.c3)((0,r.$X)(e,!!t),a,!!t);return n&&(i=i.slice(0,-3)),i}function u({valueInMicroCurrency:e,requestContext:t,currencyCode:a,disableAutoFormatOnChange:s,hasFractionalCents:u,roundValue:d,onValueParsed:p,autoComplete:m,placeholder:h,errorMessage:g,id:y}){let f=a&&l.XD[a]||"",_="";if("number"==typeof e){let a=c(e,u,t.locale,d);_=`${f}${a}`}let[x,v]=(0,n.useState)(_);(0,n.useEffect)(()=>{if(!s&&null!=e&&""===x){let a=c(e,u,t.locale,d);v(a)}},[x,s,u,t,d,e]);let b=(e,a,n,i)=>{let l="";if(null==e)l="";else{let a=c(e,n,t.locale,i);l=`${f}${a}`}return l},S=()=>{let e;let a=(0,r.qq)(x,t.locale,!!u);e=""===x?null:Number.isNaN(a)?Number.MIN_VALUE:(0,r.y)(a,!!u);let n=b(e,x,!!u,d);v(n),p(e)};return(0,o.jsx)(i.nv,{autoComplete:m,errorMessage:g,id:y,onBlur:()=>{S()},onChange:({value:e})=>v(e),placeholder:h,size:"lg",value:x})}function d(e){return(0,o.jsx)(u,{...e,requestContext:(0,s.B)()})}var p=a(140017);function m({CustomMaxField:e,CustomMinField:t,handleMaxChange:a,handleMinChange:l,maxHeading:r,minHeading:s,max:c,min:u}){let d=(0,p.ZP)();return(0,o.jsxs)(n.Fragment,{children:[(0,o.jsxs)(i.kC,{direction:"row",children:[(0,o.jsx)(i.sg,{span:7,children:(0,o.jsx)(i.xv,{size:"200",children:s??d._('Min', 'rangeFilter.min', 'Minimum Range')})}),(0,o.jsx)(i.sg,{span:5,children:(0,o.jsx)(i.xv,{size:"200",children:r??d._('Max', 'rangeFilter.max', 'Maximum Range')})})]}),(0,o.jsxs)(i.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"center",marginTop:2,children:[(0,o.jsx)(i.sg,{span:5,children:t?(0,o.jsx)(t,{value:u}):(0,o.jsx)(i.Ki,{autoComplete:"off",id:"min",onChange:({value:e})=>{l&&l(e)},size:"lg",value:u})}),(0,o.jsx)(i.sg,{span:2,children:(0,o.jsx)(i.xv,{align:"center",color:"subtle",size:"200",children:d._('to', 'Min to Max', 'Min to Max')})}),(0,o.jsx)(i.sg,{span:5,children:e?(0,o.jsx)(e,{value:c}):(0,o.jsx)(i.Ki,{autoComplete:"off",id:"max",onChange:({value:e})=>{a&&a(e)},size:"lg",value:c})})]})]})}var h=a(838011),g=a(214877),y=a(494125),f=a(750701),_=a(561916);function x({children:e,currencyCode:t,defaultMaxPrice:a,defaultMinPrice:r,filterType:s,logViewEvent:c,maxPrice:u,minPrice:d,title:m,viewParameter:y,viewType:f}){let{logContextEvent:_}=(0,g.v)(),x=(0,p.ZP)(),v=(0,h.Z)(),b=l.XD[t]||"",[S,w]=(0,n.useState)(!0),k=v?14324:13468;return(0,o.jsxs)(n.Fragment,{children:[(0,o.jsxs)(i.kC,{alignItems:"center",justifyContent:"between",children:[(0,o.jsx)(i.xu,{"data-test-id":"price-filter-label",children:(0,o.jsx)(i.xv,{weight:"bold",children:m||x._('Price', 'Header of product price filter', 'Header of product price filter')})}),(0,o.jsx)(i.xu,{flex:"none",children:(0,o.jsx)(i.hU,{accessibilityLabel:x._('Price filter', 'accessibility label for the icon button to open or close price filter', 'accessibility label for the icon button to open or close price filter'),icon:S?"arrow-up":"arrow-down",iconColor:"darkGray",onClick:()=>{w(!S),_({event_type:101,component:k,element:v?13522:11547,view_type:f,view_parameter:y,aux_data:{commerce_data:JSON.stringify({filter:S?"collapsed":"expanded"}),filter_type:s}}),S||c()},size:"sm"})})]}),S?e:(0,o.jsx)(i.xv,{color:"subtle",size:"200",children:-1===u&&-1===d?x._('All', 'text indicates that no price filter is currently applied for filtering', 'text indicates that no price filter is currently applied for filtering'):-1===u?`${b}${d}  ${b}${Math.ceil(a)}+`:-1===d?`${b}${Math.floor(r)}  ${b}${u}`:`${b}${d}  ${b}${u}`})]})}function v({cropSource:e,currencyCode:t,defaultMaxPrice:a,defaultMinPrice:n,disableAutoFormatOnChange:r,handleMaxPriceChange:s,handleMinPriceChange:c,instructions:u,maxPrice:h,minPrice:g,onRangeChange:y,uiType:_}){let x=(0,p.ZP)(),v=l.XD[t]||"",b=Math.ceil(a),S=Math.floor(n),w=-1===g&&-1===h;return(0,o.jsxs)(i.xu,{paddingY:4,children:["slider"===_&&(0,o.jsx)(f.Z,{cropSource:e,currencyType:t,handlePriceChange:([e,t])=>{y?.(),e!==g&&c(e),t!==h&&s(t)},instructions:u||"",lowerBound:n,maxPrice:h,minPrice:g,upperBound:a}),"number-boxes"===_&&(0,o.jsx)(m,{CustomMaxField:({value:e})=>(0,o.jsx)(i.xu,{"data-test-id":"max-price-filter",children:(0,o.jsx)(d,{autoComplete:"off",currencyCode:t,disableAutoFormatOnChange:r,id:"max_price",onValueParsed:e=>{s((e||0)/1e6)},placeholder:`${v}${b}`,roundValue:!0,valueInMicroCurrency:w?null:e})}),CustomMinField:({value:e})=>(0,o.jsx)(i.xu,{"data-test-id":"min-price-filter",children:(0,o.jsx)(d,{autoComplete:"off",currencyCode:t,disableAutoFormatOnChange:r,id:"min_price",onValueParsed:e=>{c((e||0)/1e6)},placeholder:`${v}${S}`,roundValue:!0,valueInMicroCurrency:w?null:e})}),max:-1===h?1e6*b:1e6*h,maxHeading:x._('Max', 'Maximum Price', 'Maximum Price'),min:-1===g?1e6*S:1e6*g,minHeading:x._('Min', 'Minimum Price', 'Minimum Price')})]})}function b({cropSource:e,currencyCode:t,defaultMaxPrice:a,defaultMinPrice:i,disableAutoFormatOnChange:l,filterType:r,handleMaxPriceChange:s,handleMinPriceChange:c,instructions:u,isCollapsible:d,maxPrice:p,minPrice:m,onRangeChange:f,title:b,uiType:S,viewParameter:w,viewType:k}){let{logContextEvent:P}=(0,g.v)(),T=(0,h.Z)(),j=()=>{P({event_type:13,component:T?14324:13468,view_type:k,view_parameter:w,aux_data:{commerce_data:JSON.stringify({source:(0,_.Z)({cropSource:e,viewType:k})}),filter_type:r}})};return(0,y.Z)(()=>{j()}),(0,o.jsx)(n.Fragment,{children:d?(0,o.jsx)(x,{currencyCode:t,defaultMaxPrice:a,defaultMinPrice:i,filterType:r,logViewEvent:j,maxPrice:p,minPrice:m,title:b,viewParameter:w,viewType:k,children:(0,o.jsx)(v,{cropSource:e,currencyCode:t,defaultMaxPrice:a,defaultMinPrice:i,disableAutoFormatOnChange:l,handleMaxPriceChange:s,handleMinPriceChange:c,instructions:u,isCollapsible:!0,maxPrice:p,minPrice:m,onRangeChange:f,uiType:S})}):(0,o.jsx)(v,{cropSource:e,currencyCode:t,defaultMaxPrice:a,defaultMinPrice:i,disableAutoFormatOnChange:l,handleMaxPriceChange:s,handleMinPriceChange:c,instructions:u,maxPrice:p,minPrice:m,onRangeChange:f,uiType:S})})}},838551:(e,t,a)=>{"use strict";a.d(t,{$:()=>n,v:()=>i});let n=50,i={APPLIED:"applied",CLEARED:"cleared",MODIFIED:"modified",SUBMITTED:"submitted",FAILED:"failed"}},838011:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var n=a(340523),i=a(149722);function l(){let{isAuth:e,country:t}=(0,i.Z)(),{checkExperiment:a}=(0,n.F)();if(!e)return!1;let{anyEnabled:l}=a("web_search_unified_content_filters_international");return"US"===t||l}},172618:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var n=a(616550),i=a(883119),l=a(214877),r=a(901855),s=a(140017),o=a(785893);function c({arrowType:e,pinId:t,viewParameter:a,viewType:c}){let u=(0,s.ZP)(),d=(0,n.k6)(),{previous:p}=(0,r.Hv)(),{logContextEvent:m}=(0,l.v)();return(0,o.jsx)(i.xu,{"data-test-id":"go-back-button",children:(0,o.jsx)(i.hU,{accessibilityLabel:u._('Go back', 'Accessible icon for close button', 'Accessible icon for close button'),icon:e??"directional-arrow-left",iconColor:"darkGray",onClick:()=>{if(m({event_type:101,view_type:c,element:34,view_parameter:a}),0===p.length){d.replace(`/pin/${t}/`);return}d.goBack()}})})}},735382:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(624797);function i(e){let t=(0,n.mB)(e.search),a=parseInt(t.x,10),i=parseInt(t.y,10),l=parseInt(t.w,10),r=parseInt(t.h,10),s=!function(...e){return e.every(Number.isInteger)}(a,i,l,r)?null:{x:a,y:i,w:l,h:r};return s}},431377:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var n=a(883119),i=a(408206),l=a(214877),r=a(213377),s=a(70903),o=a(822592),c=a(676554),u=a(785893);function d({action:e,component:t,dangerouslySetActionUrl:a,element:d,contextLogData:p,hasPwtConstraint:m,id:h,objects:g,surface:y,viewType:f,viewParameter:_}){let{logContextEvent:x}=(0,l.v)(),v=(0,i.Z)(),b=e?.url&&e.text?n=>(0,u.jsx)(o.Z,{coverImages:n.images,height:r.yF,onClick:()=>x({event_type:101,view_type:f,view_parameter:_,component:t,element:d,aux_data:{story_id:h,...p}}),text:e.text,url:a??e.url,width:r.yF},"actionBubble"):null,{containerRef:S,itemsToRender:w,actionItem:k}=(0,s.n)({items:g,itemWidth:r.yF,itemGap:r.oX,actionItemType:b?"one":void 0});return m&&v&&v(w&&w.length>0?"complete":"remove"),(0,u.jsxs)(s.Z,{containerRef:S,itemGap:r.oX,children:[w.map((e,a)=>(0,u.jsx)(n.xu,{"data-grid-item":"true",flex:"none",width:r.yF,children:(0,u.jsx)(c.ZP,{authDesktopSurface:y??"ShoppingDynamicHeightGrid",auxData:p,componentType:t,duploQueryRef:null,pin:e,pinId:e.id,pinImageCrop:{height:r.yF,width:r.yF},slotIndex:a,viewParameter:_,viewType:f})},e.id)),k&&b?.(k)]})}},819429:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var n=a(667294),i=a(883119),l=a(140017),r=a(254292),s=a(785893);function o({title:e}){let t=(0,l.ZP)();return(0,s.jsx)(n.Fragment,{children:e?(0,s.jsx)(i.X6,{accessibilityLevel:1,size:"400",children:e}):(0,s.jsx)(r.Z,{text:t._('Image Search Page', 'imageSearch.accessibilityHiddenHeading', 'Accessibility label for image search page')})})}},408206:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(906623);function i(){let e=(0,n.E)();return t=>{e&&t&&("remove"===t?e.removeConstraint("shoppingModuleRender"):"complete"===t&&e.markConstraintComplete("shoppingModuleRender"))}}},82205:(e,t,a)=>{"use strict";a.d(t,{Z:()=>x});var n=a(667294),i=a(883119),l=a(785893);function r({isTopRow:e,image:t}){return(0,l.jsxs)(i.zd,{height:e?217:168,wash:!0,width:e?236:117,children:[(0,l.jsx)(i.Ee,{alt:t.alt||"",fit:"cover",naturalHeight:t.height??1,naturalWidth:t.width??1,src:t.url??""}),!!t.price&&(0,l.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"18px",color:"#111",fontSize:"10px",fontWeight:"600",lineHeight:"24px",padding:"06px"}},"data-test-id":"shopping-upsell-price",height:24,left:!0,margin:1,paddingX:2,paddingY:1,position:"absolute",top:!0,children:t.price})]})}var s=a(214877),o=a(205841),c=a(184390),u=a(666472),d=a(223785),p=a(340523),m=a(5859),h=a(862249),g=a(259239),y=a(97538);let f={container:{borderRadius:`${d.Oc}px ${d.Oc}px 25px 25px`,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},content:{marginBottom:"2px"},visualOverlay:{backgroundColor:"rgba(0, 0, 0, .1)"}},_=({images:e,firstImageIndex:t})=>{let a=t+1,n=t+2;return(0,l.jsxs)(i.xu,{overflow:"hidden",rounding:4,children:[(0,l.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:f.content},children:e.at(t)?(0,l.jsx)(r,{image:e[t],isTopRow:!0}):null}),e.length>n?(0,l.jsxs)(i.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,l.jsx)(r,{image:e[a]}),(0,l.jsx)(r,{image:e[n]})]}):null]})};function x({dangerouslySetActionUrl:e,query:t,story:a,slotIndex:r}){let d,x,v,b;let{logContextEvent:S}=(0,s.v)(),{isAuthenticated:w}=(0,m.B)(),{checkExperiment:k}=(0,p.F)(),P=k(w?"web_deprecated_impression_tracker_standalone_impression_auth":"web_deprecated_impression_tracker_standalone_impression_unauth").anyEnabled,{action:T,id:j,objects:F,story_type:C,subtitle:I}=a,{text:E,url:A}=T||{},[L,D]=(0,n.useState)(!1),M=(0,n.useCallback)(()=>D(!0),[D]),R=(0,n.useCallback)(()=>D(!1),[D]),K=(F||[]).reduce((e,t)=>"pin"!==t.type?e:[...e,{domain:t.domain,image:{alt:t.title||t.description,height:t.images?.["474x"]?.height,url:t.images?.["474x"]?.url,width:t.images?.["474x"]?.width,price:(t.rich_summary?.products?.[0]||{}).offer_summary?.price}}],[]),O=(K[0]||{}).domain||void 0,Z={story_type:C};["search_product_collage_story","shop_article_story"].includes(C)?(d=2,x=43,Z={...Z,story_id:j,entered_query:t}):"shop_brand_story"===C||"shop_brand_affinity_story"===C?(d=1,x=92,O&&(Z={...Z,commerce_data:JSON.stringify({domain:O})})):["stela_in_flashlight_card","stela_in_flashlight_onecol"].includes(C)?(d=72,x=3050):"related_domain_collage"===C?(d=72,x=3455):"related_products_collage"===C&&(d=1,x=3177);let N=()=>S({event_type:101,element:372,component:200,view_type:d,view_parameter:x,aux_data:{story_type:C}}),z=I?4:2;if(["related_domain_collage","shop_brand_story","shop_brand_affinity_story"].includes(C)&&T){let e=T.user;v=e&&(e.image_medium_url||e.image_large_url),b=e&&e.full_name}let H=e||A;if(!H)return null;let U=(0,h.Z)({url:H})?"nofollow":"none";return P?(0,l.jsx)(u.F,{componentType:200,contextLogData:Z||{},impressionType:"Story",loggingId:C,pinData:null,slotIndex:r,viewParameter:x,viewType:d,children:({impressionTrackerRef:e})=>(0,l.jsx)(i.xu,{ref:e,children:(0,l.jsx)(i.Tg,{href:H,onTap:N,rel:U,children:(0,l.jsxs)(i.xu,{dangerouslySetInlineStyle:{__style:f.container},onMouseEnter:M,onMouseLeave:R,overflow:"hidden",position:"relative",children:[(0,l.jsx)(_,{firstImageIndex:["related_domain_collage","related_products_collage"].includes(C)?1:0,images:K.map(({image:e})=>e)}),(0,l.jsx)(i.xu,{alignItems:"center",color:"secondary",display:"flex",justifyContent:"center",marginTop:2,paddingX:3,paddingY:z,rounding:"pill",children:(0,l.jsxs)(i.xu,{alignContent:"start",direction:"column",display:"flex",justifyContent:"center",margin:2,children:[I?(0,l.jsx)(i.xu,{marginBottom:1,children:(0,l.jsx)(i.xv,{align:"start",color:"subtle",children:I.format})}):null,(0,l.jsx)(i.xv,{align:"start",weight:"bold",children:E})]})}),b&&v&&(0,l.jsx)(i.xu,{margin:2,position:"absolute",right:!0,top:!0,children:(0,l.jsx)(o.qE,{name:b,outline:!0,size:"md",src:v})}),(0,l.jsx)(y.Z,{visibility:L?"visible":"none",children:(0,l.jsx)(g.Z,{additionalStyles:f.visualOverlay})})]})})})}):(0,l.jsx)(c.Z,{componentType:200,contextLogData:Z||{},impressionType:"Story",loggingId:C,pinData:null,slotIndex:r,viewParameter:x,viewType:d,children:(0,l.jsx)(i.Tg,{href:H,onTap:N,rel:U,children:(0,l.jsxs)(i.xu,{dangerouslySetInlineStyle:{__style:f.container},onMouseEnter:M,onMouseLeave:R,overflow:"hidden",position:"relative",children:[(0,l.jsx)(_,{firstImageIndex:["related_domain_collage","related_products_collage"].includes(C)?1:0,images:K.map(({image:e})=>e)}),(0,l.jsx)(i.xu,{alignItems:"center",color:"secondary",display:"flex",justifyContent:"center",marginTop:2,paddingX:3,paddingY:z,rounding:"pill",children:(0,l.jsxs)(i.xu,{alignContent:"start",direction:"column",display:"flex",justifyContent:"center",margin:2,children:[I?(0,l.jsx)(i.xu,{marginBottom:1,children:(0,l.jsx)(i.xv,{align:"start",color:"subtle",children:I.format})}):null,(0,l.jsx)(i.xv,{align:"start",weight:"bold",children:E})]})}),b&&v&&(0,l.jsx)(i.xu,{margin:2,position:"absolute",right:!0,top:!0,children:(0,l.jsx)(o.qE,{name:b,outline:!0,size:"md",src:v})}),(0,l.jsx)(y.Z,{visibility:L?"visible":"none",children:(0,l.jsx)(g.Z,{additionalStyles:f.visualOverlay})})]})})})}},922725:(e,t,a)=>{"use strict";a.d(t,{S:()=>x,Z:()=>w});var n=a(667294),i=a(615071),l=a(883119),r=a(587703),s=a(785893);let o={nw:0,ne:90,se:180,sw:270},c={ne:[7,-7],se:[7,7],sw:[-7,7],nw:[-7,-7]},u={nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},d=(e,t,a,n)=>{if("rounded"!==n)return`translate(${t}, ${a}), rotate(${o[e]})`;{let[n,i]=c[e];return`translate(${t+n}, ${a+i}), rotate(${o[e]})`}};function p({corner:e,x:t,y:a,size:n,cornerStyle:i}){return(0,s.jsxs)("g",{style:{cursor:u[e]},transform:d(e,t,a,i),children:[(0,s.jsx)("rect",{className:`v2cropperHandle ${e}`,fill:"rgba(0,0,0,0)",height:n,stroke:"none",width:n,x:0,y:0}),"rounded"===i?(0,s.jsx)("path",{className:`v2cropperHandle ${e}`,d:"M16 0H24V8H16C11.5817 8 8 11.5817 8 16V24H0V16C0 7.16343 7.16345 0 16 0Z",fill:"#fff"}):(0,s.jsx)("path",{className:`v2cropperHandle ${e}`,d:`M ${n} 0 L 0 0 L 0 ${n}`,fill:"none",stroke:"#fff",strokeWidth:6})]})}let m={n:"ns-resize",s:"ns-resize",e:"ew-resize",w:"ew-resize"};function h({edge:e,x:t,y:a,w:n,h:i}){return(0,s.jsx)("rect",{className:`v2cropperHandle ${e}`,fill:"rgba(0,0,0,0)",height:i,stroke:"none",style:{cursor:m[e]},width:n,x:t,y:a})}function g({x:e,y:t,w:a,h:i}){let l="rounded";return(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(p,{corner:"nw",cornerStyle:l,size:20,x:e,y:t}),(0,s.jsx)(p,{corner:"ne",cornerStyle:l,size:20,x:e+a,y:t}),(0,s.jsx)(p,{corner:"sw",cornerStyle:l,size:20,x:e,y:t+i}),(0,s.jsx)(p,{corner:"se",cornerStyle:l,size:20,x:e+a,y:t+i}),(0,s.jsx)(h,{edge:"n",h:30,w:a-40,x:e+20,y:t-10}),(0,s.jsx)(h,{edge:"e",h:i-40,w:30,x:e+a-20,y:t+20}),(0,s.jsx)(h,{edge:"s",h:30,w:a-40,x:e+20,y:t+i-10}),(0,s.jsx)(h,{edge:"w",h:i-40,w:30,x:e-20,y:t+20})]})}var y=a(105737),f=a(406893);function _(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let x=16,v={h:0,w:0,x:0,y:0},b=`
.preview-crop-area-enter {
  opacity: 0;
}

.preview-crop-area-enter-active {
  opacity: 1;
  transition: opacity 300ms;
}

.preview-crop-area-exit {
  opacity: 1;
}

.preview-crop-area-exit-active {
  opacity: 0;
  transition: opacity 300ms;
}

.preview-crop-area-exit-done {
  opacity: 0;
}
`;class S extends n.Component{constructor(...e){super(...e),_(this,"state",{cropArea:!!this.props.initialCropArea&&function({initialCropArea:e,imageSize:t}){let{x:a,y:n,w:i,h:l}=e,{h:r,w:s}=t;if(!r||!s)return e;let o=a,c=n,u=i,d=l;return o<x&&(o=x,u-=x-a),o+u>s-x&&(u-=o+u-s+x),c<x&&(c=x,d-=x-n),c+d>r-x&&(d-=c+d-r+x),{x:o,y:c,w:u,h:d}}({initialCropArea:this.props.initialCropArea,imageSize:this.props.imageSize})||v,cropChangeType:null}),_(this,"updateCropAreaState",()=>{this.setState({cropArea:this.props.initialCropArea??v})}),_(this,"cropResizeDirection",null),_(this,"_cropperOverlay",(0,n.createRef)()),_(this,"_checkCropHandleValid",(e,t)=>{let{cropArea:{h:a,w:n,x:i,y:l}}=this.state;switch(this.cropResizeDirection){case"ne":e<i&&t>l+a?this.cropResizeDirection="sw":e<i?this.cropResizeDirection="nw":t>l+a&&(this.cropResizeDirection="se");break;case"nw":e>i+n&&t>l+a?this.cropResizeDirection="se":e>i+n?this.cropResizeDirection="ne":t>l+a&&(this.cropResizeDirection="sw");break;case"se":e<i&&t<l?this.cropResizeDirection="nw":e<i?this.cropResizeDirection="sw":t<l&&(this.cropResizeDirection="ne");break;case"sw":e>i+n&&t<l?this.cropResizeDirection="ne":e>i+n?this.cropResizeDirection="se":t<l&&(this.cropResizeDirection="nw");break;case"n":t>l+a&&(this.cropResizeDirection="s");break;case"s":t<l&&(this.cropResizeDirection="n");break;case"e":e<i&&(this.cropResizeDirection="w");break;case"w":e>i+n&&(this.cropResizeDirection="e")}}),_(this,"handleOnMouseDown",e=>{e.preventDefault(),e.stopPropagation();let{clientX:t,clientY:a}=e,{target:n}=e,i=t-this._cropperOverlayCoor.x,l=a-this._cropperOverlayCoor.y,r=n.classList?Array.from(n.classList):n instanceof Element&&n.getAttribute("class")?.split(" ")||[];r.includes("v2cropperHandle")?(this.setState({cropChangeType:"resize"}),r.includes("ne")&&(this.cropResizeDirection="ne"),r.includes("nw")&&(this.cropResizeDirection="nw"),r.includes("se")&&(this.cropResizeDirection="se"),r.includes("sw")&&(this.cropResizeDirection="sw"),r.includes("n")&&(this.cropResizeDirection="n"),r.includes("s")&&(this.cropResizeDirection="s"),r.includes("e")&&(this.cropResizeDirection="e"),r.includes("w")&&(this.cropResizeDirection="w")):r.includes("v2cropSection")?(this.setState({cropChangeType:"move"}),this.cropChangeStartCoor={x:i,y:l}):r.includes("v2shadowMask")&&(this.cropChangeStartCoor={x:i,y:l},this.setState({cropArea:{h:0,w:0,x:i,y:l},cropChangeType:"select"}))}),_(this,"handleOnMouseMove",e=>{let{cropArea:{h:t,w:a,x:n,y:i},cropChangeType:l}=this.state,{imageSize:r}=this.props,{clientX:s,clientY:o}=e,c=s-this._cropperOverlayCoor.x,u=o-this._cropperOverlayCoor.y;if("resize"===l){let e=Math.max(Math.min(c,(r.w??1)-x),x),l=Math.max(Math.min(u,(r.h??1)-x),x);switch(this._checkCropHandleValid(e,l),this.cropResizeDirection){case"ne":{let a=Math.max(t+(i-l),48),r=Math.max(e-n,48);this.setState({cropArea:{h:a,w:r,x:n,y:a<=48?i:l}});break}case"nw":{let r=Math.max(a+(n-e),48),s=Math.max(t+(i-l),48);this.setState({cropArea:{h:s,w:r,x:48===r?n:e,y:48===s?i:l}});break}case"se":{let t=Math.max(l-i,48),a=Math.max(e-n,48);this.setState({cropArea:{h:t,w:a,x:n,y:i}});break}case"sw":{let t=Math.max(l-i,48),r=Math.max(a+(n-e),48);this.setState({cropArea:{h:t,w:r,x:48===r?n:e,y:i}});break}case"n":{let e=Math.max(i-l+t,48);this.setState({cropArea:{h:e,w:a,x:n,y:48===e?i:l}});break}case"s":{let e=Math.max(l-i,48);this.setState({cropArea:{h:e,w:a,x:n,y:i}});break}case"e":{let a=Math.max(e-n,48);this.setState({cropArea:{h:t,w:a,x:n,y:i}});break}case"w":{let l=Math.max(a-e+n,48);this.setState({cropArea:{h:t,w:l,x:48===l?n:e,y:i}})}}}else if("move"===l){let e=c-this.cropChangeStartCoor.x,l=u-this.cropChangeStartCoor.y,s=Math.max(Math.min(n+e,(r.w??1)-a-x),x),o=Math.max(Math.min(i+l,(r.h??1)-t-x),x);this.cropChangeStartCoor={x:c,y:u},this.setState({cropArea:{h:t,w:a,x:s,y:o}})}else if("select"===l){let e=Math.max(Math.min(c,r.w??1),0),t=Math.max(Math.min(u,r.h??1),0),a=e-this.cropChangeStartCoor.x,n=t-this.cropChangeStartCoor.y;this.setState({cropArea:{h:Math.abs(n),w:Math.abs(a),x:Math.min(this.cropChangeStartCoor.x,e),y:Math.min(this.cropChangeStartCoor.y,t)}})}}),_(this,"handleOnMouseUp",()=>{let{cropChangeType:e}=this.state;("resize"===e||"move"===e||"select"===e)&&this.handleCrop(),this.cropResizeDirection=null})}componentDidMount(){let{body:e}=document,t=this._cropperOverlay.current;if(t&&e){if(t){let e=t.getBoundingClientRect();this._cropperOverlayCoor={x:e.left,y:e.top}}window.addEventListener("mouseup",this.handleOnMouseUp),e.addEventListener("mousemove",this.handleOnMouseMove),t.addEventListener("mousedown",this.handleOnMouseDown)}}componentWillUnmount(){let{body:e}=document,t=this._cropperOverlay.current;t&&e&&(window.removeEventListener("mouseup",this.handleOnMouseUp),e.removeEventListener("mousemove",this.handleOnMouseMove),t.removeEventListener("mousedown",this.handleOnMouseDown))}componentDidUpdate(e,t){let{shouldChangeState:a,initialCropArea:n}=this.props;a&&n!==e.initialCropArea&&!(0,y.ZP)(n,t.cropArea)&&this.updateCropAreaState()}handleCrop(){let{imageSize:e,onChange:t,viewParameter:a,logContextEvent:n}=this.props,{cropChangeType:i,cropArea:l}=this.state;if(0===l.w&&0===l.h)this.setState({cropChangeType:null}),t({origCrop:{h:(e.h??1)-2*x,w:(e.w??1)-2*x,x:x,y:x},cropSource:5});else{let r,s;this.setState({cropChangeType:null});let o=Math.max(Math.min(l.x,(e.w??1)-48-x),x),c=Math.max(Math.min(l.y,(e.h??1)-48-x),x);switch(r=l.h<48?48:c+l.h>(e.h??1)-x?(e.h??1)-c-x:l.h,s=l.w<48?48:o+l.w>(e.w??1)-x?(e.w??1)-o-x:l.w,i){case"move":n({event_type:7603,view_type:72,view_parameter:a});break;case"resize":n({event_type:7604,view_type:72,view_parameter:a})}t({origCrop:{h:r,w:s,x:o,y:c},cropSource:6})}}render(){let{children:e,previewCropArea:t,showPreviewArea:a,imageSize:n}=this.props,{cropArea:{h:r,w:o,x:c,y:u},cropChangeType:d}=this.state;return(0,s.jsxs)(l.xu,{ref:this._cropperOverlay,dangerouslySetInlineStyle:{__style:{cursor:"crosshair"}},"data-test-id":"visual-search-cropper",height:"100%",left:!0,position:"absolute",top:!0,width:"100%",children:[(0,s.jsx)(f.Z,{unsafeCSS:b}),(0,s.jsxs)("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("mask",{id:"Mask",children:[(0,s.jsx)("rect",{fill:"#fff",height:n.h??"100%",rx:"0",ry:"0",width:n.w??"100%",x:"0",y:"0"}),(0,s.jsx)("rect",{height:r,id:"hole",rx:0,ry:0,width:o,x:c,y:u},`${c}${u}`),(0,s.jsx)(i.Z,{classNames:"preview-crop-area",in:a&&!d,mountOnEnter:!0,timeout:300,unmountOnExit:!0,children:(0,s.jsx)("rect",{height:t.h,id:"preview",rx:4,ry:4,width:t.w,x:t.x,y:t.y},`${t.x}${t.y}`)})]})}),(0,s.jsx)("rect",{className:"v2shadowMask",height:"100%",mask:"url(#Mask)",style:{fill:"rgba(0,0,0,0.5)"},width:"100%",x:"0",y:"0"}),(0,s.jsx)("use",{className:"v2cropSection",fill:"rgba(0,0,0,0)",href:"#hole",stroke:"#fff",strokeWidth:"2",style:{cursor:"move"}}),"select"!==d&&(0,s.jsx)(g,{h:r,w:o,x:c,y:u})]}),e]})}}function w(e){let t=(0,r.Z)();return(0,s.jsx)(S,{logContextEvent:t,...e})}},667697:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var n=a(667294),i=a(883119),l=a(140017),r=a(785893);let s=16,o=32,c=(0,n.forwardRef)(({icon:e,onClick:t,onMouseDown:a,onMouseEnter:c,onMouseLeave:u,onMouseUp:d,selected:p,style:m,text:h,x:g,y,zIndex:f,backdropDiameter:_=o,dotDiameter:x=s},v)=>{let[b,S]=(0,n.useState)(!1),w=(0,l.ZP)(),k=b?_+4:_;return(0,r.jsx)(i.xu,{ref:v,dangerouslySetInlineStyle:{__style:{top:y-k/2,left:g-k/2,outline:"none"}},position:"absolute",zIndex:new i.Ry(f||0),children:(0,r.jsx)(i.iP,{accessibilityLabel:w._('Search this item', 'flashlight.dot.a11ylabel', 'accessibility label for flashlight dot'),dataTestId:"flashlight-dot",onMouseDown:a,onMouseEnter:({event:e})=>{S(!0),c?.({event:e})},onMouseLeave:({event:e})=>{S(!1),u?.({event:e})},onMouseUp:d,onTap:t,tabIndex:0,children:(0,r.jsxs)(i.xu,{alignItems:"center",borderStyle:"none",color:"default",dangerouslySetInlineStyle:{__style:{boxShadow:p?"0 0 0 3px #e60023":"none",borderRadius:x,top:(k-x)/2,left:(k-x)/2,...m}},"data-test-id":"flashlight-dot-style",display:"flex",height:x,justifyContent:"center",padding:0,position:"absolute",width:x,children:[!!h&&(0,r.jsx)(i.xv,{align:"center",color:"default",inline:!0,size:"100",weight:"bold",children:h}),e&&(0,r.jsx)(i.JO,{accessibilityLabel:w._('Tag anchor', 'accessibility label for an anchor for an object in a pin', 'accessibility label for an anchor for an object in a pin'),color:"error",icon:e,inline:!0,size:x/2})]})})})}),u=c},582158:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var n,i=a(667294);a(167912);var l=a(616550),r=a(922725),s=a(625124),o=a(207012),c=a(520846),u=a(258194),d=a(785893);let p=void 0!==n?n:n=a(394671);function m({customCropper:e,imageSignature:t,imageSize:a,initialCropArea:n,pinKey:m,requestParams:h,showAnimation:g,surfaceType:y,trafficSource:f,viewParameter:_,viewType:x}){let v=(0,o.Z)(p,m),b=(0,l.k6)(),[S,w]=(0,i.useState)(!1),[k,P]=(0,i.useState)({w:0,h:0,x:0,y:0}),[T,j]=(0,i.useState)(0),F=(0,i.useMemo)(()=>(v.visualObjects??[]).filter(e=>e.isStela)||[],[v.visualObjects]);(0,i.useEffect)(()=>{let e=F.findIndex(e=>{let{x:t,y:i,w:l,h:r}=e;return function(e,t,a){let n=Object.keys(e).reduce((a,n)=>a+Math.abs(e[n]-t[n]),0);return n<=4}(n,(0,c.Z)({cropArea:{x:t,y:i,w:l,h:r},scaledWidth:a.w??0,scaledHeight:a.h??0}),0)});j(e)},[a,n,F]);let C=({origCrop:e,cropSource:t,title:a})=>{let n=window.location.search,i=(0,u.Z)({cropArea:e,cropSource:t??6,requestParams:h,surfaceType:y,title:a,trafficSource:f});i!==n&&b.replace({pathname:window.location.pathname,search:i,state:{internalNavigation:!0}})},I=F&&!!F.length;return(0,d.jsx)(r.Z,{imageSize:a,initialCropArea:n,onChange:e??C,previewCropArea:k,showPreviewArea:!1,viewParameter:_,children:I&&(0,d.jsx)(s.Z,{currentSpotlightIdx:T,handleSpotlightClick:t=>{let n=F[t],{x:i,y:l,w:r,h:s}=n,o=(0,c.Z)({cropArea:{x:i,y:l,w:r,h:s},scaledWidth:a.w??0,scaledHeight:a.h??0}),u={origCrop:o,cropSource:n.isStela?4:1,trafficSource:f,title:n.title||""};e?e(u):C(u)},handleSpotlightHover:e=>{if(e!==T){w(!0);let{x:t,y:n,w:i,h:l}=F[e];P((0,c.Z)({cropArea:{x:t,y:n,w:i,h:l},scaledWidth:a.w??0,scaledHeight:a.h??0}))}},handleSpotlightUnhover:()=>{w(!1)},imageSignature:t,imageSize:a,pinKey:v,showAnimation:g,viewParameter:_,viewType:x})},JSON.stringify(n))}},625124:(e,t,a)=>{"use strict";a.d(t,{Z:()=>y});var n,i=a(667294);a(167912);var l=a(587703),r=a(667697),s=a(494125),o=a(785893);function c({showAnimation:e,auxData:t,index:a,isStela:n,onClick:i,onHover:c,onUnhover:u,spotlightCenter:d,viewParameter:p,viewType:m}){let h=(0,l.Z)(),g=n?1221:1260;(0,s.Z)(()=>{h({event_type:120,element:g,aux_data:t,view_parameter:p,view_type:m})});let y=parseFloat((.1*(a+1)).toFixed(2)),f={animation:e?`spotlightDotPop 0.6s ease-out ${y}s both`:"none"};return(0,o.jsx)(r.Z,{onClick:({event:e})=>{e&&(e.stopPropagation(),e.preventDefault()),h({aux_data:t,element:g,event_type:101,view_parameter:p,view_type:m}),i(a)},onMouseEnter:({event:e})=>{e&&(e.stopPropagation(),e.preventDefault()),c?.(a)},onMouseLeave:({event:e})=>{e&&(e.stopPropagation(),e.preventDefault()),u?.()},style:f,x:d.x,y:d.y})}var u=a(207012),d=a(406893),p=a(268127),m=a(520846);let h=`
@keyframes spotlightDotPop {
  0% {
    transform: scale(0);
  }

  100% {
    transform: scale(1);
  }
}`,g=void 0!==n?n:n=a(247821),y=({showAnimation:e,pinKey:t,imageSignature:a,imageSize:n,currentSpotlightIdx:l,handleSpotlightClick:r,handleSpotlightHover:s,handleSpotlightUnhover:y,viewParameter:f,viewType:_,visualObjects:x})=>{let v=(0,u.Z)(g,t),b=(0,p.Z)(v),S=v?(v.visualObjects??[]).filter(e=>e.isStela):x??[];return(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(d.Z,{unsafeCSS:h}),S.map((t,i)=>{if(i===l)return null;let{x:u,y:d,w:p,h}=t,g=(0,m.Z)({cropArea:{x:u,y:d,w:p,h},scaledWidth:n.w??0,scaledHeight:n.h??0}),x={x:g.x+g.w/2,y:g.y+g.h/2},S={...b({override:{entrypoint:"flashlight"}}),pin_id:v?.entityId??"",image_signature:a,visual_objects:JSON.stringify([{x:t.x,y:t.y,w:t.w,h:t.h}])},w=`${x.x}${x.y}`;return(0,o.jsx)(c,{auxData:S,index:i,isStela:!!t?.isStela,onClick:r,onHover:s,onUnhover:y,showAnimation:e,spotlightCenter:x,viewParameter:f,viewType:_},w)})]})}},901855:(e,t,a)=>{"use strict";a.d(t,{Hv:()=>o,aX:()=>d,nK:()=>p});var n=a(667294),i=a(616550),l=a(342513),r=a(785893);let{Provider:s,useHook:o}=(0,l.Z)("HistoryStackContext",{previous:[],current:null,forward:[]}),c=e=>e&&e.pathname?e.pathname+(e.search||""):"";function u(e,t){let a={action:t.type,location:t.location,match:t.match};if(t.location===e.current?.location)return e;switch(t.type){case"POP":if(e.forward.length>0&&c(e.forward[0].location)===c(a.location))return{...e,forward:e.forward.slice(1),current:{...e.forward[0],action:t.type},previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous};return{...e,forward:e.current?[{action:e.current.action,location:e.current.location,match:e.current.match},...e.forward]:e.forward,current:{...e.previous.slice(-1)[0],action:t.type},previous:e.previous.slice(0,-1)};case"PUSH":return{...e,forward:e.forward.length>0?[]:e.forward,current:a,previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous};case"REPLACE":return{...e,current:a};default:return e}}function d(){let{current:e,previous:t}=o(),a=(0,n.useMemo)(()=>e?t.concat(e):t,[e,t]);return a}function p({children:e}){let t=(0,i.k6)(),a=(0,i.TH)(),l=(0,i.$B)(),o={forward:[],current:{action:t.action,location:a,match:l},previous:[]},[c,d]=(0,n.useReducer)(u,o);return(0,n.useEffect)(()=>{let{action:e}=t;d({type:e,location:a,match:l})},[a]),(0,r.jsx)(s,{value:c,children:e})}},223785:(e,t,a)=>{"use strict";a.d(t,{Dv:()=>l,Ml:()=>r,Oc:()=>n,mv:()=>i});let n=16,i=4,l={SAVED:"rgba(0, 0, 0, 0.33)",VISUAL:"rgba(0, 0, 0, 0.1)",LEGO_WASH:"rgba(0, 0, 0, 0.4)"},r=120},513911:(e,t,a)=>{"use strict";a.d(t,{I6:()=>i,Nv:()=>n,RZ:()=>l,ZG:()=>o,b9:()=>s,s0:()=>r});let n=44,i=24,l=446,r=.05,s=36,o=20},160567:(e,t,a)=>{"use strict";a.d(t,{Pw:()=>n,SB:()=>i,ZP:()=>r,x9:()=>l});let n=80,i=56,l=e=>"phone"===e?i:n;function r(e,t){return t?0:l(e)}},92785:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r,k:()=>n.k});var n=a(135839),i=a(5859),l=a(785893);let r=({dateFormatType:e,useUTC:t=!0,value:a})=>(0,l.jsx)(i.LC,{children:i=>(0,n.Z)(i.locale,a,e,t)})},135839:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l,k:()=>n});let n={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour",TWO_DIGIT:"two_digit",TWO_DIGIT_YEAR:"two_digit_year"},i=function(e){switch(e){case n.YEAR:return{year:"numeric"};case n.LONG:return{year:"numeric",month:"long",day:"numeric"};case n.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case n.TWO_DIGIT:return{year:"numeric",month:"2-digit",day:"2-digit"};case n.TWO_DIGIT_YEAR:return{year:"2-digit",month:"2-digit",day:"2-digit"};case n.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case n.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case n.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case n.MONTH_DAY:return{month:"long",day:"numeric"};case n.SHORT_MONTH:return{month:"short"};case n.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case n.DAY:return{day:"numeric"};case n.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case n.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case n.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case n.TIME:return{hour:"numeric",minute:"2-digit"};case n.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case n.HOUR:return{hour:"numeric"};default:throw Error('invalid dateFormatType "'+e+'"')}};function l(e,t,a,n=!0){let l=i(a);n&&(l.timeZone="UTC");let r=new Intl.DateTimeFormat(e,l);return r.format(t)}},541841:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n=a(667294),i=a(973935);function l(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class r extends n.Component{constructor(...e){super(...e),l(this,"observer",null),l(this,"handleVisibilityChanged",(e,t)=>{this.props.onVisibilityChange(e,t)})}componentDidMount(){let e=i.findDOMNode(this);e instanceof HTMLElement&&(this.node=e),this.node&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.node))}componentWillUnmount(){this.observer&&(this.observer.unobserve(this.node),delete this.observer)}render(){return n.Children.only(this.props.children)}}let s=r},207993:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var n=a(785893);let i=(0,n.jsx)("svg",{fill:"none",height:"5",viewBox:"0 0 37 5",width:"37",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("rect",{fill:"#E9E9E9",height:"5",rx:"2.5",width:"37"})}),l=i},262032:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n=a(667294),i=a(883119);let l=(0,n.createContext)();var r=a(785893);function s(e){(0,n.useContext)(l);let{alt:t,color:a,children:s,crossOrigin:o,decoding:c,elementTiming:u,fetchPriority:d,fit:p,loading:m,naturalHeight:h,naturalWidth:g,onError:y,onLoad:f,role:_,sizes:x,src:v,srcSet:b}=e;return(0,r.jsx)(i.Ee,{alt:t,color:a,crossOrigin:o,decoding:c,elementTiming:u,fetchPriority:d,fit:p,loading:m,naturalHeight:h,naturalWidth:g,onError:y,onLoad:f,role:_,sizes:x,src:v,srcSet:b,children:s})}},388769:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(72461),i=a(5859),l=a(785893);let r=({currency:e,maximumFractionDigits:t,minimumFractionDigits:a,shortform:r,shortformMaximumFractionDigits:s,formatStyle:o,uplimit:c,value:u})=>{let d=(0,n.Z)();return(0,l.jsx)(i.LC,{children:n=>d(n.locale||"en-US",u,{currency:e,maximum_fraction_digits:t,minimum_fraction_digits:a,shortform:r,shortform_maximum_fraction_digits:s,style:o,uplimit:c})})}},367295:(e,t,a)=>{"use strict";a.d(t,{MF:()=>l,PB:()=>r,Ul:()=>s,XD:()=>n});let n={AUD:"A$",BRL:"R$",CAD:"$",CZK:"K",DKK:"kr",EUR:"",GBP:"\xa3",HUF:"Ft",MXN:"$",NOK:"kr",NZD:"NZ$",RON:"lei",SEK:"kr",USD:"$",JPY:"\xa5",CHF:""},i=function(e){let t=1.1.toLocaleString(e).substring(1,2);return t},l=function(e,t){return","===i(t)&&e&&e.length>0&&!isNaN(e)?e.replace(".",","):e},r=function(e,t){return","===i(t)&&e?e.replace(",","."):e};function s(e,t,a,n=!1){let{minimumFractionDigits:i,maximumFractionDigits:l}=new Intl.NumberFormat(t,{style:"currency",currency:a}).resolvedOptions(),r=void 0===i?2:i,s=void 0===l?2:l;return e.toLocaleString(t,{maximumFractionDigits:n&&s>0?3:s,minimumFractionDigits:n&&r>0?3:r})}},306604:(e,t,a)=>{"use strict";function n(e,t){let a=e*Math.pow(10,t),n=Math.round((a-parseInt(a,10))*10)/10;return -.5===n&&(n=-.6),a=Math.round(parseInt(a,10)+n)/Math.pow(10,t)}function i(e){let t=parseFloat(e),a=n(t,2);return a?a.toFixed(2):e}function l(e,t=!1,a=""){let n=100,i=1e4;if(a){let{maximumFractionDigits:e}=new Intl.NumberFormat(void 0,{style:"currency",currency:a}).resolvedOptions();"number"==typeof e&&(i=1e6/(n=Math.pow(10,e)))}return t&&(n=1e3,i=1e3),Math.round(e*n)*i}function r(e,t=!1){if(Number.isNaN(e))return 0;let a=1e6;return t&&(a=1e6),e/a}function s(e){return e?i(r(e).toString()):""}a.d(t,{$X:()=>r,Hy:()=>s,c3:()=>p,cq:()=>i,q$:()=>n,qq:()=>d,y:()=>l});let o={fractionalCentFormatData:{},formatData:{}};function c(e){return e&&(e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")),e}function u(e,t=!1){let a=t?"fractionalCentFormatData":"formatData",n=o[a][e];if(!n){let i=2,l=2,r=-9999.99;t&&(i=3,l=3,r=-9999.999);let s=new Intl.NumberFormat(e,{minimumFractionDigits:i,maximumFractionDigits:l}),u=s.formatToParts(r),d=u.find(e=>"minusSign"===e.type),p=u.find(e=>"group"===e.type),m=u.find(e=>"decimal"===e.type),h=p?p.value:"",g=c(h),y=m?m.value:"",f="[^0-9"+g+c(y)+c(d?d.value:"")+"]";n={format:s,decimal:m?m.value:null,group:h,groupRegex:RegExp(g||"","g"),cleaner:RegExp(f,"g")},o[a][e]=n}return n}function d(e,t,a=!1){if("number"==typeof e)return e;if("string"!=typeof e)return NaN;let n=u(t,a),i=e.replace(n.cleaner,"");return n.decimal&&(i=i.replace(n.decimal,"!_!")),n.group&&(i=i.replace(n.groupRegex,"")),parseFloat(i=i.replace("!_!","."))}function p(e,t,a=!1){let n=u(t,a);return n.format.format(e)}},681508:(e,t,a)=>{"use strict";a.d(t,{Q4:()=>d,Rq:()=>l,Vf:()=>r,ab:()=>c,jd:()=>s,nw:()=>u,oy:()=>o});var n=a(658583),i=a(622541);let l=e=>"ios"===e&&(window.devicePixelRatio||1)*window.screen.height==2436,r=28,s=e=>window.innerHeight>=748&&l(e),o=function(){return"undefined"!=typeof window&&!!window.navigator&&(/iPad/.test(navigator.platform)||navigator.maxTouchPoints>1&&"MacIntel"===navigator.platform)},c=()=>{n.t8(i.oj,String(!0),(0,n.kZ)(i.oj))},u=()=>!!n.U2(i.oj),d=()=>{if(o()){let e=u();e||(c(),"undefined"!=typeof window&&window.location.reload(!0))}}},588664:(e,t,a)=>{"use strict";function n(e,t,a=28){let n;if(!(e||{}).resurrection_info&&!(t||{}).resurrectionInfo)return!1;n=t?((t||{}).resurrectionInfo||{}).resurrectionDate:((e||{}).resurrection_info||{}).resurrection_dt;let i=new Date,l=n?new Date(n):i;return l.setDate(l.getDate()+a),new Date().getTime()<l.getTime()}a.d(t,{Z:()=>n})},179425:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(883119),i=a(213377),l=a(681508),r=a(403862),s=a(5859),o=a(785893);let c=({children:e,dataLayoutShiftBoundaryId:t,hasFixedHeader:a=!1,hasGutter:c=!0,height:u,showKeychainError:d=!1,useViewport:p=!1})=>{let m=(0,s.B)(),h=(0,l.jd)(m.userAgent.platform)?l.Vf:0;return(0,o.jsx)(n.xu,{"data-layout-shift-boundary-id":t||"PageContainer",height:p?`calc(100vh - ${h}px)`:u,paddingX:c?i.D6:void 0,paddingY:a||d?void 0:3,children:(0,o.jsx)(r.C,{value:!!c,children:e})})}},403862:(e,t,a)=>{"use strict";a.d(t,{C:()=>l,V:()=>r});var n=a(667294);let i=(0,n.createContext)(!1),l=i.Provider,r=()=>(0,n.useContext)(i)},705895:(e,t,a)=>{"use strict";function n(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,{Z:()=>r});let i=new class{constructor(){n(this,"onResumeListeners",[]),n(this,"onPauseListeners",[]),n(this,"inExp",!1),n(this,"windowInFocus",!0)}setExperiment(e=!1){this.inExp=e}onSessionResume(e){return this.onResumeListeners.push(e),this}onSessionPause(e){return this.onPauseListeners.push(e),this}removeResumeListener(e){this.onResumeListeners.filter(t=>t!==e)}removePauseListener(e){this.onPauseListeners=this.onPauseListeners.filter(t=>t!==e)}getAppState(){return this.windowInFocus?0:void 0}},l=e=>{if(e.isHidden){let{reason:t}=e;i.windowInFocus=!1,i.onPauseListeners.forEach(e=>e(t))}else i.windowInFocus=!0,i.onResumeListeners.forEach(e=>e())};setTimeout(()=>{window.addEventListener("beforeunload",()=>l({isHidden:!0,reason:"beforeunload"})),window.addEventListener("focus",()=>l({isHidden:!1})),window.addEventListener("blur",()=>l({isHidden:!0,reason:"blur"})),window.addEventListener("pageshow",()=>l({isHidden:!1})),window.addEventListener("pagehide",()=>l({isHidden:!0,reason:"pagehide"})),void 0!==document.hidden?document.addEventListener("visibilitychange",()=>l(document.hidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1}),!1):void 0!==document.webkitHidden&&document.addEventListener("webkitvisibilitychange",()=>l(document.webkitHidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1}),!1)},0);let r=i},189469:(e,t,a)=>{"use strict";function n(e,t,a){return!!(e&&e.trim().length>0&&t&&!a)}a.d(t,{r:()=>n})},391884:(e,t,a)=>{"use strict";function n({embedSrc:e,embedType:t,imagesUrls:a,preferredResolution:n,excludeOriginals:i}){if(!e&&!t&&!a)return"";if("gif"===t)return e||"";if(!a)return"";if(n){let e="474x"===n&&a["474x"]||"236x"===n&&a["236x"]||a["736x"];if(e)return e}let l=Object.keys(a).reduce((e,t)=>{try{let n=t.split("x")[0];if(Number.isNaN(Number(n)))return{...e,[t]:a[t]};return{...e,[n]:a[t]}}catch(t){return e}},{}),r=Object.keys(l);i&&"orig"===r[r.length-1]&&r.pop();let s=r.pop();return l[s]||""}a.d(t,{Z:()=>n})},567344:(e,t,a)=>{"use strict";a.d(t,{eg:()=>r,kt:()=>g,rw:()=>m,fs:()=>u,eK:()=>d,Ly:()=>p,BY:()=>h,bN:()=>y,RC:()=>o,EU:()=>c});let n=/\s\s+/g,i=e=>e.replace(n," ");var l=a(564855);let r=Object.freeze(new Set(["sensitive_raw_pin_text","is_sensitive_rich_pin_description","is_sensitive_rich_pin_title","is_sensitive_board_title"])),s=e=>"string"==typeof e?e:"",o=({storyPinDataMetadataPinTitle:e,pinTitle:t})=>e||t,c=(e,t)=>e?e.trim().length>t?(0,l.ZP)(e.trim(),t).trim():e.trim():"",u=({pinTitle:e,gridTitle:t,richSummaryDisplayName:a,richMetadataTitle:n,storyPinDataId:i,storyPinDataMetadataPinTitle:l})=>{let r=l||e,s=c(t,200);return s||a||n||(i&&r?r:null)},d=e=>{let{richSummaryDisplayName:t}=e,a=e.pinJoinVisualAnnotation||[],n=e.pinJoinAnnotationsWithLinks||{},r=e.richMetadataDescription||"",s=e.closeupUnifiedDescription||"",o=a.map(e=>(n||{})[e]||{name:e,url:""}),c="",u=(t||"").toLocaleLowerCase().trim(),d=r.toLocaleLowerCase().trim(),p=s.toLocaleLowerCase().trim();return s&&s.length>3&&p!==u?c=s:r&&r.length>3&&d!==u&&(c=r),c&&(c=i((0,l.ZP)(c,496)).trim()),{description:c,annotationsWithLinks:o}},p=({pinTitle:e,gridTitle:t,richSummaryDisplayName:a,richMetadataTitle:n,storyPinDataId:i,storyPinDataMetadataPinTitle:l,pinJoinVisualAnnotation:s,seoNoindexReason:o,seoTitle:c})=>r.has(o??"")?c:u({pinTitle:e,gridTitle:t,richSummaryDisplayName:a,richMetadataTitle:n,storyPinDataId:i,storyPinDataMetadataPinTitle:l})||s?.[0]||e,m=(e,t,a,n,i)=>{let l=s(e).trim(),r=(e,t)=>t&&t.length>0?`${e} ${t.join(", ")}`:e;return n&&n.trim().length?r(n.trim(),a):i&&i.trim().length?i.trim():l?r(l,a):a?a.join(", "):""},h=e=>`/pin/${e}/`,g=(e,t)=>{let a=`Pinterest video from ${t}: `.concat(e);return""===t?e:a},y=({pinId:e,seoUrl:t})=>t&&"string"==typeof t?t:h(e)},777609:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n,i=a(667294);a(167912);var l=a(207012);let r=void 0!==n?n:n=a(467061);function s({pinKey:e,maxWidth:t}){let a=(0,l.Z)(r,e),n=a?.imageSpec_564x||a?.imageSpec_736x||a?.imageSpec_orig||a?.imageSpec_474x||a?.imageSpec_236x,s=n?.width||1,o=n?.height||1,c=n?.url||"",u=function(e,t,a=564){return e>a&&(t*=a/e,e=a),{width:e,height:t}}(s,o,t),d=(0,i.useCallback)(()=>({width:u.width,height:u.height,url:c}),[u.height,u.width,c]);return{getNormalizedPinImage:d}}},781705:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s}),a(167912);var n,i=a(207012),l=a(140017);let r=void 0!==n?n:n=a(374963),s=e=>{let t;let a=(0,l.ZP)(),n=(0,i.Z)(r,e),s=n.trackedLink||n.link||n.imageSpec_orig&&n.imageSpec_orig.url,{richMetadata:o,richSummary:c}=n,u=a._('Saved from ', 'Closeup pin annotation', 'Closeup pin annotation');return o&&o.products&&o.products[0]&&o&&o.products[0].name&&o.products[0].offerSummary&&(u=a._('Product sold by ', 'pin annotation', 'pin annotation'),t=(o.products?.[0]||void 0)?.offerSummary),!t&&c&&c&&c.products&&c.products[0]&&c&&c.products[0].name&&c.products[0].offerSummary&&(u=a._('Product sold by ', 'pin annotation', 'pin annotation')),{pinLink:s,pinCreditPrefix:u,pinTitle:n.closeupUnifiedTitle,pinDescription:n.closeupUnifiedDescription,pinCategory:n.category}}},661428:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r}),a(167912);var n,i=a(207012);let l=void 0!==n?n:n=a(77003),r=e=>{let t=(0,i.Z)(l,e),a=[["60x60",t?.imageSpec_60x60],["136x136",t?.imageSpec_136x136],["170x",t?.imageSpec_170x],["236x",t?.imageSpec_236x],["474x",t?.imageSpec_474x],["564x",t?.imageSpec_564x],["736x",t?.imageSpec_736x],["600x315",t?.imageSpec_600x315],["orig",t?.imageSpec_orig]];return a.reduce((e,[t,a])=>a?{...e,[t]:a.url}:e,{})}},414131:(e,t,a)=>{"use strict";function n({hasPin:e,hasPinRichMetadata:t,hasPinRichMetadataProducts:a,hasPinRichMetadataArticle:n,hasPinRichMetadataRecipe:i,hasPinStoryPinData:l}){if(e){if(t)return a?144:n?141:i?145:139;if(l)return 157}return 140}a.d(t,{Z:()=>n})},448318:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var n=a(667294),i=a(262032),l=a(785893);let r=e=>document.querySelector(`img[src="${e}"]`)||null,s=(e,t,a)=>{let i=(0,n.useRef)(null),l=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(e!==i.current||a&&a!==l.current){i.current=e;let a=r(e);a?.complete&&t()}l.current=a},[e,t,a])};function o({alt:e,children:t,color:a,elementTiming:n,isActive:r=!1,naturalHeight:o,naturalWidth:c,onLoad:u,src:d,fit:p="none"}){return s(d,u,r),(0,l.jsx)(i.Z,{alt:e,color:a,elementTiming:n,fit:p,naturalHeight:o,naturalWidth:c,onLoad:u,src:d,children:t})}},603642:(e,t,a)=>{"use strict";a.d(t,{Z:()=>ee});var n=a(667294),i=a(705895),l=a(685679),r=a(608029),s=a(297329),o=a(107860),c=a(862536),u=a(906623),d=a(521525),p=a(819281),m=a(793250),h=a(309300);let g=({constraintMap:e,initialNavTiming:t,annotations:a})=>({...a,...(0,h.jh)("constraint_",e),...(0,h.jh)("mark_",(0,o.gQ)()),...(0,h.jh)("browser_",{...t?(0,h.D3)(t):{},...(0,h.rX)()})});var y=a(840387);let f=(e,t)=>[...e.map(e=>(0,y.Z)(e,t)).filter(Boolean)];var _=a(302234),x=a(663678),v=a(953565);let b=e=>e<=2500?"Good":e>2500&&e<=4e3?"Needs Improvement":"Poor",S=({eventPrefix:e,endTime:t,tags:a,resourceArr:n,resourceType:i="allResources"})=>{let l=n.length;if(l>0&&"object"==typeof n[0]&&!Array.isArray(n[0])){let r=[...n].sort((e,t)=>e.fetchStart-t.fetchStart),s=[...n].sort((e,t)=>e.responseEnd-t.responseEnd),o=1,c=t/5,u=0;for(;o<=5;){let t=0;for(;u<=l-1&&r[u].fetchStart<=c*o;)u+=1,t+=1;(0,v.S0)(`${e}.tags.${i}.fetchStartInterval${o}of5`,t,{sampleRate:.2,tags:a}),(0,v.S0)(`${e}.${i}.fetchStartInterval${o}of5`,t,{sampleRate:.2}),o+=1}let d={zeroPercentInFlight:r[0].fetchStart,twentyFivePercentInFlight:r[Math.floor(l/4)].fetchStart,fiftyPercentInFlight:r[2*Math.floor(l/4)].fetchStart,seventyFivePercentInFlight:r[3*Math.floor(l/4)].fetchStart,hundredPercentInFlight:r[l-1].fetchStart,twentyFivePercentComplete:s[Math.floor(l/4)].responseEnd,fiftyPercentComplete:s[2*Math.floor(l/4)].responseEnd,seventyFivePercentComplete:s[3*Math.floor(l/4)].responseEnd,hundredPercentComplete:s[l-1].responseEnd};for(let t in d)d[t]&&((0,v.LY)(`${e}.tags.${i}.${t}`,d[t],{sampleRate:.2,tags:a}),(0,v.LY)(`${e}.${i}.${t}`,d[t],{sampleRate:.2}))}},w=({annotateExperiments:e,endTime:t,entries:a,metricId:n,pwtStaticContext:i})=>{let l=`${(0,x.Z)(i)}.${n.surface}`,r=[l];e&&e.forEach(e=>{let t=i.getExperimentGroup(e)||"null";r.push(`${l}.${e}.${t}`)});let s=b((0,_.Bn)()),o={lcpTimingBucket:s||"unknown",isAuthenticated:i.isAuthenticated,navigationType:n.navigationType},c=Array.from(a.filter(e=>"number"==typeof e.encodedBodySize&&e.encodedBodySize>=1e4&&e.responseEnd<=t)),u=[],d=[],p=[],m=[],h=[];c.forEach(e=>{"img"===e.initiatorType?u.push(e):"css"===e.initiatorType?d.push(e):"script"===e.initiatorType?p.push(e):"xmlhttprequest"===e.initiatorType?m.push(e):"link"===e.initiatorType&&e.name.includes("i.pinimg.com")&&h.push(e)}),r.forEach(e=>{S({eventPrefix:e,endTime:t,tags:o,resourceArr:c}),S({eventPrefix:e,endTime:t,tags:o,resourceArr:u,resourceType:"image"}),S({eventPrefix:e,endTime:t,tags:o,resourceArr:d,resourceType:"css"}),S({eventPrefix:e,endTime:t,tags:o,resourceArr:p,resourceType:"scripts"}),S({eventPrefix:e,endTime:t,tags:o,resourceArr:m,resourceType:"xhr"}),S({eventPrefix:e,endTime:t,tags:o,resourceArr:h,resourceType:"preloadedImage"})})};var k=a(279600);let P=({startTime:e,responseEnd:t},a)=>e>a.endTime||!!t&&t<a.startTime,T=({annotateExperiments:e,annotations:t,binaryAnnotations:a,constraintMap:n,endTime:i,imageTimings:l,metricId:r,pwtStaticContext:s,startTime:o,traceId:c,spans:u})=>{let h;let y=(0,k.Cg)();"initial_app_load"===r.navigationType&&(h=(0,p.Z)());let _=l.map(({name:e})=>e),x=y.map(e=>(0,m.p)(e,_)).filter(({timing:e})=>!P(e,{startTime:o,endTime:i}));return("board"===r.surface||"pin_closeup"===r.surface)&&w({annotateExperiments:e,endTime:i,entries:y,metricId:r,pwtStaticContext:s}),{type:"COMPLETE",traceId:c,startTime:o,endTime:i,spans:f(x,c).concat(u),annotationMap:g({constraintMap:n,initialNavTiming:h,annotations:t}),binaryAnnotationMap:(0,d.rA)({annotateExperiments:e,binaryAnnotations:a,entries:y,metricId:r,performanceResources:x,pwtEndTime:i,pwtStaticContext:s})}};var j=a(404373);let F=!1,C=(e,t)=>{if(e&&t){if(!F)return F=!0,t;(0,s.H)("duplicated_initial_app_load_surface_pwt")}return(0,j.Z)()};var I=a(363404),E=a(367180);let A=e=>{let t=performance.getEntriesByType("resource").filter(e=>e.name.includes("i.pinimg")).reduce((e,t)=>{let a=t.name.replace(".jpg","").split("/");return{[a[a.length-1]]:{downloadSize:t.name.split("/")[3].split("x")[0]},...e}},{}),a=Array.from(document.getElementsByTagName("img")).map(e=>{let a=e.src.replace(".jpg","").split("/"),n=a[a.length-1];if(t[n]){let a=E.rZ(e)?.width||1,i=t[n].downloadSize;return{fileName:n,renderedSize:a,downloadedSize:i,ratio:i/a}}return{fileName:n,renderedSize:1,downloadedSize:1,ratio:1}}),n=Array.from(document.querySelectorAll('div[role="img"]')).map(e=>{let a=e.style.backgroundImage.split('"')[1].replace(".jpg","").split("/"),n=a[a.length-1];if(t[n]&&e instanceof HTMLDivElement){let a=E.rZ(e)?.width||1,i=t[n].downloadSize;return{fileName:n,renderedSize:a,downloadedSize:i,ratio:i/a}}return{fileName:n,renderedSize:1,downloadedSize:1,ratio:1}});[...a,...n].forEach(t=>{let{ratio:a,fileName:n,downloadedSize:i}=t;t.ratio>1.05&&(0,s.A9)(`checkImageRatio.${e}`,{count:Math.round(10*a)/10,tags:{fileName:`${i}_${n}`}})})};var L=a(970126),D=a(5859);let M=(e,t)=>{let a=(0,n.useRef)(t);return{getState:()=>a.current,dispatch:t=>{a.current=e(a.current,t)}}};var R=a(184960),K=a(785893);let O=["initial_app_load","client_route_push"],Z=(0,r.XV)("PwtSurface"),N="NavigationComplete",z="VisuallyComplete",H=(e,t)=>{e.isSampled&&(0,I.Z)({metricId:e.metricConfig.metricId,pwtStaticContext:e.metricConfig.pwtStaticContext,result:{type:"ABORT",reason:t}})},U=(e,t,a)=>{let{metricConfig:{metricId:n,pwtStaticContext:i,annotateExperiments:r},annotations:c,binaryAnnotations:u,constraintMap:d,startTime:p,imageTimings:m,isSampled:h,spans:g}=e;(0,o.L8)(`PWT_Complete_${(0,l.KJ)(n)}`);let y=C("initial_app_load"===n.navigationType,i.serverData?.trace_id),f=T({annotateExperiments:r,annotations:c,binaryAnnotations:u,constraintMap:d,endTime:t,imageTimings:m,metricId:n,pwtStaticContext:i,startTime:p,traceId:y,spans:g});h&&!a&&(0,I.Z)({metricId:n,pwtStaticContext:i,result:f});try{A(String(f.binaryAnnotationMap["metricId.surface"].value))}catch(e){(0,s.H)("image_ratio_check_error",{error:e})}return{...e,result:f,status:"DONE"}},$=(e,t)=>{if(e.metricConfig.constraints.every(t=>e.constraintMap[t])){let a=Math.max(...e.metricConfig.constraints.map(t=>e.constraintMap[t]));return U(e,a,t)}return Z(`Remaining constraints: ${e.metricConfig.constraints.filter(t=>!e.constraintMap[t]).join(", ")}`),e},B=(e,t)=>{let{constraint:a,time:n,disablePWTLogging:i}=t,r=(0,l.KJ)(e.metricConfig.metricId);return L.Z?e.metricConfig.constraints.find(e=>e===a)?e.constraintMap[a]?(Z(`constraint "${a}" is already complete.`),(0,s.H)("duplicated_constraint_complete",{constraint:a,action:r}),e):(Z(`marking constraint "${a}" as complete`),(0,o.ZP)(`constraint_${a}_is_complete`),$({...e,constraintMap:{...e.constraintMap,[a]:n||L.Z.now()}},i)):(Z(`marked constraint "${a}" is not a required constraint.`),e):((0,s.H)("missing_window_performance",{action:r}),e)},G=(e,t)=>{if(!L.Z){let t=(0,l.KJ)(e.metricConfig.metricId);(0,s.H)("missing_window_performance",{action:t})}Z(`removing constraint "${t}"`);let a=e.metricConfig.constraints.filter(e=>e!==t),{[t]:n,...i}=e.constraintMap;return $({...e,constraintMap:i,metricConfig:{...e.metricConfig,constraints:a}})},V=(e,t)=>{if(!L.Z){let t=(0,l.KJ)(e.metricConfig.metricId);(0,s.H)("missing_window_performance",{action:t})}Z(`updating pwt segment to "${t}"`);let a={...e.metricConfig.metricId,segment:t};return{...e,metricConfig:{...e.metricConfig,metricId:a}}},W=(e,t)=>{let{metricConfig:a,startTime:n,isSampled:i,disablePWTLogging:r}=t;if(r||"TIMING"!==e.status||n===e.startTime||H(e,"routeUpdatedOnSameSurface"),!a)return{status:"DISABLED",metricConfig:null};let o=(0,l.KJ)(a.metricId);return"TIMING"===e.status&&e.startTime===n&&e.constraintMap[N]?((0,s.H)("duplicated_init_route_action",{action:o}),e):(r||("Other"===a.pwtStaticContext.browserName&&!1===a.metricId.isAuthenticated&&"initial_app_load"===a.metricId.navigationType?((0,s.A9)(`TIMING.${o}`,{tags:{userAgent:window?.navigator?.userAgent}}),(0,s.A9)(`TIMING.sampled.${o}`,{tags:{userAgent:window?.navigator?.userAgent},sampleRate:.5})):((0,s.A9)(`TIMING.${o}`),(0,s.A9)(`TIMING.sampled.${o}`,{sampleRate:.5}))),B({status:"TIMING",metricConfig:a,startTime:n,constraintMap:{},annotations:{},binaryAnnotations:{},imageTimings:[],isSampled:i,spans:[]},{constraint:N,disablePWTLogging:r}))},Y=(e,t)=>{if(Z("dispatch action",t),"INIT_ROUTE"===t.type)return W(e,t.payload);if("TIMING"!==e.status)return Z(`ignoring action due to invalid state ${e.status}`,t),e;switch(t.type){case"ABORT":H(e,t.reason);let a={type:"ABORT",reason:t.reason};return{...e,status:"DONE",result:a};case"ANNOTATE":let{name:n}=t.payload;if(!L.Z)return e;let i=L.Z.now();return Z(`adding annotation {${n}: ${i}}`),{...e,annotations:{...e.annotations,[n]:i}};case"BINARY_ANNOTATE":let{name:r,value:o,annotationType:c}=t.payload;return Z(`adding binary annotation {${r}: ${o}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,[r]:{value:o,type:c}}};case"MARK_CONSTRAINT_COMPLETE":return B(e,t.payload);case"REMOVE_CONSTRAINT":return G(e,t.payload);case"SET_SEGMENT":return V(e,t.payload);case"SET_VISUALLY_COMPLETE_RESULT":{let{payload:{imageTimings:a}}=t;if(0===a.length)return H(e,"visuallyComplete_noImages"),{...e,status:"DONE",result:{type:"ABORT",reason:"visuallyComplete_noImages"}};let n=Math.max(...a.map(e=>e.responseEnd||0));return B({...e,imageTimings:a},{constraint:z,time:n})}case"ADD_SUBSPAN":let{startTime:u}=e,{payload:{name:d,startTime:p,endTime:m,annotations:h,binaryAnnotations:g,parentId:y}}=t;return{...e,spans:[...e.spans,{name:d,id:(0,j.Z)(),startTime:p||u,endTime:m,annotationMap:{...h},binaryAnnotationMap:{...g},parentId:y}]};case"START_SUBSPAN":return{...e,spans:[...e.spans,{name:t.payload.name,id:(0,j.Z)(),startTime:L.Z?L.Z.now():0,endTime:1/0,annotationMap:{...t.payload.annotations},binaryAnnotationMap:{...t.payload.binaryAnnotations},parentId:t.payload.parentId}]};case"STOP_SUBSPAN":let f=e.spans.findIndex(e=>e.name===t.payload.name);return f>-1?(e.spans[f].endTime=L.Z?L.Z.now():0,t.payload.annotations&&(e.spans[f].annotationMap={...e.spans[f].annotationMap,...t.payload.annotations}),t.payload.binaryAnnotations&&(e.spans[f].binaryAnnotationMap={...e.spans[f].binaryAnnotationMap,...t.payload.binaryAnnotations})):(0,s.H)("invalid_subspan_stop_name",{name:t.payload.name}),e;default:let _=(0,l.KJ)(e.metricConfig.metricId);return(0,s.H)("invalid_pwt_surface_action",{action:_}),e}},q=e=>{if(!e)return"initial_app_load";switch(e.action){case"PUSH":return"client_route_push";case"REPLACE":return"client_route_replace";default:return null}},X=new Set,Q=({surface:e,constraints:t,segment:a,measureGridVisuallyComplete:l,annotateExperiments:r,customEnabledNavigationTypes:s,navigationInfo:{clientNavigation:o,navigationType:u},sampleRate:d})=>{let p=(0,n.useRef)("NOT_SET"),m=(0,c.N5)(),{getState:h,dispatch:g}=M(Y,{status:"DISABLED",metricConfig:null}),y=(0,D.B)();if(p.current!==o&&(p.current=o,m)){let{isAuthenticated:n}=m,i=e&&u&&(s||O).includes(u)?{metricId:{type:"surface",surface:e,navigationType:u,isAuthenticated:n,segment:a},annotateExperiments:r,constraints:[N,...t||[],...l?[z]:[]],pwtStaticContext:m}:null;(0,v.nP)("webapp.pwt_surface.init_route",{tags:{surface:e,navigationType:u,isAuthenticated:n}});let c=!X.has(o);g({type:"INIT_ROUTE",payload:{metricConfig:i,startTime:o?o.time:0,isSampled:!d||Math.random()<d,disablePWTLogging:!c}}),c&&X.add(o)}let f=h();if((0,n.useEffect)(()=>()=>{X.delete(o)},[o]),(0,n.useEffect)(()=>{let e=e=>{g({type:"ABORT",reason:e})};i.Z.onSessionPause(e);let t=window.innerHeight,a=window.innerWidth,n=()=>{let e=Math.abs(window.innerHeight-t),i=Math.abs(window.innerWidth-a),l=window.innerHeight!==t,r=window.innerWidth!==a,s={handler:(0,R.H)(),deviceType:m?.deviceType??"unknown",isAuthenticated:m?.isAuthenticated??"unknown",platform:y.userAgent.platform??"unknown"};(0,v.nP)("webapp.PwtLogger.handleResize",{sampleRate:1,tags:{...s,heightChanged:l,widthChanged:r}}),l&&(0,v.S0)("webapp.PwtLogger.resizeHeightDelta",e,{sampleRate:1,tags:s}),r&&(0,v.S0)("webapp.PwtLogger.resizeWidthDelta",i,{sampleRate:1,tags:s}),window.removeEventListener("resize",n);let o=m?.deviceType==="phone"&&(!r&&l&&e<=150||!l&&!r)||m?.deviceType==="desktop"&&!l&&!r;if(o){(0,v.nP)("webapp.PwtLogger.skipResizeAbort",{sampleRate:1,tags:{...s,heightChanged:l,widthChanged:r}});return}g({type:"ABORT",reason:"windowResized"})};return window.addEventListener("resize",n),()=>{let t=h();Z("handling unmount",t),"TIMING"===t.status&&H(t,"unmount"),i.Z.removePauseListener(e),window.removeEventListener("resize",n)}},[]),"TIMING"!==f.status||!f.constraintMap[N])return{state:f,context:null};let{startTime:_,metricConfig:x}=f;return{state:f,context:{abort:e=>g({type:"ABORT",reason:e}),addAnnotation:e=>g({type:"ANNOTATE",payload:{name:e}}),addBinaryAnnotation:(e,t,a)=>g({type:"BINARY_ANNOTATE",payload:{name:e,value:t,annotationType:a}}),addSubspan:(e,t,a,n={},i={},l=null)=>g({type:"ADD_SUBSPAN",payload:{name:e,startTime:t,endTime:a,annotations:n,binaryAnnotations:i,parentId:l}}),getId:()=>_,getMetricId:()=>x.metricId,markConstraintComplete:e=>g({type:"MARK_CONSTRAINT_COMPLETE",payload:{constraint:e,time:L.Z?L.Z.now():0}}),removeConstraint:e=>g({type:"REMOVE_CONSTRAINT",payload:e}),setSegment:e=>g({type:"SET_SEGMENT",payload:e}),setVisuallyCompleteResult:x.constraints.includes(z)?e=>g({type:"SET_VISUALLY_COMPLETE_RESULT",payload:e}):null,startSubspan:(e,t={},a={},n=null)=>g({type:"START_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:a,parentId:n}}),stopSubspan:(e,t={},a={},n=null)=>g({type:"STOP_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:a,parentId:n}})}}},J=()=>{let e=(0,u.E)(),t=!!e;(0,n.useEffect)(()=>{if(t){let t=e?.getMetricId(),a=t?(0,l.KJ)(t):null;(0,s.H)("nested_pwt_surface",{action:a})}},[t])};function ee({children:e,...t}){let a=(0,c.fM)(),n=q(a),i=t.measureGridVisuallyComplete?["web_masonry_v2_auth","web_masonry_v2_unauth"]:[],l=[...t.annotateExperiments??[],...i],r={...t,annotateExperiments:l,navigationInfo:{navigationType:n,clientNavigation:a}},{context:s}=Q(r);return J(),(0,K.jsx)(u.S,{value:s,children:e})}},371626:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});let n=e=>{switch(e){case"BR":case"MX":case"AR":case"CL":case"CO":return"LatAm";case"US":return"US";case"CA":return"CA";case"GB":return"GB";case"FR":return"FR";case"DE":return"DE";case"AU":return"AU";case"IN":return"IN";default:return"OTHER"}}},686769:(e,t,a)=>{"use strict";a.d(t,{A:()=>r,Z:()=>s});var n=a(667294),i=a(883119),l=a(785893);let r=({fill:e})=>{let t="half"===e?(0,l.jsxs)(n.Fragment,{children:[(0,l.jsx)(i.xu,{position:"absolute",children:(0,l.jsx)(i.JO,{accessibilityLabel:"",color:"default",icon:"star-half",size:12})}),(0,l.jsx)(i.JO,{accessibilityLabel:"",color:"subtle",icon:"star",size:12})]}):(0,l.jsx)(i.JO,{accessibilityLabel:"",color:"full"===e?"default":"subtle",icon:"star",size:12});return(0,l.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{marginRight:"3px"}},"data-test-id":`rating-star-${e}`,display:"inlineBlock",children:t})};function s({max_rating:e,rating:t}){var a;let n=[],s=parseFloat(e)||5,o=5*(a=(a=parseFloat(t)||0)<=s?a:s)/s;if(Number.isNaN(o))return null;let c=Math.floor(o),u=o-c;return[...Array(c).keys()].forEach(e=>n.push((0,l.jsx)(r,{fill:"full"},e))),u>=.75?n.push((0,l.jsx)(r,{fill:"full"},n.length)):u>=.25&&n.push((0,l.jsx)(r,{fill:"half"},n.length)),[...Array(5-n.length).keys()].forEach(()=>n.push((0,l.jsx)(r,{fill:"empty"},n.length))),(0,l.jsx)(i.xu,{display:"inlineBlock",position:"relative",width:15*s,children:n})}},909886:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var n=a(667294),i=a(883119),l=a(803947),r=a(230556),s=a(249123),o=a(140017),c=a(785893);function u({category:e,ingredients:t,textSize:a="300"}){return(0,c.jsxs)(i.xu,{children:[e&&(0,c.jsx)(i.xu,{children:(0,c.jsx)(i.xv,{size:a,weight:"bold",children:e})}),(0,c.jsx)("ul",{children:t.map((e,t)=>(0,c.jsx)("li",{"data-test-id":"recipe-ingredient",itemProp:"recipeIngredient",children:(0,c.jsx)(i.xu,{marginTop:1,children:(0,c.jsxs)(i.xv,{size:a,children:[" ",e.amt||null," ",e.name]})})},t))})]})}var d=a(177021);function p({recipeProps:e,marginOverrides:t}){let a=(0,o.ZP)(),{image:p,name:m,categorizedIngredients:h}=e.recipe,g=a._('Ingredients', 'Ingredients title and count in closeup recipe description', 'Ingredients title and count in closeup recipe description');if(h&&h.length){let e=[];h.forEach(t=>e.push(t.ingredients))}return(0,c.jsx)(i.xu,{marginTop:8,children:(0,c.jsxs)(d.Z,{itemScope:!0,itemType:"https://schema.org/Recipe",children:[(0,c.jsx)("meta",{content:m,itemProp:"name"}),(0,c.jsx)("meta",{content:p,itemProp:"image"}),(0,c.jsx)(l.Z,{heading:g,children:(0,c.jsx)(s.Z,{children:(0,c.jsx)(i.xu,{marginTop:4,children:h.map(({category:e,ingredients:a},l)=>{let s=`ingredient-${l}`;return(0,c.jsx)(n.Fragment,{children:(0,c.jsx)(i.xu,{marginBottom:t?.ingredientMarginBottom||4,children:(0,c.jsx)(u,{category:e,ingredients:a,textSize:r.n})})},s)})})})})]})})}},919085:(e,t,a)=>{"use strict";a.d(t,{Z:()=>f});var n=a(667294),i=a(702664),l=a(616550),r=a(288240),s=a(227258),o=a(839967),c=a(5859),u=a(638747),d=a(342513);let{Provider:p,useMaybeHook:m}=(0,d.Z)("SuspensefulResource"),h={},g=({httpStatus:e})=>!e||e>=500,y={};function f(e){let{enabledRouteRefresh:t,__unstableEnableSuspenseSupport:a,headers:d,name:p,noCache:f,options:_,schema:x}=e??{name:"DisabledResource",options:null},v=!e,b=(0,r.Z)(_),S=(0,n.useRef)(null),w=(0,l.k6)(),k=w&&"POP"!==w.action,P=e=>(e[p]||y)[b]||y,T=(0,i.useSelector)(({resources:e})=>P(e).nextBookmark),j=(0,i.useSelector)(({resources:e})=>P(e).data),F=(0,i.useSelector)(({resources:e})=>P(e).auxData),C=(0,i.useSelector)(({resources:e})=>P(e).error),I=(0,i.useSelector)(({resources:e})=>!!P(e).fetching),E=!!C||void 0!==j,A=E&&!I&&T===o.q,L=!!(E&&t&&k&&!v),[D,M]=(0,n.useState)(L),{fetchResource:R,dispatchGet:K,dispatchRefresh:O}=function(e,t,a,l){let{headers:o,name:d,noCache:p,options:y,schema:f}=e,_=function(){let e=m();return e?t=>e.addToBeSent(t):()=>{}}(),x=(0,u.vL)(),v=(0,i.useDispatch)(),b=(0,r.Z)(y),S=(0,n.useRef)(),w=e=>(e[d]||h)[b]||h,k=(0,i.useSelector)(({resources:e})=>{let t=w(e);return!!t.error||void 0!==t.data}),P=(0,i.useSelector)(({resources:e})=>w(e).error),T=(0,i.useSelector)(({resources:e})=>!!w(e).fetching),j=(0,n.useCallback)(e=>{v((0,s.U)(d,{options:y,schema:f,bookmark:e,headers:o},x,_))},[v,d,b,f,o]),F=(0,n.useCallback)(()=>{v((0,s.b)(d,{options:y,schema:f,headers:o},x))},[v,d,b,f,o]),{isBot:C}=(0,c.B)(),I=(0,n.useCallback)(()=>{if(!a&&S.current!==b){let e=void 0===S.current;S.current=b,!k&&!T||l&&e&&P&&g(P)?j():(!C&&p||t)&&F()}},[l,j,F,a,P,C,T,k,t,p,b]),E=(0,n.useMemo)(()=>({name:a?null:d,optionsKey:a?null:b}),[a,d,b]),A=(0,n.useMemo)(()=>({fetchResource:I,dispatchGet:j,dispatchRefresh:F,ref:E}),[I,j,F,E]);return A}({headers:d,name:p,noCache:f,options:_,schema:x},L,v,!0);(0,n.useEffect)(()=>{a||R()}),a&&R();let Z=(0,n.useCallback)(()=>{v||(O(),M(!0))},[v,s.b,p,b,d,M]),N=(0,n.useCallback)(()=>{!T||A||I||v||K(T)},[v,K,T,A,I]);if(S.current){if(E&&!I)S.current=null;else if(a)throw S.current}let z=(0,n.useRef)({auxData:void 0,data:void 0,error:void 0,fetchMore:N,isAtEnd:!1,isFetching:!1,isLoaded:!1,isRefreshing:!1,nextBookmark:void 0,refresh:Z}),H={auxData:F,data:j,error:C,fetchMore:N,isAtEnd:A,isFetching:I,isLoaded:E,isRefreshing:D,nextBookmark:T,refresh:Z};return(0,i.shallowEqual)(H,z.current)||(D&&(z.current.data||!L)&&!(0,i.shallowEqual)(H.data,z.current.data)&&(H.isRefreshing=!1,M(!1)),z.current=H),z.current}},7829:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var n=a(919085),i=a(149722),l=a(616550),r=a(5859),s=a(554786),o=a(624797);function c({getOptions:e,checkExperiments:t,disableFetch:a,...c}){let u=function(){let e=(0,i.Z)();return{country:e.country||void 0,id:e.id||void 0,isAuth:e.isAuth,isEmployee:!!e.isEmployee,isPartner:!!e.isPartner,username:e.username||void 0}}(),{args:d,fetchDisabled:p}=function({checkExperiments:e,disableFetch:t,viewer:a}){let n=(0,l.TH)(),i=(0,l.$B)(),c=(0,r.B)(),u=function({advertiser:e,deviceType:t,location:{pathname:a,search:n},inviteCode:i,match:{params:l,path:r},viewer:s}){let c={inviteCode:i,matchPath:r,params:l,parsedSearch:(0,o.mB)(n),pathname:a,search:n},u={country:s.country||void 0,id:s.id||void 0,isAuth:s.isAuth,isEmployee:!!s.isEmployee,isPartner:!!s.isPartner,username:s.username||void 0};return{advertiser:e,deviceType:t,routeData:c,user:u}}({advertiser:c.advertiser,deviceType:(0,s.Mq)(c),location:n,match:i,viewer:a,inviteCode:c.inviteCode??""}),d=!!t&&t(u),p=!!d||!e||e(c.experimentsClient);return{args:u,fetchDisabled:d||!p}}({checkExperiments:t,disableFetch:a,viewer:u}),m=e?e(d):void 0;return(0,n.Z)(p?null:{options:m,...c})}},177021:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(785893);let i=e=>{let t=e.itemType?{itemScope:!0,itemType:e.itemType}:{};return(0,n.jsx)("div",{"data-test-id":"rich-pin-information",...t,children:e.children||null})}},14583:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var n=a(667294),i=a(785893);function l({children:e,fallback:t}){return(0,i.jsx)(n.Suspense,{fallback:t||null,children:e})}},233440:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var n=a(301923);let i=(0,n.Z)({type:"session"}),l=i},156725:(e,t,a)=>{"use strict";function n(e){return e.toLowerCase().charAt(0).toUpperCase()+e.toLowerCase().slice(1)}a.d(t,{Z:()=>n})},564855:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>i,mP:()=>n});let n="";function i(e,t=80,a=n,i=!1){let l;if(!e)return"";if(e.length<=t)return e;if(" "!==e[t-1]&&" "===e[t]||i)l=e.substring(0,t);else{let a=e.lastIndexOf(" ",t);l=e.substring(0,a)}return(l=l.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""))+a}},627408:(e,t,a)=>{"use strict";a.d(t,{Z:()=>_});var n=a(667294),i=a(541841),l=a(901855),r=a(5859),s=a(520893),o=a(503325),c=a(342513);let{Provider:u,useMaybeHook:d}=(0,c.Z)("timeSpentContext");var p=a(822987),m=a(19447),h=a(785893);function g(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class y extends n.Component{constructor(e){super(e),g(this,"componentWillUnmount",()=>{this.unregisterComponent()}),g(this,"getContext",()=>{let{clientTrackingParams:e,component:t,element:a,objectId:n,timeSpentContext:i,view:l,viewParameter:r}=this.props;return{view:l||i?.view,viewParameter:r||i?.viewParameter,component:t||i?.component,element:a,objectId:n||i?.objectId,clientTrackingParams:e||i?.clientTrackingParams,getParentUuid:()=>this.getUuid(),getGrandparentUuid:()=>this.getParentId()}}),g(this,"getLoggerContext",()=>{let e={...this.getContext()};return delete e.getParentUuid,e}),g(this,"getParentId",()=>{let{timeSpentContext:e,shouldUseGrandparentId:t=!1}=this.props;if(t&&e&&e.getGrandparentUuid){let t=e.getGrandparentUuid();if(t)return t}return e&&e.getParentUuid?e.getParentUuid():void 0}),g(this,"getUuid",()=>this.state.timedPair?this.state.timedPair.uuid:void 0),g(this,"getTimedPair",()=>this.state.timedPair),g(this,"setTimedPair",(e,t)=>{this.setState({timedPair:e},()=>{t&&t()})}),g(this,"isRegistered",!1),g(this,"registerComponent",()=>{this.props.timeSpentManager.registerComponent(this),this.isRegistered=!0}),g(this,"unregisterComponent",()=>{this.isRegistered&&(this.props.timeSpentManager.unregisterComponent(this),this.isRegistered=!1)}),g(this,"handleVisibilityChange",e=>{let{intersectionRatio:t}=e[0],{bottom:a,left:n,right:i,top:l}=e[0].intersectionRect;t>0?this.registerComponent():0===t&&(0===a&&0===n&&0===i&&0===l?this.unregisterComponent():this.registerComponent())}),this.state={timedPair:new o.Z(this.getLoggerContext())}}componentDidUpdate(e){!this.isRegistered||e.view===this.props.view&&e.viewParameter===this.props.viewParameter&&e.component===this.props.component&&e.element===this.props.element&&e.objectId===this.props.objectId&&(0,s.Z)(e.auxData,this.props.auxData)&&(0,s.Z)(e.viewData,this.props.viewData)||(this.unregisterComponent(),setTimeout(this.registerComponent))}render(){let{children:e}=this.props;return(0,h.jsx)(u,{value:this.getContext(),children:(0,h.jsx)(i.Z,{onVisibilityChange:this.handleVisibilityChange,options:{threshold:0},children:n.Children.only(e)})})}}function f(e){let t=(0,l.Hv)(),a=d(),i=(0,p.w)(),s=(0,m.H0)(),{requestIdentifier:o=""}=(0,r.B)(),c={app_instance_id:o.slice(0,8),...e.auxData??{}};return(0,n.useEffect)(()=>{i?.setHistoryStackContext(t)},[t,i]),(0,n.useEffect)(()=>{i?.setPins(s??{})},[s,i]),i?(0,h.jsx)(y,{...e,auxData:c,timeSpentContext:a,timeSpentManager:i,children:e.children}):e.children}f.displayName="TimeSpent";let _=f},689390:(e,t,a)=>{"use strict";function n(e){if((e||"").includes("--")){let t=e.split("--"),a=t.pop();return{text:t.join("--"),pinId:a}}return{text:"",pinId:e}}a.d(t,{Z:()=>n})},760101:(e,t,a)=>{"use strict";a.d(t,{G:()=>s,Z:()=>o});var n=a(667294),i=a(616550),l=a(785893);let r=(0,n.createContext)(!0);function s({children:e}){let t=(0,i.TH)(),[a,s]=(0,n.useState)(!0),o=(0,n.useRef)(t);return(0,n.useEffect)(()=>{o.current!==t&&(o.current=t,s(!1))},[t]),(0,l.jsx)(r.Provider,{value:a,children:e})}function o(){return(0,n.useContext)(r)}},429218:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(667294);let i=()=>{let e=(0,n.useRef)(!1);return(0,n.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}},250790:(e,t,a)=>{"use strict";function n(e){let t;switch(e){case 1:t=1;break;case 2:t=2;break;case 3:t=3;break;case 4:t=4;break;case 5:t=5;break;case 6:t=6}return t}a.d(t,{Z:()=>n})},129675:(e,t,a)=>{"use strict";function n({cropArea:{x:e,y:t,w:a,h:n},scaledWidth:i,scaledHeight:l}){return{x:e/i,y:t/l,w:a/i,h:n/l}}a.d(t,{Z:()=>n})},520846:(e,t,a)=>{"use strict";function n({cropArea:e,scaledWidth:t,scaledHeight:a}){let n=e.h||0,i=e.w||0,l=e.x||0,r=e.y||0;return{h:Math.floor(n*a),w:Math.floor(i*t),x:Math.floor(l*t),y:Math.floor(r*a)}}a.d(t,{Z:()=>n})},258194:(e,t,a)=>{"use strict";function n({cropArea:e,cropSource:t,requestParams:a,searchQuery:n,surfaceType:i,title:l,trafficSource:r}){let s=[];if(e){let{x:t,y:a,w:n,h:i}=e;t>=0&&a>=0&&n>=0&&i>=0&&s.push(`x=${t}`,`y=${a}`,`w=${n}`,`h=${i}`)}t&&s.push(`cropSource=${t}`),i&&s.push(`surfaceType=${i}`),l&&s.push(`full_feed_title=${encodeURIComponent(l)}`),n&&s.push(`q=${n}`),r&&"unknown"!==r&&s.push(`rs=${r}`),a&&s.push(`requestParams=${encodeURIComponent(a)}`);let o=s.length?`?${s.join("&")}`:"";return o}a.d(t,{Z:()=>n})},755453:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(258194);function i({cropArea:e,cropSource:t,isProductPage:a,pinId:i,requestParams:l,searchQuery:r,surfaceType:s,title:o,trafficSource:c}){let u=(0,n.Z)({cropArea:e,cropSource:t,requestParams:l,searchQuery:r,surfaceType:s,title:o,trafficSource:c}),d="";return a&&(d="products/"),`/pin/${i}/visual-search/${d}${u}`}},154792:(e,t,a)=>{"use strict";a.d(t,{X:()=>i,Z:()=>l});var n=a(667294);let i=120;function l(e,t=0,a=i){let[l,r]=(0,n.useState)(e?"active":"inactive");return(0,n.useEffect)(()=>{if(e){if(t){let e=setTimeout(()=>r("active"),t);return()=>{clearTimeout(e)}}r("active")}else{let e=setTimeout(()=>r("inactive"),a);return()=>{clearTimeout(e)}}},[e]),l}},259239:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var n=a(883119),i=a(785893);function l({children:e,additionalStyles:t={}}){return(0,i.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",...t}},"data-test-id":"contentLayer",left:!0,position:"absolute",right:!0,top:!0,children:e})}},97538:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(883119),i=a(154792),l=a(785893);function r({children:e,fadeInDuration:t=0,fadeOutDuration:a=i.X,visibility:r}){return"none"!==r&&e?(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{hidden:{opacity:0,transition:a?`opacity ${a}ms ease`:void 0},visible:{opacity:1,transition:t?`opacity ${t}ms ease`:void 0}}[r]},children:e}):null}},301551:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(422210),i=a(588664);let l=["US","GB","DE","CA","FR"];function r(e){return!(0,n.Z)(e.createdAt)&&!(0,i.Z)(null,e)&&l.includes(e.country)}},254292:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var n=a(883119),i=a(785893);function l({text:e}){return(0,i.jsx)(n.xu,{display:"visuallyHidden",children:(0,i.jsx)(n.X6,{accessibilityLevel:1,children:e})})}},810052:(e,t,a)=>{"use strict";a.d(t,{D:()=>i,a:()=>l});var n=a(342513);let{Provider:i,useMaybeHook:l}=(0,n.Z)("unauthPageWrapperContext")},386008:(e,t,a)=>{"use strict";a.d(t,{Tt:()=>d,cm:()=>u,kW:()=>o,kY:()=>p,mN:()=>c});var n=a(702664),i=a(342513),l=a(149722),r=a(785893);let{Provider:s,useHook:o}=(0,i.Z)("Users");function c(){let e=o();return t=>e[t]}function u(){let e=o();return(t,a=!1)=>{let n=Object.keys(e).find(a=>e[a].username===t);if(n||!a)return e[n??""]}}function d(){let{id:e}=(0,l.Z)(),t=o();return t[e??""]}function p({children:e}){let t=(0,n.useSelector)(({users:e})=>e,n.shallowEqual);return(0,r.jsx)(s,{value:t,children:e})}},774812:(e,t,a)=>{"use strict";a.d(t,{Z:()=>g});var n=a(667294),i=a(883119),l=a(775089),r=a(213377),s=a(493538),o=a(823987),c=a(554786),u=a(494125),d=a(771881),p=a(184972),m=a(187156),h=a(785893);function g({customLayoutType:e,emptyState:t,feedItems:a,feedKey:g,maxColumns:y,pagination:{hasNext:f,isLoadingNext:_,loadNext:x,refetch:v},pullToRefresh:b,renderFeedItem:S,serverRender:w}){let k=(0,c.HG)(),[P,T]=(0,n.useState)(!1),j="userSearch"===e?window.innerWidth-16:200,F=_&&0===a.length&&!P,C="desktopFlashlight"===e?0:r.qG;return(0,u.Z)(()=>(window.addEventListener("online",x),()=>window.removeEventListener("online",x))),(0,h.jsxs)(i.xu,{"data-test-id":"MobileFeed",children:[(0,h.jsx)(p.Z,{enabled:!!b,onPull:()=>{v(),T(!0)},refreshing:P}),(0,h.jsxs)(i.xu,{"data-test-id":"grid",marginEnd:C,marginStart:C,opacity:P?.5:1,children:[(0,h.jsx)(s.Z,{isAtEndOfFeed:!f,itemCount:a.length,children:a.length?(0,h.jsx)(i.xu,{"data-test-id":"feed",marginTop:(0,d.kk)({isDesktop:k}),children:(0,h.jsx)(o.Z.Consumer,{children:t=>(0,h.jsx)(n.Fragment,{children:(0,h.jsx)(d.c$,{children:(0,h.jsx)(l.default,{cacheKey:g,columnWidth:k?r.yF:j,gutterWidth:k?4*r.jC:void 0,id:w?g:void 0,items:a,loadItems:x,maxColumns:y,minCols:"userSearch"===e?1:2,renderItem:({data:e,itemIdx:t})=>S(e,t),scrollContainerRef:t,serverRender:w})})})})}):_?(0,h.jsx)(d.gG,{}):t??null}),F&&(0,h.jsx)(i.xu,{column:12,paddingY:2,children:(0,h.jsx)(m.Z,{partialViewportWidth:"desktopFlashlight"===e})})]})]})}},801690:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var n=a(667294),i=a(525364),l=a(105737),r=a(766311),s=a(785893);class o extends n.Component{componentDidMount(){let{setCurrentPageData:e,viewData:t,viewParameter:a,viewType:n}=this.props;e({viewData:t,viewParameter:a,viewType:n})}componentDidUpdate(e){let{setCurrentPageData:t,viewData:a,viewParameter:n,viewType:i}=this.props;n===e.viewParameter&&i===e.viewType&&(0,l.ZP)(a,e.viewData)||t({viewData:a,viewParameter:n,viewType:i})}componentWillUnmount(){this.props.clearCurrentPageData()}render(){let{auxData:e,children:t,component:a,objectIdStr:n,viewData:i,viewParameter:l,viewType:o,clientTrackingParams:c}=this.props;return(0,s.jsx)(r.Z,{auxData:e,clientTrackingParams:c,component:a,objectIdStr:n,viewData:i,viewParameter:l,viewType:o,children:t})}}function c(e){let{setViewContextData:t,clearViewContextData:a}=(0,i.sV)();return(0,s.jsx)(o,{...e,clearCurrentPageData:a,setCurrentPageData:t})}},797056:(e,t,a)=>{"use strict";a.d(t,{Z:()=>S});var n=a(667294),i=a(883119),l=a(140017),r=a(340523),s=a(448318),o=a(5859),c=a(71328),u=a(554786),d=a(760101),p=a(34817),m=a(616550),h=a(48481),g=a(233440),y=a(217058),f=a(623409),_=a(785893);function x({setShowClickthroughOverlay:e,isEligibleForPdp:t,isEligibleForDesktopSocialInviteOverlay:a,inviterFirstName:s,imageSignature:o,pinId:c}){let d=(0,l.ZP)(),p=(0,f.Z)(),x=(0,h.Z)(),{checkExperiment:v}=(0,r.F)(),b=(0,n.useRef)(),S=(0,u.ZP)(),w="desktop"===S,k=s&&a,P=w&&v("dweb_unauth_main_pin_visual_search_v2").group,T="enabled_2_no_upsell"===P||"enabled_rollout"===P||"enabled_1_nav_upsell_post_land"===P,j=k&&(d._('Sign up to join {{ name }} on Pinterest', 'pin.closeup.wash.desktop.shareNotification', 'Clickthrough overlay for desktop users that a sender ({{ name }}) shared a Pin to them, name: username')).replace("{{ name }}",s),F=T?d._('See something you like? Tap to search inside this image', 'web.unauth.plp.clickable_wash.header', 'Copy shown on hover to sign up for an account'):d._('Click to make the most out of this idea with a free account', 'web.unauth.plp.clickable_wash.header', 'Copy shown on hover to sign up for an account'),C=d._('Tap to make the most out of this idea with a free account', 'mweb.unauth.plp.clickable_wash.header', 'Pin clickable wash header text'),I=(0,m.k6)();return(0,_.jsx)(i.iP,{onMouseEnter:()=>{k&&(0,y.My)("dweb.main_pin.social.wash.view"),(0,y.My)("dweb.pin.wash.view")},onMouseLeave:()=>{k?p({action:"dismiss",item:"main-pin-social-wash"}):p({action:"dismiss",item:"main-pin-wash"})},onTap:({event:e})=>{if(w){if(e.preventDefault(),p({action:"click",item:"pin-image"}),a&&s&&p({action:"click",item:"main-pin-social-wash"}),T){let e=`/pin/${c}/visual-search/?`;o&&(e+=`imageSignature=${o}`),I.push(e),g.Z.setItem("VISUAL_SEARCH_SOURCE","MAIN_PIN_WASH")}else p({action:"click",item:"main-pin-image-signup-modal"}),x({reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"click_closeup",desktopOptions:{modalType:"signup",modalOptions:{source:"defaultSource",container:"pinWash"}}});t&&p({action:"click",item:"pdp-pin-image"})}},children:(0,_.jsxs)(i.xu,{zIndex:new i.Ry(2),children:[(0,_.jsx)(i.xu,{ref:b,alignItems:"center",bottom:!0,"data-test-id":"main-pin-hover-overlay",direction:"column",display:"flex",height:"100%",justifyContent:a?"center":void 0,left:!0,position:"absolute",right:!0,top:!0,width:"100%",children:(0,_.jsx)(i.xu,{alignItems:"center",direction:"column",display:"flex",maxWidth:T?260:240,paddingY:10,children:(0,_.jsx)(i.xu,{marginTop:8,children:(0,_.jsx)(i.X6,{align:"center",color:"light",size:k?"500":"400",children:w?j||F:C})})})}),!w&&(0,_.jsx)(i.xu,{marginEnd:4,marginTop:4,position:"absolute",right:!0,top:!0,children:(0,_.jsx)(i.hU,{accessibilityLabel:d._('Close pin clickable wash', 'mweb.unauth.plp.clickable_wash.close_button', 'Close button'),icon:"cancel",iconColor:"white",onClick:({event:t})=>{t.stopPropagation(),e&&(e(!1),p({action:"dismiss",item:"main-pin-hover-overlay"}))},size:"md"})})]})})}var v=a(174281),b=a(810052);let S=e=>{let t=(0,l.ZP)(),{alt:a,clickthroughOverlayOptions:m,color:h,isFlashlightPage:g,naturalHeight:y,naturalWidth:f,placeholder:S,pinImageResizePercent:w=100,pwtElementTimingId:k,pwtSurfaceContext:P,setShowClickthroughOverlay:T,showSpinner:j,src:F,stickyFooter:C,isEligibleForPdp:I,pinId:E,imageSignature:A}=e,L=(0,d.Z)(),{checkExperiment:D}=(0,r.F)(),M=!L,{isAuthenticated:R}=(0,o.B)(),K=(0,u.ZP)(),O="desktop"===K,Z=R&&!O&&D("auth_mweb_inline_action_bar").anyEnabled,N=(0,n.useRef)(),[z,H]=(0,n.useState)(!M||!!F&&!!S&&S===F),U=(0,n.useRef)(""),$=()=>{P&&P.markConstraintComplete("PinPageMainImageRendered")};(0,n.useEffect)(()=>{let e=new Image;e.onload=()=>H(!0),e.src=F},[]);let B=(0,n.useRef)(b.a()?.setHasScrolledPastMainContent);(0,n.useEffect)(()=>{let e=(0,c.Z)(()=>{if(N.current){let t=window.scrollY>N.current.offsetTop+N.current.offsetHeight;B.current?.(t),t&&window.removeEventListener("scroll",e)}},10);window.addEventListener("scroll",e)},[]);let[G,V]=(0,n.useState)();(0,n.useEffect)(()=>{N.current&&V(N.current.scrollHeight)},[]);let W=!g&&"tablet"===K,Y=M?(0,_.jsx)(s.Z,{alt:a,color:h,elementTiming:k,naturalHeight:y,naturalWidth:f,onLoad:$,src:S}):null;return(0,_.jsxs)(i.xu,{ref:N,dangerouslySetInlineStyle:{__style:{transition:100===w?"":"width 500ms ease-in-out"}},"data-test-id":"pin-closeup-image",marginTop:"tablet"===K&&Z?12:0,maxHeight:"100%",maxWidth:"tablet"===K?v.g6:void 0,minHeight:100===w?G:void 0,overflow:C?void 0:"hidden",position:"relative",rounding:g||"phone"===K?0:6,width:g||"phone"===K?`${w}%`:O?508:v.Hg,children:[!R&&m&&"enabled_3_no_wash_upsell_post_land"!==D("dweb_unauth_main_pin_visual_search_v2").group&&(0,_.jsx)(p.Z,{isImagePinForUnauthOnTablet:!1,children:(0,_.jsx)(x,{imageSignature:A||"",inviterFirstName:U.current,isEligibleForPdp:I,pinId:E||"",setShowClickthroughOverlay:T})}),Y&&(W?(0,_.jsx)(i.xu,{overflow:"hidden",rounding:6,children:Y}):Y),(0,_.jsx)(i.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:z?1:0,transition:z&&!O?"opacity .5s ease-in-out":void 0,backgroundColor:h}},left:!0,overflow:W?"hidden":void 0,position:M?"absolute":"relative",right:!0,rounding:W?6:5,top:!0,children:M?(0,_.jsx)(i.Ee,{alt:a,naturalHeight:y,naturalWidth:f,src:F}):(0,_.jsx)(s.Z,{alt:a,color:h,elementTiming:k,naturalHeight:y,naturalWidth:f,onLoad:$,src:F})}),j&&(0,_.jsx)(i.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:z?0:1,transition:z?"opacity .5s ease-in-out":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:!z&&(0,_.jsx)(i.kC,{alignItems:"center",justifyContent:"start",children:(0,_.jsx)(i.$j,{accessibilityLabel:t._('Loading image', 'Loading higher resolution image', 'Loading higher resolution image'),show:!0})})}),C]})}},237040:(e,t,a)=>{"use strict";a.d(t,{J1:()=>c,Uw:()=>o,Yg:()=>d,ib:()=>m,jT:()=>y,nF:()=>g,xX:()=>h});var n=a(340523),i=a(5859),l=a(554786),r=a(953565);let s=()=>{let{isAuthenticated:e,isBot:t}=(0,i.B)();return t?"bot":e?"auth":"unauth"},o=({isDesktop:e,viewerType:t})=>"bot"===t?"seo_graphql_pin_page":"auth"===t?e?"auth_dweb_graphql_pin_page":"auth_mweb_graphql_pin_page":e?"unauth_dweb_graphql_pin_page":"unauth_mweb_graphql_pin_page",c=()=>{let e=(0,l.HG)(),t=s();return o({isDesktop:e,viewerType:t})},u=({checkExperiment:e,isAuthMweb:t})=>{let a=t&&e("auth_mweb_graphql_pin_page",{dangerouslySkipActivation:!0}).group;return a?e=>(0,r.nP)("webapp.graphql.debug_auth_mweb_graphql_pin_page",{sampleRate:1,tags:{event:e,group:a}}):null},d=()=>{let{isAuthenticated:e}=(0,i.B)(),t=(0,l.HG)(),{checkExperiment:a}=(0,n.F)();return u({checkExperiment:a,isAuthMweb:e&&!t})},p=0,m=({checkExperiment:e,isAuthMweb:t})=>{let a=u({checkExperiment:e,isAuthMweb:t});a&&(p+=1)<10&&a(`repin_${p}`)};function h(e,t,a){let n=o({isDesktop:t,viewerType:a});switch(n){case"auth_dweb_graphql_pin_page":return e(n),{isGraphQLEnabledForRelatedPins:!1,isGraphQLEnabledInGeneral:!1,experimentName:n};case"seo_graphql_pin_page":case"unauth_dweb_graphql_pin_page":case"unauth_mweb_graphql_pin_page":return e(n),{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,experimentName:n};case"auth_mweb_graphql_pin_page":{let{anyEnabled:t,group:a}=e(n);if(t)return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,experimentName:n};if(a.includes("only_related_pins"))return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!0,experimentName:n};return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,experimentName:n}}default:throw Error("Unexpected case")}}function g(){let{checkExperiment:e}=(0,n.F)(),t=(0,l.HG)(),a=s();return h(e,t,a)}function y(){let e=g();return"auth_mweb_graphql_pin_page"===e.experimentName?e.isGraphQLEnabledInGeneral&&e.isGraphQLEnabledForRelatedPins?"enabled":e.isGraphQLEnabledForRelatedPins?"only_related_pins":"disabled":"auth_dweb_graphql_pin_page"===e.experimentName?"":"enabled"}},822592:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(883119),i=a(67664),l=a(785893);function r({coverImages:e,height:t,isHovered:a,onClick:r,onMouseEnter:s,onMouseLeave:o,textType:c,text:u,url:d,width:p}){let m=e&&(e["236x"]||e["280x280"]);return(0,l.jsx)(i.Z,{backgroundColor:"gray",coverImage:m,height:t,isHovered:a,onClick:r,onMouseEnter:s,onMouseLeave:o,url:d,width:p,children:(0,l.jsx)(n.xu,{alignItems:"center",display:"flex",height:t,justifyContent:"center",padding:3,position:"absolute",top:!0,width:p||"100%",children:"text"===c?(0,l.jsx)(n.xu,{alignItems:"center",display:"flex",height:48,padding:3,children:(0,l.jsx)(n.X6,{align:"center",color:"light",size:"500",children:u})}):(0,l.jsx)(n.xu,{alignItems:"center",color:"secondary",display:"flex",height:48,padding:3,rounding:"pill",children:(0,l.jsx)(n.xv,{align:"center",weight:"bold",children:u})})})})}},67664:(e,t,a)=>{"use strict";a.d(t,{A:()=>r,Z:()=>s});var n=a(667294),i=a(883119),l=a(785893);let r={bubbleOverlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},hoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.6)"},lightHoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.1)"}};function s({backgroundColor:e,children:t,coverImage:a,disableTabIndex:s,height:o,id:c,isHovered:u,onClick:d,onMouseDown:p,onMouseEnter:m,onMouseLeave:h,searchBoxRenderStopwatch:g,url:y,width:f}){let[_,x]=(0,n.useState)(!1),v=()=>{m?m():x(!0)},b=()=>{h?h():x(!1)},S=u||_,w=S?r.hoverOverlay:r.bubbleOverlay;return(0,l.jsx)(i.Tg,{href:y,onBlur:b,onFocus:v,onMouseDown:p,onMouseEnter:v,onMouseLeave:b,onTap:()=>{d?.(c)},rounding:4,tabIndex:s?-1:void 0,children:(0,l.jsx)(i.zd,{height:o,rounding:4,width:f||"100%",children:a?.url?(0,l.jsxs)(i.Ee,{alt:"",color:e,fit:"cover",naturalHeight:a.height??1,naturalWidth:a.width??1,onLoad:()=>{g?.stop()},role:"presentation",src:a.url,children:[(0,l.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:w},height:"100%",width:"100%"}),"function"==typeof t?t({isHovered:S}):t]}):(0,l.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:e}},height:"100%",width:"100%"})})})}},270766:(e,t,a)=>{"use strict";a.d(t,{Z:()=>ew});var n,i,l,r,s=a(167912),o=a(616550),c=a(883119),u=a(695238),d=a(140017),p=a(340523),m=a(919085),h=a(689390),g=a(667294),y=a(735382),f=a(82205),_=a(205841),x=a(207012),v=a(339001),b=a(217058),S=a(785893);let w=void 0!==n?n:n=a(453364),k=()=>{(0,b.NC)("click_best_pin_board",!0)},P=()=>{(0,b.NC)("click_best_pin_profile",!0)},T=({pin:e})=>{let{pinner:t}=e,{username:a,fullName:n}=t??{},i=t?.imageMediumUrl||t?.imageSmallUrl,l=`/${a??""}/`;return(0,S.jsx)(c.Tg,{fullWidth:!1,href:l,onTap:P,rounding:"circle",children:(0,S.jsx)(_.qE,{name:n??"",outline:!0,size:"sm",src:i??""})})},j=({pin:e})=>{let t=(0,d.ZP)(),{board:a,pinner:n}=e,{name:i,privacy:l,url:r}=a??{},s=a?.entityId||"",{username:o,fullName:u}=n??{},p=`/${o??""}/`,m=(0,S.jsx)(c.xv,{inline:!0,size:"200",weight:"bold",children:(0,S.jsx)(c.rU,{display:"inlineBlock",href:p,onClick:P,underline:"hover",children:u})},u);return"protected"===l?(0,v.nk)(t._('{{ pinnerName }} saved this Pin', 'Showing who saved this pin, but not which board (private board), on closeup', 'Showing who saved this pin, but not which board (private board), on closeup'),{pinnerName:m}):(0,v.nk)(t._('{{ pinnerName }} saved to {{ boardName }}', 'Showing who saved this pin to which board on closeup', 'Showing who saved this pin to which board on closeup'),{pinnerName:m,boardName:(0,S.jsx)(c.xv,{inline:!0,size:"200",weight:"bold",children:(0,S.jsx)(c.rU,{href:r??"",onClick:k,children:i},"board")},s)})},F=({pinKey:e})=>{let t=(0,x.Z)(w,e);return(0,S.jsxs)(c.xu,{alignItems:"center","data-test-id":"pin-attribution",direction:"row",display:"flex",marginTop:3,children:[(0,S.jsx)(T,{pin:t}),(0,S.jsx)(c.xu,{marginEnd:2}),(0,S.jsx)(c.xv,{size:"200",children:(0,S.jsx)(j,{pin:t})})]})};var C=a(587703);function I({pageType:e,pinCreditPrefix:t,pin:a,pinLink:n,viewParameter:i}){let l=(0,d.ZP)(),r=(0,C.Z)();if("topic"!==e.page&&(!a.domain||"Uploaded by user"===a.domain))return null;let s="topic"!==e.page||e.isAuth?"100":"200",o="topic"===e.page&&!!a.nativeCreator,u=o?a.nativeCreator?.fullName:a.domain;return(0,S.jsx)(c.xu,{display:"flex",flex:"none",justifyContent:"start",marginBottom:2,children:(0,S.jsx)(c.rU,{display:"inlineBlock",href:o?`/${a.nativeCreator?.username||""}/`:n,onClick:()=>{"topic"===e.page?(0,b.NC)("click_topic_best_pin_link"):r({event_type:12,view_type:3,object_id_str:a.entityId,component:85,view_parameter:i})},rel:"nofollow",target:"blank",underline:"hover",children:(0,S.jsx)(c.xv,{size:s,children:(0,v.nk)(l._('{{ pinCreditPrefix }} {{ pinCredit }}', 'Tells the user where the pin is from in the form of "Saved from <website>"', 'Tells the user where the pin is from in the form of "Saved from <website>"'),{pinCreditPrefix:t,pinCredit:(0,S.jsx)(c.xv,{inline:!0,size:s,weight:"bold",children:(e.page,u)},o?"creatorProfile":"pinLinkDomain")})})})})}var E=a(92785),A=a(388769),L=a(391884),D=a(189469),M=a(567344),R=a(781705),K=a(661428),O=a(414131),Z=a(909886),N=a(686769);let z=void 0!==i?i:i=a(567637);function H({recipeKey:e}){let t=(0,x.Z)(z,e);if(t?.aggregateRating?.ratingValue&&t.aggregateRating.reviewCount){let e="number"==typeof t.cookTimes?.cook?.m&&"number"==typeof t.cookTimes.prep?.m?`${t.cookTimes.cook.m+t.cookTimes.prep.m} minutes \xb7 `:"";return(0,S.jsxs)(g.Fragment,{children:[(0,S.jsx)(N.Z,{max_rating:t.aggregateRating.bestRating,rating:t.aggregateRating.ratingValue},t.aggregateRating.ratingValue),(0,S.jsx)(c.xv,{inline:!0,size:"200",children:` ${t.aggregateRating.reviewCount} \xb7 ${e}`})]})}return null}var U=a(5859);let $=void 0!==l?l:l=a(516658),B=e=>{let t=null;e.lastRepinDate&&(t=new Date(e.lastRepinDate));let a=null;return(e.createdAt&&(a=new Date(e.createdAt)),t)?a?t>a?t:a:t:a},G=e=>{let t="";if(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished)return t;let a=B(e);if(a&&a.getFullYear()===new Date().getFullYear()){let n=new Set(["film_music_books","art","home_decor","food_drink","womens_fashion","travel","weddings","hair_beauty","holidays_events","mens_fashion","products","celebrities","technology"]),{category:i}=e;n.has(i)&&(t=a?(0,S.jsx)(E.Z,{dateFormatType:E.k.LONG_MONTH_YEAR,useUTC:!1,value:a}):"")}return t},V=e=>!!(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished),W=(e,t)=>{let a=new Date((e.richMetadata??{}).article?.datePublished??Date.now()),n=a.getTime(),i=new Date().getTime();return null==t||i-n<=31536e6*t?(0,S.jsx)(E.Z,{dateFormatType:E.k.LONG_MONTH_YEAR,useUTC:!1,value:a}):""};function Y(e){let{pinKey:t,viewportSize:a,pageType:n}=e,i=(0,x.Z)($,t),{pinCreditPrefix:l,pinLink:r}=(0,R.Z)(i),s=(0,K.Z)(i),{description:o}=(0,M.eK)({richMetadataDescription:i.richMetadata?.description,richSummaryDisplayName:i.richSummary?.displayName,closeupUnifiedDescription:i.closeupUnifiedDescription});"videos_category"===n.page&&(o=(0,M.kt)(o,i.nativeCreator?.username||""));let u="wide"===a,d=(0,M.Ly)({pinTitle:i.title,gridTitle:i.gridTitle,richSummaryDisplayName:i.richSummary?.displayName??"",richMetadataTitle:i.richMetadata?.title??"",storyPinDataId:i.storyPinDataId,storyPinDataMetadataPinTitle:i.storyPinData?.metadata?.pinTitle,pinJoinVisualAnnotation:i.pinJoin?.visualAnnotation});(i.gridTitle||"").trim()&&d!==i.gridTitle&&(d=(0,M.EU)(i.gridTitle,200));let p=(0,D.r)(i.richMetadata?.recipe?.name,!!i.richMetadata?.recipe?.categorizedIngredients,i.richMetadata?.recipe?.fromAggregatedData??!1)?i.richMetadata?.recipe:null,m=V(i)&&W(i,2),h=G(i)||m,{isBot:g,isSocialBot:y}=(0,U.B)();return(0,S.jsx)(c.xu,{alignContent:"between","data-test-id":"UnauthBestPinCardBodyContainer",direction:"column",display:"flex",flex:"grow",padding:8,position:"relative",width:"100%",children:(0,S.jsxs)(c.xu,{direction:"column",display:"flex",flex:"grow",position:"relative",children:[(0,S.jsx)(I,{pageType:n,pin:{entityId:i.entityId,domain:i.domain||"",nativeCreator:i.nativeCreator&&{fullName:i.nativeCreator.fullName,username:i.nativeCreator.username}},pinCreditPrefix:"topic"===n.page&&i.nativeCreator?"Created by":l,pinLink:r??"",viewParameter:(0,O.Z)({hasPin:!0,hasPinRichMetadata:!!i.richMetadata,hasPinRichMetadataProducts:!!i.richMetadata?.products,hasPinRichMetadataArticle:!!i.richMetadata?.article,hasPinRichMetadataRecipe:!!i.richMetadata?.recipe,hasPinStoryPinData:!!i.storyPinData})}),(0,S.jsx)(c.kC,{direction:"row",justifyContent:"between",children:(0,S.jsx)(c.xu,{display:"flex",marginEnd:u?0:3,marginTop:u?3:0,overflow:"hidden",children:d&&(0,S.jsx)("h2",{"data-test-id":"UnauthBestPinCardTitle",style:{fontWeight:"600",fontSize:"28px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:d})})}),h?(0,S.jsx)(c.xu,{marginTop:1,children:(0,S.jsx)(c.xv,{color:"subtle",children:h})}):null,o&&(0,S.jsx)(c.xu,{display:"flex",marginTop:3,overflow:"hidden",children:(0,S.jsxs)("h3",{style:{fontWeight:"normal",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",fontSize:"14px"},children:[p&&(0,S.jsx)(H,{recipeKey:p}),o]})}),p&&(0,S.jsx)(Z.Z,{marginOverrides:p?{outerMarginTop:32,ingredientMarginBottom:4}:null,recipeProps:{recipe:{categorizedIngredients:p.categorizedIngredients,name:p.name,image:(0,L.Z)({imagesUrls:s,embedSrc:i.embed?.src,embedType:i.embed?.type,excludeOriginals:!g&&!y})}}}),(0,S.jsxs)(c.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginTop:2,children:[(0,S.jsx)(F,{pinKey:i}),(0,S.jsx)(c.kC,{alignItems:"stretch",justifyContent:"end",children:!i.repinCount||i.repinCount<1?null:(0,S.jsxs)(c.kC,{alignItems:"center",justifyContent:"start",children:[(0,S.jsx)(c.JO,{accessibilityLabel:"Pin",color:"subtle",icon:"pin",size:12}),(0,S.jsx)(c.xv,{color:"default",inline:!0,size:"100",children:(0,S.jsx)(A.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:i.repinCount})})]})})]})]})})}var q=a(922725),X=a(582158),Q=a(96157),J=a(777609),ee=a(627408),et=a(160567),ea=a(624797),en=a(494125),ei=a(129675),el=a(520846),er=a(258194),es=a(755453),eo=a(676554),ec=a(125768),eu=a(774812);let ed=0,ep="";function em(e){let{images:t,image_signature:a}=e,n=t?.["564x"]&&t.orig,{url:i}=n??{},{width:l=1,height:r}=n??{};return"number"==typeof l&&"number"==typeof r&&l>564&&(r*=564/l,l=564),{width:l,height:r,url:i,imageSignature:a}}let eh=({data:e,index:t,viewParameter:a,productsURL:n})=>{switch(e.type){case"pin":return(0,S.jsx)(eo.ZP,{duploQueryRef:null,pinId:e.id,slotIndex:t,viewParameter:a,viewType:72});case"story":return n&&(0,S.jsx)(f.Z,{dangerouslySetActionUrl:n,slotIndex:t,story:e});default:return null}},eg=({resourceOptions:e})=>{let t=(0,d.ZP)(),{data:a,isAtEnd:n,isFetching:i,fetchMore:l}=(0,m.Z)({name:"VisualLiveSearchResource",options:e}),r=(0,o.TH)(),s=`${r.pathname}products/${r.search}`;return(0,S.jsxs)(g.Fragment,{children:[a&&(0,S.jsx)(eu.Z,{customLayoutType:"desktopFlashlight",feedItems:a.results||[],feedKey:"flashlight-dweb-unauth",pagination:{loadNext:l,hasNext:n,isLoadingNext:i,refetch:()=>void 0},renderFeedItem:(e,t)=>eh({data:e,index:t,viewParameter:3050,productsURL:s})}),(0,S.jsx)(c.$j,{accessibilityLabel:t._('Loading visual search results...', 'unauthDesktopVisualSearch.flashlightFeed.loading', 'Accessibility label for loading visual search results'),show:i})]})},ey=({resourceOptions:e})=>{let t=(0,d.ZP)(),{data:a,isAtEnd:n,isFetching:i,fetchMore:l}=(0,m.Z)({name:"VisualLiveSearchProductFeedResource",options:e});return(0,S.jsxs)(g.Fragment,{children:[a&&(0,S.jsx)(eu.Z,{customLayoutType:"desktopFlashlight",feedItems:a||[],feedKey:"flashlight-products-dweb-unauth",pagination:{loadNext:l,hasNext:n,isLoadingNext:i,refetch:()=>void 0},renderFeedItem:(e,t)=>eh({data:e,index:t,viewParameter:3334})}),(0,S.jsx)(c.$j,{accessibilityLabel:t._('Loading visual search product results...', 'unauthDesktopVisualSearch.flashlightProductFeed.loading', 'Accessibility label for loading visual search product results'),show:i})]})};function ef({pinResponse:e}){let t=(0,d.ZP)(),{isRTL:a}=(0,U.B)(),n=(0,C.Z)(),i=(0,o.k6)(),l=(0,o.TH)(),r=(0,o.$B)(),s=(0,g.useRef)(),{pin:u,isLoaded:p}=e,{pinId:m}=(0,h.Z)(r.params.id||""),f=(0,ea.mB)(l.search),_=(0,y.Z)(l),x=function(e){let t=parseInt(e,10);switch(t){case 1:case 2:case 3:case 4:case 5:case 6:return t;default:return}}(f.cropSource),v=(0,Q.hd)(l),{getNormalizedPinImage:w}=(0,J.Z)({pinKey:null!=u?{type:"deprecated",data:u}:null});if((0,g.useEffect)(()=>{if(!_&&u){let{width:e,height:t}=w(),a=(0,es.Z)({cropArea:{h:t-2*q.S,w:e-2*q.S,x:q.S,y:q.S},isProductPage:v,pinId:m,surfaceType:"flashlight"});i.replace(a)}},[w,i,_,v,u,m]),(0,en.Z)(()=>{n({event_type:13,view_type:72,view_parameter:3050,view_data:{pin_id:m}}),(0,b.My)("unauth.flashlight_page")}),(0,g.useEffect)(()=>{let e=s.current;return e&&ep===m&&(e.scrollTop=ed),()=>{e&&(ed=e.scrollTop,ep=m)}}),!p)return(0,S.jsx)(ee.Z,{objectId:"",view:72,children:(0,S.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{top:et.Pw}},position:"relative",children:(0,S.jsx)(c.$j,{accessibilityLabel:t._('Loading visual search...', 'Accessibility label for loading visual search page', 'Accessibility label for loading visual search page'),show:!0})})});if(!u)return null;let{image_signature:k,description:P}=u,{width:T,height:j,url:F}=em(u),I=function({initialCropArea:e,pin:t}){let a;if(e)a={...e};else{let{visual_objects:e}=t,{width:n=1,height:i=1}=em(t);if(e&&e.length){let{x:t,y:l,w:r,h:s}=e[0];a=(0,el.Z)({cropArea:{x:t,y:l,w:r,h:s},scaledWidth:n,scaledHeight:i})}else{let[e,t]=[n/6,i/6],[l,r]=[n-2*e,i-2*t];a={x:e,y:t,w:l,h:r}}}return{x:Math.floor(a.x??0),y:Math.floor(a.y??0),w:Math.floor(a.w??0),h:Math.floor(a.h??0)}}({initialCropArea:_,pin:u}),E=l.state&&l.state.internalNavigation,A=T+20,L=(A??1)+24,D={pin_id:m,image_signature:k,crop:(0,ei.Z)({cropArea:I,scaledWidth:T,scaledHeight:j}),crop_source:x||5},M={__style:{top:140}};return(0,S.jsx)(ee.Z,{objectId:"",view:72,children:(0,S.jsxs)(g.Fragment,{children:[(0,S.jsxs)(c.xu,{alignItems:"center",color:"light",dangerouslySetInlineStyle:{__style:{top:80}},display:"flex",height:60,position:"fixed",width:"100%",zIndex:new c.Ry(4),children:[(0,S.jsx)(c.xu,{left:!0,position:"absolute",children:(0,S.jsx)(ec.Z,{})}),(0,S.jsx)(c.xu,{flex:"grow",children:(0,S.jsx)(c.X6,{align:"center",size:"400",children:v?t._('Shop similar items', 'unauthDesktopFlashlightPage.flashlightProductsFeed.header', 'Header explaining results of flashlight products search'):t._('Visually similar results', 'unauthDesktopFlashlightPage.flashlightFeed.header', 'Header explaining results of flashlight search')})})]}),v?(0,S.jsx)(c.xu,{dangerouslySetInlineStyle:M,position:"relative",children:(0,S.jsx)(ey,{resourceOptions:D})}):(0,S.jsxs)(c.xu,{display:"flex",paddingX:12,children:[(0,S.jsxs)(c.xu,{ref:s,dangerouslySetInlineStyle:M,height:"calc(100% - 140px)",marginEnd:3,marginStart:3,overflow:"auto",position:"fixed",width:A,zIndex:new c.Ry(4),children:[(0,S.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{width:T,height:j}},"data-test-id":"flashlight-enabled-image",children:(0,S.jsxs)(c.zd,{height:j,rounding:2,width:T,children:[(0,S.jsx)(c.Ee,{alt:P??"",naturalHeight:j??1,naturalWidth:T??1,src:F??""}),(0,S.jsx)(X.Z,{customCropper:function({origCrop:e,cropSource:t}){let a=window.location.pathname+window.location.search,n=(0,es.Z)({cropArea:e,cropSource:t??6,isProductPage:v,pinId:m,surfaceType:"flashlight"});(0,b.My)("unauth.flashlight_page.cropper_changed"),n!==a&&m&&i.replace({pathname:`/pin/${m}/visual-search/`,search:(0,er.Z)({cropArea:e,cropSource:t??6,surfaceType:"flashlight"}),state:{internalNavigation:!0}})},imageSignature:k,imageSize:{h:j,w:T},initialCropArea:I,pinKey:{type:"deprecated",data:u},showAnimation:!E,surfaceType:"flashlight",viewParameter:3050,viewType:72})]})}),(0,S.jsx)(c.xu,{"data-test-id":"closeupDescription",direction:"column",display:"flex",margin:5,maxWidth:T??1,position:"relative",children:(0,S.jsx)(Y,{pageType:{isAuth:!1,page:"flashlight"},pinKey:{type:"deprecated",data:u},viewportSize:"narrow"})})]}),(0,S.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{...M.__style,...a?{marginRight:`${L}px`}:{marginLeft:`${L}px`}}},position:"relative",width:"100%",children:(0,S.jsx)(eg,{resourceOptions:D})})]})]})})}let e_=void 0!==r?r:r=a(23136);function ex(e){return e?.map(e=>{var t,a;return{name:e.name??"",offer_summary:{in_stock:e.offerSummary?.inStock??!1},additional_images:function(e){let t=[];return e.forEach(({additionalImagesSpec:e,spec:a})=>{t.push(...function({additionalImagesSpec:e,spec:t}){return e?.map(e=>({canonical_images:{[t]:{height:e.canonicalImage?.height??0,url:e.canonicalImage?.url??"",width:e.canonicalImage?.width??0}},image_signature:e.imageSignature??""}))}({additionalImagesSpec:e,spec:a})??[])}),t}([{additionalImagesSpec:e.additionalImageOrig,spec:"orig"},{additionalImagesSpec:e.additionalImage736x,spec:"736x"},{additionalImagesSpec:e.additionalImage564x,spec:"564x"},{additionalImagesSpec:e.additionalImage474x,spec:"474x"},{additionalImagesSpec:e.additionalImage236x,spec:"236x"}])??[],variant_set:(t=e.variantSet,{variants:(a=t?.variants,a?.map(e=>{var t;return{additional_images:(t=e.additionalImages,t?.map(e=>({canonical_images:e.canonicalImages??{},image_signature:e.imageSignature??""}))??[])}})??[])}??{})}})}function ev(e){return{username:e?.username??"",full_name:e?.fullName??"",image_medium_url:e?.imageMediumUrl,image_small_url:e?.imageSmallUrl}}function eb(e){return{id:e?.entityId??"",username:e?.username??"",full_name:e?.fullName??"",image_medium_url:e?.imageMediumUrl,image_small_url:e?.imageSmallUrl,type:"user"}}let eS=(0,u.Z)({useGraphQLAdapter:function({pinId:e}){var t,a,n,i,l,r,o;let c=(0,s.useLazyLoadQuery)(e_,{pinId:e}),u=c.v3GetPinQuery?.data;if(!u)return null;let d={id:u.entityId??"",is_eligible_for_related_products:u.isEligibleForRelatedProducts??!1,description:u.description??"",image_signature:u.imageSignature??"",images:function(e){let t={};return e.forEach(e=>{let{image:a,spec:n}=e;a&&(t[n]={width:a.width??0,url:a.url??"",type:a.type??"",height:a.height??0,dominant_color:a.dominantColor??""})}),t}([{image:u.imageOrig,spec:"orig"},{image:u.image736x,spec:"736x"},{image:u.image564x,spec:"564x"},{image:u.image474x,spec:"474x"},{image:u.image236x,spec:"236x"}])??{},rich_metadata:(t=u.richMetadata,{products:ex(t?.products)??[],description:t?.description??"",title:t?.title??"",recipe:(a=t?.recipe,{name:a?.name??"",from_aggregated_data:a?.fromAggregatedData??!1,categorized_ingredients:a?.categorizedIngredients?.map(e=>({category:e.category??""}))}??{}),article:{date_published:t?.article?.datePublished??""},tutorial:{id:t?.tutorial?.name??"",type:"makecardtutorialmetadata"}}),rich_summary:(n=u.richSummary,{products:ex(n?.products)??[],display_name:n?.displayName??""}),visual_objects:(i=u.visualObjects,i?.map(e=>({detection:e.detection??!1,h:e.h??0,index:e.index??0,is_stela:e.isStela??!1,label:e.label??"",label_id:null==e.labelId?e.labelId:Number(e.labelId),label_x:e.labelX??0,label_y:e.labelY??0,max_annotation_num_documents:e.maxAnnotationNumDocuments??0,score:e.score??0,show_on_closeup:e.showOnCloseup??!1,w:e.x??0,x:e.w??0,y:e.y??0}))??[]),closeup_unified_description:u.closeupUnifiedDescription,grid_title:u.gridTitle??"",story_pin_data_id:u.storyPinDataId,repin_count:u.repinCount??0,tracked_link:u.trackedLink,link:u.link,domain:u.domain??"",closeup_attribution:ev(u.closeupAttribution),link_domain:{official_user:ev(u.linkDomain?.officialUser)},native_creator:eb(u.nativeCreator),pinner:eb(u.pinner),origin_pinner:eb(u.originPinner),board:(l=u.board,{id:l?.entityId??"",image_thumbnail_url:l?.imageThumbnailUrl??"",name:l?.name??"",privacy:"protected"===(r=l?.privacy)||"public"===r||"secret"===r?r:"secret",url:l?.url??"",type:"board"}),pin_join:{annotations_with_links_array:(o=u.pinJoin?.annotationsWithLinksArray,o?.map(e=>({name:e.name,url:e.url}))??[]),visual_annotation:u.pinJoin?.visualAnnotation??[]},story_pin_data:{metadata:{pin_title:u.storyPinData?.metadata?.pinTitle}},type:"pin"};return{pin:d,isLoaded:!0}},useLegacyAdapter:function({pinId:e}){let{data:t,isLoaded:a}=(0,m.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0}});return{pin:t,isLoaded:a}}});function ew(){let{checkExperiment:e}=(0,p.F)(),t=(0,d.ZP)(),a=(0,o.$B)(),{pinId:n}=(0,h.Z)(a.params.id||"");return(0,S.jsx)(eS,{input:e("unauth_dweb_graphql_flashlight_pinResource").anyEnabled?{enabled:!0,data:{pinId:n},suspense:{fallback:(0,S.jsx)(c.$j,{accessibilityLabel:t._('Loading Pin data', 'unauthDesktopFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})}}:{enabled:!1,data:{pinId:n}},children:({data:e})=>!!e&&(0,S.jsx)(ef,{pinResponse:e})})}},943484:(e,t,a)=>{"use strict";function n(e){return e&&5!==e?4===e?"stela":null:"related_products"}a.d(t,{Z:()=>n})},174281:(e,t,a)=>{"use strict";a.d(t,{D5:()=>s,Hg:()=>i,T_:()=>r,g6:()=>l,w6:()=>n});let n=(e,t)=>Array.from({length:t-e},(t,a)=>a+e),i=508,l=600;function r(e,t){if(!t.startsWith("en"))return e;let a=e.split(" ").map(e=>{let t=e===e.toUpperCase();return t?e:e.toLowerCase()});return a.join(" ")}let s=()=>{let e=new URL(window.location.href),t=e.hostname.replace("www.",""),a=e.pathname;return`${t}${a=a.replace(/\/\d+\//,"/").replace(/\/$/,"")}`}},109486:(e,t,a)=>{"use strict";a.d(t,{Z:()=>e0});var n,i,l,r,s,o,c,u,d,p,m,h=a(167912),g=a(883119),y=a(695238),f=a(140017),_=a(340523),x=a(7829),v=a(689390),b=a(667294),S=a(616550),w=a(735382),k=a(922725),P=a(207012),T=a(777609),j=a(513911);let F=void 0!==n?n:n=a(73129);var C=a(624797),I=a(250790),E=a(129675),A=a(785893);let L=(0,b.createContext)({cropArea:{x:0,y:0,w:1,h:1},cropSource:5,entrySource:"flashlight",isProductPage:!1,surfaceType:null,title:""});function D({children:e,value:t}){return(0,A.jsx)(L.Provider,{value:t,children:e})}var M=a(919085),R=a(172618),K=a(819429),O=a(214877),Z=a(30378),N=a(5859),z=a(71980);function H({buttonText:e,handleDrawerClose:t,isDrawerOpen:a,onClick:n,largeSize:i=!1,reversed:l=!1,invertWhenDrawerIsOpen:r=!1,hasProductFiltersApplied:s=!1}){let o=(0,f.ZP)(),c=r&&a,u=(0,A.jsx)(g.JO,{accessibilityLabel:"",color:c?"light":"dark",icon:"filter"},"filterIcon"),d=e&&(0,A.jsx)(g.xv,{align:"center",color:c?"inverse":"default",weight:"bold",children:e},e);return(0,A.jsx)(g.iP,{accessibilityLabel:o._('Filter', 'productsFilterButton', 'Button to filter products results'),onTap:()=>{a?t():n()},rounding:"pill",children:(0,A.jsxs)(g.xu,{position:"relative",children:[(0,A.jsx)(g.xu,{alignContent:"center",color:c?"dark":"secondary",dangerouslySetInlineStyle:i?{__style:{padding:"18px"}}:void 0,display:"flex",justifyContent:"center",minHeight:40,paddingX:4,rounding:"pill",children:(0,A.jsx)(g.kC,{alignItems:"center",gap:{row:2,column:0},children:l?[d,u]:[u,d]})}),s&&(0,A.jsx)(g.xu,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:{border:"2px solid white"}},display:"flex",height:14,justifyContent:"center",minWidth:14,position:"absolute",right:!0,rounding:"pill",top:!0})]})})}function U({filtersText:e,handleDrawerClose:t,handleDrawerOpen:a,isDrawerOpen:n,isProductOnlyFeed:i,pinId:l,showFilter:r,title:s,viewParameter:o,viewType:c}){let{logContextEvent:u}=(0,O.v)(),{isRTL:d}=(0,N.B)(),p=(0,b.useRef)(null);(0,b.useEffect)(()=>(r&&u({event_type:120,view_type:c,component:13467,element:11735,view_parameter:o}),p.current&&Z.Z.addObstruction("top",p.current),()=>{p.current&&Z.Z.removeObstruction("top",p.current)}),[r]);let m=()=>{u({event_type:101,view_type:c,component:13467,element:11735,view_parameter:o}),a&&a()};return(0,A.jsx)(z.Z,{position:"fixed",style:{width:"100%",zIndex:3,backgroundColor:"#ffffff"},children:(0,A.jsxs)(g.xu,{ref:p,alignItems:"center",color:"default","data-test-id":"related-products-header",display:"flex",justifyContent:"center",minHeight:60,position:"absolute",top:!0,width:"100%",children:[(0,A.jsx)(g.xu,{left:!d,marginStart:5,position:"absolute",right:d,children:(0,A.jsx)(R.Z,{arrowType:i?"directional-arrow-left":"cancel",pinId:l,viewParameter:o,viewType:c})}),(0,A.jsx)(K.Z,{title:s}),r&&"boolean"==typeof n&&m&&e&&t&&(0,A.jsx)(g.xu,{"data-test-id":"filter-button",left:d,marginEnd:12,position:"absolute",right:!d,children:(0,A.jsx)(H,{buttonText:e,handleDrawerClose:t,isDrawerOpen:n,onClick:m})})]})})}var $=a(582158),B=a(906623);let G=void 0!==i?i:i=a(75306);function V({cropArea:e,description:t,height:a,imageSignature:n,imageUrl:i,pinKey:l,requestParams:r,showAnimation:s,surfaceType:o,trafficSource:c,viewParameter:u,width:d}){let p=(0,P.Z)(G,l),m=(0,B.E)();return(0,A.jsx)(g.xu,{"data-test-id":"flashlight-enabled-image",height:a,width:d,children:(0,A.jsxs)(g.zd,{height:a,rounding:4,width:d,children:[(0,A.jsx)(g.Ee,{alt:t,naturalHeight:a,naturalWidth:d,onLoad:()=>{m&&m.markConstraintComplete("visualSearchMainPinImageRender")},src:i}),(0,A.jsx)($.Z,{imageSignature:n,imageSize:{h:a,w:d},initialCropArea:e,pinKey:p,requestParams:r,showAnimation:!!s,surfaceType:o,trafficSource:c,viewParameter:u})]})})}function W(e){let{category_filters:t,domain_filters:a,price_filters:n}=e||{};return!!t||!!a||!!n}var Y=a(431377);function q({title:e}){return(0,A.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:55}},"data-test-id":"unified-feed-subheader",display:"flex",justifyContent:"center",children:(0,A.jsx)(g.X6,{accessibilityLevel:2,size:"400",children:e})})}var X=a(408206),Q=a(156725),J=a(149722),ee=a(301551),et=a(206923);let ea={flashlight:72,stela:427,stl:427};function en({pinId:e,surfaceType:t,visualSearchFlashlightUnifiedResource:a}){let n=(0,S.TH)(),i=(0,J.Z)(),{checkExperiment:l}=(0,_.F)(),r=(0,X.Z)(),{data:s,isLoaded:o}=a,c=s?.results||[],u=t?ea[t]:72;return r&&(!c&&o||c&&!c.some(e=>"story"===e.type&&"unified_visual_feed_product_upsell"===e.story_type))&&r("remove"),(0,A.jsx)(b.Fragment,{children:c.filter(e=>"story"===e.type).map((t,a)=>{if("story"!==t.type)return null;let{action:r,id:s,objects:o,story_type:c,title:d}=t,p=d.format||"",m=(0,ee.Z)(i)&&"holdout"!==l("product_pin_rep_holdout").group,h=(0,C.mB)(n.search),y=(0,C.mB)(r?.url).full_feed_title||"";h.full_feed_title=(0,Q.Z)(y);let f=(0,C.XP)(h),_=`/pin/${e}/visual-search/products/?${f}`;switch(c){case"stela_shop":case"unified_visual_feed_product_upsell":return(0,A.jsx)(et.qS,{auxData:{story_type:c},component:14339,loggingId:s,objectIdStr:s,slotIndex:a,viewParameter:3462,viewType:u,children:({impressionTrackerRef:e})=>(0,A.jsxs)(g.xu,{ref:e,children:[p&&(0,A.jsx)(q,{title:p}),(0,A.jsx)(g.xu,{"data-test-id":"unified-feed-stela-story",marginBottom:12,marginTop:4,children:(0,A.jsx)(Y.Z,{action:r,component:14339,contextLogData:{story_type:c},dangerouslySetActionUrl:_,element:179,hasPwtConstraint:!0,id:s,objects:o,surface:m?"ShoppingModule":void 0,viewParameter:3462,viewType:u})})]})},s);case"unified_visual_feed_organic_header":return(0,A.jsx)(et.qS,{auxData:{story_type:c},component:14339,loggingId:s,objectIdStr:s,slotIndex:a,viewParameter:3462,viewType:u,children:({impressionTrackerRef:e})=>(0,A.jsx)(g.xu,{ref:e,marginBottom:4,children:(0,A.jsx)(q,{title:t.title.format||""})})},s);default:return null}})})}var ei=a(493538),el=a(71328),er=a(676554);function es({commerceData:e,isFilterOpened:t,isProductFeed:a,searchId:n,viewParameter:i,viewType:l,visualSearchFlashlightUnifiedResource:r}){let s=(0,f.ZP)(),{logContextEvent:o}=(0,O.v)(),[c,u]=(0,b.useState)(),[d,p]=(0,b.useState)(!1),m=(0,b.useRef)(null),h=(0,b.useRef)(null),y=(0,el.Z)(()=>{m.current&&u(m.current.getBoundingClientRect().y)},100);(0,b.useEffect)(()=>{h.current?.handleResize()},[t]),(0,b.useEffect)(()=>{if(!d)return window.addEventListener("scroll",y),()=>window.removeEventListener("scroll",y)}),(0,b.useEffect)(()=>{let e=window?.innerHeight||document.body?.clientHeight;!d&&c<e&&(p(!0),o({event_type:110,view_type:l,view_parameter:i}))},[c,o,d,p,l,i]);let{data:_,isFetching:x,fetchMore:v,isAtEnd:S}=r,w=(_?.results||[]).filter(e=>"pin"===e.type);return(0,A.jsxs)(g.xu,{"data-test-id":"visual-search-feed",children:[(0,A.jsx)(g.xu,{ref:m,children:(0,A.jsx)(ei.Z,{isAtEndOfFeed:S,itemCount:(w||[]).length,children:(0,A.jsx)(g.Rk,{ref:h,items:w||[],loadItems:v,minCols:1,renderItem:({data:t,itemIdx:r})=>"pin"===t.type?(0,A.jsx)(er.ZP,{authDesktopSurface:a?"ShoppingDynamicHeightGrid":"SearchItem",auxData:{commerce_data:e},componentType:0,duploQueryRef:null,pin:t,pinId:t.id,slotIndex:r,viewData:{search_identifier:n},viewParameter:i,viewType:l}):null,scrollContainer:()=>window})})}),(0,A.jsx)(g.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:(0,A.jsx)(g.$j,{accessibilityLabel:s._('Loading visual search results', 'visualSearch.spinner.label', 'Accessibility label for spinner when loading the visual search results'),show:x})})]})}let eo=void 0!==l?l:l=a(237583);function ec({isFilterOpened:e,isProductOnlyFeed:t,pinKey:a,surfaceType:n,viewParameter:i,viewType:l,visualSearchFlashlightUnifiedResource:r}){let s=(0,P.Z)(eo,a),o="stl"===n,c=o||t,{data:u}=r,d=u?.search_identifier;return(0,A.jsxs)(b.Fragment,{children:[!o&&(0,A.jsx)(en,{pinId:s.entityId,surfaceType:n,visualSearchFlashlightUnifiedResource:r}),(0,A.jsx)(es,{commerceData:{is_product_only_feed:c},isFilterOpened:e,isProductFeed:c,searchId:d,viewParameter:i,viewType:l,visualSearchFlashlightUnifiedResource:r})]})}var eu=a(549629),ed=a(213377),ep=a(603642),em=a(627408),eh=a(339001),eg=a(755453);a(422578);var ey=a(268127);let ef=void 0!==r?r:r=a(684824);var e_=a(775089),ex=a(19447);let ev=({data:e,itemIdx:t})=>{let a=(0,ex.S6)(),n=e.id?a(e.id):null,i=n||e;return(0,A.jsx)(er.rX,{authDesktopSurface:"RelatedProductsFeed",duploQueryRef:null,pinId:i.id,pinKey:null!=i?{type:"deprecated",data:i}:null,slotIndex:t,trackingParamsMap:i.tracking_params_map,viewParameter:3334,viewType:72})};function eb({visualLiveSearchProductFeedResourceData:e}){let t=(0,f.ZP)(),{data:a,isAtEnd:n,isLoaded:i,isFetching:l,fetchMore:r}=e,s=Array.isArray(a)?a:a?.results;return i?s&&0!==s.length?(0,A.jsx)(ei.Z,{isAtEndOfFeed:n,itemCount:s.length,children:(0,A.jsx)(e_.default,{columnWidth:ed.yF,items:s,loadItems:()=>{l||n||r()},renderItem:e=>(0,A.jsx)(ev,{...e}),scrollContainer:()=>window,virtualize:!1})}):null:(0,A.jsx)(g.kC,{alignItems:"stretch",alignSelf:"center",justifyContent:"center",children:(0,A.jsx)(g.$j,{accessibilityLabel:t._('Loading related products', 'Label for loading spinner', 'Label for loading spinner'),show:!0})})}var eS=a(892254),ew=a(82205);let ek=void 0!==s?s:s=a(163431);function eP({pinKey:e,viewParameter:t,visualLiveSearchResourceData:a}){let n=(0,f.ZP)(),{hasSimplifiedPinGridExpLoaded:i}=(0,eS.$)(),l=(0,P.Z)(ek,e),{data:r,isFetching:s,fetchMore:o}=a,c=r?.results,u=r?.search_identifier;return(0,A.jsxs)(b.Fragment,{children:[c&&u&&(0,A.jsx)(g.Rk,{columnWidth:ed.yF,items:c,loadItems:o,minCols:1,renderItem:({data:e,itemIdx:a})=>(function({data:e,itemIdx:a}){let n=`${window.location.pathname}products/${window.location.search}&full_feed_title=${encodeURIComponent("Shop similar items")}`;return"story"===e.type?(0,A.jsx)(ew.Z,{dangerouslySetActionUrl:n,slotIndex:a,story:e}):"pin"===e.type?(0,A.jsx)(er.ZP,{authDesktopSurface:"FlashlightResultGrid",auxData:{search_identifier:u,image_signature:l.imageSignature},duploQueryRef:null,pin:e,pinId:e.id,slotIndex:a,viewData:{search_identifier:u},viewParameter:t,viewType:72}):null})({data:e,itemIdx:a}),scrollContainer:()=>window}),(0,A.jsx)(g.$j,{accessibilityLabel:n._('Loading search results...', 'FlashlightResultGrid.spinner', 'Accessibility label for loading visual search results'),show:s||!u||!i})]})}var eT=a(136359),ej=a(597553),eF=a(838551),eC=a(369971),eI=a(318612),eE=a(494125),eA=a(561916);function eL({categoryFilters:e,cropSource:t,handleCategoryChange:a,viewParameter:n,viewType:i}){let{logContextEvent:l}=(0,O.v)(),r=(0,f.ZP)(),[s,o]=(0,b.useState)(!0);return(0,A.jsxs)(b.Fragment,{children:[(0,A.jsxs)(g.kC,{alignItems:"center",justifyContent:"between",children:[(0,A.jsx)(g.xv,{weight:"bold",children:r._('Product category', 'filter.category.header', 'Header of product category filter containing filter options')}),(0,A.jsx)(g.xu,{flex:"none",children:(0,A.jsx)(g.hU,{accessibilityLabel:r._('Product category', 'filter.category.button', 'accessibility label for the icon button to open or close domain filter'),icon:s?"arrow-up":"arrow-down",iconColor:"darkGray",onClick:()=>{o(!s),l({event_type:101,component:13535,element:11547,view_type:i,view_parameter:n,aux_data:{commerce_data:JSON.stringify({filter:s?"collapsed":"expanded"})}}),s||l({event_type:13,component:13535,view_type:i,view_parameter:n,aux_data:{commerce_data:JSON.stringify({source:(0,eA.Z)({cropSource:t,viewType:i})})}})},size:"sm"})})]}),s?(0,A.jsx)(b.Fragment,{children:e.slice(0,5).map((e,t)=>(0,A.jsxs)(g.xu,{alignItems:"center",direction:"row",display:"flex",marginBottom:3,children:[(0,A.jsx)(g.xu,{flex:"grow",children:(0,A.jsx)(g.xv,{children:e.label.charAt(0).toUpperCase()+e.label.slice(1)})}),(0,A.jsx)(g.xu,{children:(0,A.jsx)(g.hU,{accessibilityLabel:r._('Category Filter Option', 'filter.category.option', 'Accessibility label for radio button of category filter choices'),icon:e.checked?"check-circle":"circle-outline",iconColor:"darkGray",onClick:()=>a(t),size:"sm"})})]},e.label))}):(0,A.jsx)(g.xu,{width:"80%",children:(0,A.jsx)(g.xv,{color:"subtle",size:"200",children:function(e=[],t){let a=e.filter(e=>e.checked),n=a.length,i=0===n?t._('All', 'filter.category.applied', 'text indicates that no categories filter is currently applied for filtering'):`(${n}) ${a.map(e=>e.label).join(", ")}`;return i}(e,r)})})]})}var eD=a(490972);function eM(e,t){return e.filter(e=>e.checked).map(e=>e[t]).join(",")}function eR(e){return e.map(e=>({...e,checked:!1}))}function eK({listOfAvailableFiltersFromAPI:e,appliedFilterValues:t,key:a,component:n,viewType:i,viewParameter:l}){let{logContextEvent:r}=(0,O.v)(),[s,o]=(0,b.useState)([]),[c,u]=(0,b.useState)(""),[d,p]=(0,b.useState)(!1);return(0,b.useEffect)(()=>{if(e){let n=eR(e),i=t?function(e,t,a){if(e){let n=decodeURI(e).split(",");return t.map(e=>n.includes(e[a])?{...e,checked:!0}:e)}return t}(t,n,a):n;o(i);let l=eM(i,a);u(l)}},[e,t,a]),{filters:s,setFilters:o,submittedFilters:c,submitFilters:function(e){e!==c&&r({event_type:7472,component:n,view_type:i,view_parameter:l}),u(e),p(!1)},isFilterChanged:d,clearFilters:()=>eR(s),getSelected:e=>eM(e,a),handleFilterChange:function({index:e,pinId:t,auxCommerceData:u}){let d=!s[e].checked,m=[...s.slice(0,e),{...s[e],checked:d},...s.slice(e+1)];o(m),p(c!==eM(m,a)),r({event_type:101,component:n,element:11548,view_type:i,view_parameter:l,aux_data:{pin_id:t,commerce_data:JSON.stringify({[a]:s[e][a],select:d,...u})}})}}}function eO({categoryFilters:e,cropSource:t,domainFilters:a,drawerHeight:n,handleFilterChange:i,onSubmit:l,pinId:r,priceFilters:s,submittedFilters:o,updateButtonText:c,width:u,viewParameter:d,viewType:p}){let{logContextEvent:m}=(0,O.v)(),h=(0,f.ZP)();(0,eE.Z)(()=>{m({event_type:13,component:13467,view_type:p,view_parameter:d,aux_data:{commerce_data:JSON.stringify({source:(0,eA.Z)({cropSource:t,viewType:p})})}})});let{category:y,domain:_,max:x,min:v}=o||{},{filters:S,setFilters:w,submittedFilters:k,submitFilters:P,isFilterChanged:T,clearFilters:j,getSelected:F,handleFilterChange:C}=eK({listOfAvailableFiltersFromAPI:a,appliedFilterValues:_,key:"domain",component:13469,viewType:p,viewParameter:d}),{filters:I,setFilters:E,submittedFilters:L,submitFilters:D,isFilterChanged:M,clearFilters:R,getSelected:K,handleFilterChange:Z}=eK({listOfAvailableFiltersFromAPI:e,appliedFilterValues:y,key:"label",component:13535,viewType:p,viewParameter:d}),[N,z]=(0,b.useState)(s),[H,U]=(0,b.useState)(-1),[$,B]=(0,b.useState)(-1),[G,V]=(0,b.useState)(-1),[W,Y]=(0,b.useState)(-1),[q,X]=(0,b.useState)(!1);(0,b.useEffect)(()=>{if(!s||x&&v||z(s),v){let e=parseInt(v,10);Y(e),B(e)}else B(s?.min_value??-1),Y(s?.min_value??-1);if(x){let e=parseInt(x,10);V(e),U(e)}else U(s?.max_value??-1),V(s?.max_value??-1)},[s,x,v]);let{max_value:Q,min_value:J,currency_type:ee}=N||{},et=e=>t=>{let a,n;let i=0>(t||0)?0:t;i&&m({event_type:7472,component:13468,view_type:p,view_parameter:d});let l=!1;"max"===e?(a=i||Q,-1===(n=$)&&(n=J),n>a&&(n=Math.max(a-eF.$,0))):(n=i||0,-1===(a=H)&&(a=Q),a<n&&(a=n+eF.$)),X(l=l||W!==n||G!==a),B(n),U(a)};(0,b.useEffect)(()=>{c&&c(function({categoryFilters:e,domainFilters:t,minPrice:a,maxPrice:n},i){let l=i._('Filters', 'Filter icon button to open drawer containing price filter and domain filters on related products feed', 'Filter icon button to open drawer containing price filter and domain filters on related products feed'),r=function({categoryFilters:e,domainFilters:t,minPrice:a,maxPrice:n}){let i=t?t.split(",").length:0,l=e?e.split(",").length:0;return(n||a?1:0)+i+l}({categoryFilters:e,domainFilters:t,minPrice:a,maxPrice:n}),s=r>0?` (${r})`:"";return`${l}${s}`}({categoryFilters:L,domainFilters:k,maxPrice:-1===G||G===Q?void 0:G,minPrice:-1===W||W===J?void 0:W},h))},[h,G,W,L,k,c,Q,J]);let ea=({categoryParam:e,domainParam:t,maxPrice:a,minPrice:n})=>{i({categoryParam:e,domainParam:t,maxPrice:-1!==a?a:void 0,minPrice:-1!==n?n:void 0}),V(a),Y(n),X(!1),(G!==a||W!==n)&&m({event_type:7472,component:13468,view_type:p,view_parameter:d}),P(t),D(e);let r=-1!==n,s=-1!==a,o=""!==t,c=""!==e,u=r?n.toString():"",h=s?a.toString():"",g=o?encodeURI(t):"",y=c?encodeURI(e):"";l&&l({category:y,domain:g,max:h,min:u})};return(0,A.jsxs)(b.Fragment,{children:[(0,A.jsxs)(g.xu,{direction:"column",display:"flex",height:n-50-70,overflow:"scroll",paddingX:1,paddingY:1,width:"100%",children:[(0,A.jsxs)(g.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:3,children:[(0,A.jsx)(g.xv,{weight:"bold",children:h._('Filter', 'shopping.filter.header', 'Header for the types of filters')}),(0,A.jsx)(g.zx,{onClick:()=>{U(-1),B(-1),w(j()),E(R()),ea({categoryParam:"",domainParam:"",maxPrice:-1,minPrice:-1}),m({event_type:101,component:13467,element:11545,view_type:p,view_parameter:d})},size:"md",text:h._('Clear all', 'filter.clear.button', 'Button to clear all set filters on product group filters')})]}),!!N&&-1!==$&&-1!==H&&(0,A.jsx)(eD.Z,{children:(0,A.jsx)(eI.Z,{cropSource:t,currencyCode:ee,defaultMaxPrice:Q,defaultMinPrice:J,disableAutoFormatOnChange:!0,handleMaxPriceChange:et("max"),handleMinPriceChange:et("min"),maxPrice:H,minPrice:$,uiType:"slider",viewParameter:d,viewType:p})}),!!I&&I.length>0&&4!==t&&(0,A.jsx)(eD.Z,{children:(0,A.jsx)(eL,{categoryFilters:I,cropSource:t,handleCategoryChange:e=>{Z({index:e,pinId:r})},viewParameter:d,viewType:p})}),!!S&&S.length>0&&(0,A.jsx)(eD.Z,{children:(0,A.jsx)(eC.Z,{cropSource:t,filterOptions:S,handleFilterChange:e=>{C({index:e,pinId:r,auxCommerceData:{source:(0,eA.Z)({cropSource:t,viewType:p})}})},showVerifiedMerchants:!0,uiType:"check-circles",viewParameter:d,viewType:p})})]}),(0,A.jsx)(g.xu,{color:"default",display:"flex",justifyContent:"center",position:"fixed",width:u,children:(0,A.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},direction:"row",display:"flex",paddingY:2,children:(0,A.jsx)(g.xu,{marginStart:2,children:(0,A.jsx)(g.sg,{span:6,children:(0,A.jsx)(g.zx,{color:"red",dataTestId:"confirm-filters-button",disabled:!(T||M||q),onClick:()=>{let e=F(S),t=K(I);ea({categoryParam:t,domainParam:e,maxPrice:H,minPrice:$}),m({event_type:101,component:13467,element:11546,view_type:p,view_parameter:d})},size:"md",text:h._('Apply', 'filter.apply.button', 'Button to submit all selected filter options'),type:"submit"})})})})})]})}function eZ({categoryFilters:e,cropSource:t,domainFilters:a,isDrawerOpen:n,handleFilterChange:i,handleSubmit:l,pinId:r,priceFilters:s,submittedFilters:o,topOffset:c=0,updateButtonText:u,viewParameter:d=3455,viewType:p}){let m=(0,eT.t)(),h=m+c,[y,f]=(0,b.useState)(0),_=()=>{f(window.innerHeight-m)};return(0,b.useEffect)(()=>(_(),window.addEventListener("resize",_),()=>{window.removeEventListener("resize",_)}),[]),(0,A.jsx)(g.xu,{color:"default",dangerouslySetInlineStyle:{__style:{marginRight:n?0:-ej.pG,visibility:n?"visible":"hidden",top:h}},height:y,left:!0,paddingX:ej.VF,position:"fixed",width:ej.pG,zIndex:new g.Ry(2),children:(0,A.jsx)(eO,{categoryFilters:e,cropSource:t,domainFilters:a,drawerHeight:y,handleFilterChange:i,onSubmit:l,pinId:r,priceFilters:s,submittedFilters:o,updateButtonText:u,viewParameter:d,viewType:p,width:ej.pG-ej.VF*ej.vc*2})})}let eN=void 0!==o?o:o=a(91856);function ez(e){let{checkExperiment:t}=(0,_.F)(),a=(0,S.k6)(),n=(0,S.TH)(),i=(0,f.ZP)(),l=(0,b.useContext)(L),r=(0,eT.t)(),{filters:s,pinKey:o,visualSearchFlashlightUnifiedResourceData:c,visualLiveSearchResourceData:u,visualLiveSearchProductFeedResourceData:d}=e,{cropArea:p,cropSource:m,entrySource:h,handleFilterChange:y,isProductPage:x,requestParams:v,searchQuery:w,submittedFilters:k,surfaceType:F,title:C,trafficSource:I}=l||{},{category_filters:E,domain_filters:D,price_filters:M}=s||{},R=(0,P.Z)(eN,o),{getNormalizedPinImage:K}=(0,T.Z)({pinKey:R,maxWidth:j.RZ}),{anyEnabled:O}=t("web_unified_visual_feed"),{anyEnabled:Z}=t("web_flashlight_unified_feed"),N=function({cropSource:e,i18n:t,inFlashlightUFExperiment:a,inStelaUFExperiment:n,isProductPage:i,surfaceType:l,title:r}){let s=t._('Image search', 'imageSearch.header', 'header explaining the results of image search'),o=t._('Shop the look', 'shopTheLook.header', 'User will see this Shop the look header when navigating from the Shop the look module'),c=(0,eh.nk)(t._('Shop {{ category }}', 'relatedProducts.stela.header', 'header for related products stela feed'),{category:(r||"").toLowerCase()}).join("");return i?r:"stl"===l?4===e?o:s:a&&"flashlight"===l||n&&["stela","stl"].includes(l)?4===e?"":s:4===e?c:s}({cropSource:m,i18n:i,inFlashlightUFExperiment:Z,inStelaUFExperiment:O,isProductPage:x,surfaceType:F,title:C}),[z,H]=(0,b.useState)(!1),[$,B]=(0,b.useState)(""),G=z?ej.pG:0,Y=W(s),{state:q}=n||{},{internalNavigation:X=!1}=q||{},{width:Q,height:J,url:ee}=K(),et=Q+20,ea=z?0:12,en=x?0:et+4*ea,ei=en+G,er=O&&!x&&"stl"!==F,[es,eo]=(0,b.useState)(window.innerWidth);(0,b.useEffect)(()=>{let e=(0,el.Z)(()=>eo(window.innerWidth),100);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)});let e_=c?.data?.search_identifier||u?.data?.search_identifier||d?.data?.search_identifier||"",[ex,ev]=(0,b.useState)(e_);(0,b.useEffect)(()=>{e_&&ex!==e_&&ev(e_)},[e_,ex]);let eS=(0,b.useRef)(null),ew=0,ek="";(0,b.useEffect)(()=>(eS&&eS.current&&ek===R.entityId&&(eS.current.scrollTop=ew),()=>{eS&&eS.current&&(ew=eS.current.scrollTop,ek=R.entityId)}),[eS]);let eF=["stela","stl"].includes(F)?427:"flashlight"===F?Z&&x?427:72:427,eC=["stela","stl"].includes(F)?4===m?3462:3455:"flashlight"===F?Z&&4===m?3462:3050:3462,eI=function({entrySource:e,isProductPage:t,pinKey:a,surfaceType:n,viewParameter:i,viewType:l}){let{checkExperiment:r}=(0,_.F)(),{anyEnabled:s}=r("web_unified_visual_feed"),{anyEnabled:o}=r("web_flashlight_unified_feed"),c=(0,P.Z)(ef,a),u=(0,ey.Z)(c),d=u({default:{is_product_only_feed:"stl"===n||t}});if(s||o)return{view_type:l,view_parameter:i,aux_data:d};if(!["stela","stl"].includes(n))return{view_type:l,view_parameter:3050,view_data:{pin_id:c.entityId}};{let t=(c.visualObjects||[]).some(e=>e.isStela);return{view_type:l,view_parameter:i,view_data:{pin_id:c.entityId},aux_data:{commerce_data:JSON.stringify({entrypoint:e,pin_is_stela:t})}}}}({entrySource:h,isProductPage:x,pinKey:R,surfaceType:F,viewParameter:eC,viewType:eF});return(0,A.jsx)(ep.Z,{constraints:function({isProductPage:e,isStl:t,isUnifiedFeed:a}){return e?[]:!a||t?["visualSearchMainPinImageRender"]:a?["shoppingModuleRender","visualSearchMainPinImageRender"]:[]}({isProductPage:x,isStl:"stl"===F,isUnifiedFeed:Z||O}),measureGridVisuallyComplete:!0,surface:"visual_search",children:(0,A.jsx)(em.Z,{objectId:ex,view:eF,children:(0,A.jsx)(eu.Z,{log:eI,children:(0,A.jsxs)(g.xu,{"data-test-id":"related-products",children:[(0,A.jsx)(U,{filtersText:$,handleDrawerClose:function(){H(!1)},handleDrawerOpen:function(){H(!0)},isDrawerOpen:z,isProductOnlyFeed:x,pinId:R.entityId,showFilter:!er&&Y,title:N,viewParameter:eC,viewType:eF}),Y&&(0,A.jsx)(eZ,{categoryFilters:E,cropSource:m,domainFilters:D,handleFilterChange:y??(()=>{}),handleSubmit:function(){let e=(0,eg.Z)({cropArea:p,cropSource:m,isProductPage:x,pinId:R.entityId,requestParams:v,searchQuery:w,surfaceType:F,title:C,trafficSource:I});a.replace(e)},isDrawerOpen:z,pinId:R.entityId,priceFilters:M,submittedFilters:k,topOffset:60,updateButtonText:e=>{B(e)},viewParameter:eC,viewType:eF}),!x&&(0,A.jsx)(g.xu,{ref:eS,bottom:!0,dangerouslySetInlineStyle:{__style:{top:r+92,left:G,right:G}},height:"inherit",marginBottom:3,marginStart:ea,overflow:"auto",position:"fixed",width:et,children:(0,A.jsx)(V,{cropArea:p,description:R.description??"",height:J,imageSignature:R.imageSignature||"",imageUrl:ee,pinKey:R,requestParams:v,showAnimation:!X&&"flashlight"===F,surfaceType:F,trafficSource:I,viewParameter:eC,width:Q})}),(0,A.jsxs)(g.xu,{dangerouslySetInlineStyle:{__style:{top:92,left:ei,right:ei}},paddingX:ed.jC,position:"relative",width:es-ei,children:[c&&(0,A.jsx)(ec,{isFilterOpened:z,isProductOnlyFeed:x,pinKey:R,surfaceType:F,viewParameter:eC,viewType:eF,visualSearchFlashlightUnifiedResource:c}),!Z&&u&&(0,A.jsx)(eP,{pinKey:R,viewParameter:eC,visualLiveSearchResourceData:u}),!Z&&d&&(0,A.jsx)(eb,{visualLiveSearchProductFeedResourceData:d})]})]})})})})}let eH=void 0!==c?c:c=a(982385);function eU(e){let{legacySearchId:t,pinKey:a,resourceOptions:n,setLegacySearchId:i}=e,l=(0,P.Z)(eH,a),r=(0,M.Z)({name:"VisualLiveSearchProductFeedResource",options:n}),s=r.data?.search_identifier||"";return(0,b.useEffect)(()=>{i&&s&&t!==s&&i(s)}),(0,A.jsx)(ez,{pinKey:l,visualLiveSearchProductFeedResourceData:r})}let e$=void 0!==u?u:u=a(290602);function eB(e){let{legacySearchId:t,pinKey:a,resourceOptions:n,setLegacySearchId:i}=e,l=(0,P.Z)(e$,a),r=(0,M.Z)({name:"VisualLiveSearchResource",options:n}),s=r.data?.search_identifier||"";return(0,b.useEffect)(()=>{i&&s&&t!==s&&i(s)}),(0,A.jsx)(ez,{pinKey:l,visualLiveSearchResourceData:r})}let eG=void 0!==d?d:d=a(593390);function eV(e){let{pinKey:t,resourceOptions:a}=e,n=(0,P.Z)(eG,t),{visualSearchFlashlightUnifiedResource:i,filters:l}=function({resourceOptions:e,setFlashlightSearchId:t}){let[a,n]=(0,b.useState)(),[i,l]=(0,b.useState)(""),[r,s]=(0,b.useState)(),o=(0,M.Z)(e?{name:"VisualSearchFlashlightUnifiedResource",options:e}:null);return(0,b.useEffect)(()=>{let{data:e}=o,a=e?.search_identifier;a&&(t?t(a):l(a)),n(e)},[t,o]),(0,b.useEffect)(()=>{let{data:e}=o,t=e?.search_identifier,n=a?.search_identifier;!e||t&&n&&t===n||W(a)||!W(e)||s({category_filters:e.category_filters,domain_filters:e.domain_filters,price_filters:e.price_filters})},[r,a,o]),{visualSearchFlashlightUnifiedResource:o,filters:r,searchId:i,setSearchId:l}}({resourceOptions:a});return(0,A.jsx)(ez,{filters:l,pinKey:n,visualSearchFlashlightUnifiedResourceData:i})}let eW=void 0!==p?p:p=a(620254);function eY({pinKey:e}){let{checkExperiment:t}=(0,_.F)(),a=(0,S.TH)(),n=(0,P.Z)(eW,e),{getInitialCropArea:i}=function({pinKey:e}){let t=(0,P.Z)(F,e),{getNormalizedPinImage:a}=(0,T.Z)({pinKey:t,maxWidth:j.RZ}),{width:n,height:i}=a(),l=(0,b.useCallback)(({initialCropArea:e})=>e||{x:k.S,y:k.S,w:n-2*k.S,h:i-2*k.S},[i,n]);return{getInitialCropArea:l}}({pinKey:n}),{getNormalizedPinImage:l}=(0,T.Z)({pinKey:n,maxWidth:j.RZ}),{width:r,height:s}=l(),{anyEnabled:o}=t("web_unified_visual_feed"),{anyEnabled:c}=t("web_flashlight_unified_feed"),u=(0,C.mB)(a.search),{cropSource:d,full_feed_title:p,surfaceType:m,category:h,domain:g,max:y,min:f,q:x,requestParams:v,rs:L}=u,M=(0,I.Z)(Number(d))||5,R=(0,w.Z)(a),K=i({initialCropArea:R}),O=a.pathname.includes("/products"),Z=m||"flashlight",N=O||"stl"===Z?"shopping":"flashlight",z=function({cropSource:e,surfaceType:t,isProductPage:a}){return"stl"===t&&4===e?"shop_the_look_module":a?"feed_module":null}({cropSource:M,isProductPage:O,surfaceType:Z}),[H,U]=(0,b.useState)(parseInt(f,10)||null),[$,B]=(0,b.useState)(parseInt(y,10)||null),[G,V]=(0,b.useState)(g?decodeURI(g):null),[W,Y]=(0,b.useState)(h?decodeURI(h):null);function q({minPrice:e,maxPrice:t,domainParam:a,categoryParam:n}){U(e),B(t),V(a),Y(n)}let X={categories:W,crop:(0,E.Z)({cropArea:K,scaledWidth:r,scaledHeight:s}),crop_source:M,domains:G,entry_source:N,entrypoint:z,field_set_key:"shopping_grid_item",image_signature:n.imageSignature||void 0,is_shopping:function({cropSource:e,inStelaUFExperiment:t,isProductPage:a,surfaceType:n}){return!!a||4===e&&("stl"===n||"stela"===n&&!t)}({cropSource:M,inStelaUFExperiment:o,isProductPage:O,surfaceType:Z}),pin_id:n.entityId,price_max:$,price_min:H,request_params:v,source:L},Q=(0,b.useMemo)(()=>({cropArea:K,cropSource:M,entrySource:N,handleFilterChange:q,isProductPage:O,requestParams:v,searchQuery:x,submittedFilters:{category:h,domain:g,max:y,min:f},surfaceType:Z,title:p,trafficSource:L}),[h,K,M,g,N,O,y,f,v,x,Z,p,L]);if(!n)return null;let J="flashlight"!==Z||c?(0,A.jsx)(eV,{pinKey:n,resourceOptions:X}):O?(0,A.jsx)(eU,{pinKey:n,resourceOptions:X}):(0,A.jsx)(eB,{pinKey:n,resourceOptions:X});return(0,A.jsx)(D,{value:Q,children:J})}let eq=void 0!==m?m:m=a(900228);function eX(e){return{width:e.width??0,url:e.url??"",height:e.height??0}}function eQ(e){return e?.map(e=>{var t,a;return{additional_images:function(e){let t=[];return e.forEach(({additionalImages:e,spec:a})=>{t.push(...function({additionalImages:e,spec:t}){let a=[];return e?.forEach(e=>{e.canonicalImage&&a.push({canonical_images:{[t]:eX(e.canonicalImage)},image_signature:e.imageSignature??""})}),a}({additionalImages:e,spec:a})??[])}),t}([{additionalImages:e.additionalImageOrig,spec:"orig"},{additionalImages:e.additionalImage736x,spec:"736x"},{additionalImages:e.additionalImage564x,spec:"564x"},{additionalImages:e.additionalImage474x,spec:"474x"},{additionalImages:e.additionalImage236x,spec:"236x"}])??[],variant_set:(t=e.variantSet,{variants:(a=t?.variants,a?.map(e=>{var t;return{additional_images:(t=e.additionalImages,t?.map(e=>({canonical_images:e.canonicalImages??{},image_signature:e.imageSignature??""}))??[])}})??[])}??{})}})}let eJ=(0,y.Z)({useGraphQLAdapter:function(e){var t,a,n;let{id:i}=useParams(),{pinId:l}=(0,v.Z)(i||""),r=function({pinId:e}){return{query:eq,variables:{pinId:e}}}({pinId:l}),s=(0,h.useLazyLoadQuery)(eq,r.variables),o=s.v3GetPinQuery?.data;if(!o)return null;let c={id:o.entityId??"",is_eligible_for_related_products:o.isEligibleForRelatedProducts??!1,description:o.description??"",image_signature:o.imageSignature??"",visual_objects:(t=o.visualObjects,t?.map(e=>({detection:e.detection??!1,h:e.h??0,index:e.index??0,is_stela:e.isStela??!1,label:e.label??"",label_id:null==e.labelId?e.labelId:Number(e.labelId),label_x:e.labelX??0,label_y:e.labelY??0,max_annotation_num_documents:e.maxAnnotationNumDocuments??0,score:e.score??0,show_on_closeup:e.showOnCloseup??!1,title:e.title??"",w:e.x??0,x:e.w??0,y:e.y??0}))??[]),images:function(e){let t={};return e.forEach(e=>{let{image:a,spec:n}=e;a&&(t[n]=eX(a))}),t}([{image:o.imageOrig,spec:"orig"},{image:o.image736x,spec:"736x"},{image:o.image564x,spec:"564x"},{image:o.image474x,spec:"474x"},{image:o.image236x,spec:"236x"}])??{},rich_metadata:(a=o.richMetadata,{products:eQ(a?.products)??[]}),rich_summary:(n=o.richSummary,{products:eQ(n?.products)??[]}),type:"pin"};return c},useLegacyAdapter:function(e){let{data:t,isLoaded:a}=(0,x.Z)({name:"PinResource",getOptions:({routeData:{params:{id:e}}})=>({id:e,field_set_key:"detailed",fetch_visual_search_objects:!0})});return a&&t?t:null}});function e0(){let{checkExperiment:e}=(0,_.F)(),t=(0,f.ZP)();return(0,A.jsx)(eJ,{input:e("auth_dweb_graphql_closeup_shop_pinResource").anyEnabled?{enabled:!0,data:null,suspense:{fallback:(0,A.jsx)(g.$j,{accessibilityLabel:t._('Loading Pin data', 'RelatedProductsPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})}}:{enabled:!1,data:null},children:({data:e})=>!!e&&(0,A.jsx)(eY,{pinKey:{type:"deprecated",data:e}})})}},944846:(e,t,a)=>{"use strict";a.d(t,{By:()=>y,IT:()=>h,N6:()=>o,br:()=>c,jq:()=>d,lU:()=>m,mk:()=>p,tq:()=>u});var n=a(107366);let i=e=>({type:"CLEAR_RECENT_SEARCH",payload:{query:e}}),l=()=>({type:"CLEAR_RECENT_SEARCHES"}),r=e=>({type:"CLEAR_RECENT_PERSONAL_SEARCH",payload:{query:e}}),s=()=>({type:"CLEAR_RECENT_PERSONAL_SEARCHES"}),o=(e,t)=>({type:"UPDATE_CURRENT_SEARCH",payload:{query:e,scope:t}}),c=(e,t)=>({type:"UPDATE_RECENT_SEARCHES",payload:{query:e,scope:t}}),u=e=>({type:"UPDATE_RECENT_SEARCHES_BATCH",payload:{data:e}}),d=(e,t,a)=>({type:"UPDATE_TYPEAHEAD_CACHE",payload:{items:e,term:t,recent_queries_tags:a}}),p=e=>({type:"SET_ANIMATION_ON_BODY_FILTER",payload:{animated:e}}),m=(e,t,a)=>i=>{(0,n.Z)({url:"/v3/search/recent/",method:"DELETE",data:{vertical:e}}).then(t,a),i("PERSONAL"===e?s():l())},h=(e,t,a,l,s)=>o=>{a||(0,n.Z)({url:"/v3/search/recent/",method:"DELETE",data:{query:e,vertical:t}}).then(l,s),o("PERSONAL"===t?r(e):i(e))},g=e=>({type:"RELOAD_VISUAL_SEARCH_ANNOTATIONS",payload:{pinId:e}}),y=e=>t=>{t(g(e))}},125768:(e,t,a)=>{"use strict";a.d(t,{Z:()=>y});var n=a(702664),i=a(616550),l=a(883119),r=a(224796),s=a(587703),o=a(525364),c=a(140017),u=a(340523),d=a(731714),p=a(217058),m=a(623409),h=a(554786),g=a(785893);function y({alignIconLeft:e,bgColor:t,color:a,disableRedirect:y=!1,fallbackUrl:f,icon:_="arrow-back",onTouch:x,padding:v,placement:b,shouldUseFallbackUrl:S,size:w="lg",viewParameter:k,viewType:P,fallbackUrlForExp:T}){let j=(0,c.ZP)(),F=(0,h.HG)(),{checkExperiment:C}=(0,u.F)(),I=(0,i.k6)(),E=(0,i.TH)(),A=(0,n.useSelector)(e=>e.session.isAuthenticated),L=(0,s.Z)(),D=(0,m.Z)(),M=!A&&T&&"/ideas"===f,{viewType:R,viewParameter:K}=(0,o.SU)(),[O,Z]=P?[P,k]:[R,K],N=()=>E.search&&E.search.includes("?nativeShouldDismiss=true"),z=()=>{let e=d.Z.getItem(r.pm);E.key||"/ideas"!==f?(0,p.My)(`pinner_conversion.back_button.${String(e?.[0].pageType)}`):(0,p.My)("pinner_conversion.back_button.no_history"),(0,p.My)(`web_back_button_click.${String(b)}.is_auth_${String(A)}`),D({action:"click",item:"back-button"}),O&&L({view_type:O,view_parameter:Z,element:34,event_type:102}),x&&x(),y||((!E.key||E.state&&"redirect"===E.state.referrer||S)&&f?M?F&&C("web_unauth_backbutton_navigation").anyEnabled?(I.push(T||f),(0,p.My)("web.unauth.back_button.l1interest")):!F&&C("mweb_unauth_backbutton_navigation").anyEnabled?(I.push(T||f),(0,p.My)("mweb.unauth.back_button.l1interest")):I.push(f):I.push(f):E.pathname.includes("/password/reset/")&&N()?I.push("/login/?dismissWebview=true"):I.goBack())};return(0,g.jsx)(l.xu,{"data-test-id":"back-button",children:e?(0,g.jsx)(l.xu,{alignItems:"center",display:"flex",height:48,marginStart:"cancel"===_?-1:-2,width:48,children:(0,g.jsx)(l.hU,{accessibilityLabel:j._('Back', 'navigation button', 'navigation button'),bgColor:t,icon:_,iconColor:!a&&(!t||["white","lightGray","transparent"].includes(t))?"gray":a,onClick:z,padding:"auto"!==v?v:2,size:w})}):(0,g.jsx)(l.hU,{accessibilityLabel:j._('Back', 'navigation button', 'navigation button'),bgColor:t,icon:_,iconColor:!a&&(!t||["white","lightGray","transparent"].includes(t))?"gray":a,onClick:z,padding:"auto"!==v?v:2,size:w})})}},490972:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var n=a(883119),i=a(785893);function l({children:e}){return(0,i.jsx)(n.xu,{paddingY:4,children:e})}},597553:(e,t,a)=>{"use strict";a.d(t,{VF:()=>i,pG:()=>n,vc:()=>l});let n=348,i=7,l=4},561916:(e,t,a)=>{"use strict";function n({cropSource:e,viewType:t}){return 2===t?"search":e&&5!==e?4===e?"stela":null:"related_products"}a.d(t,{Z:()=>n})},750701:(e,t,a)=>{"use strict";a.d(t,{Z:()=>ei});var n=a(667294),i=a(542473),l=a.n(i),r=Math.sqrt(50),s=Math.sqrt(10),o=Math.sqrt(2);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach(function(t){var n;n=a[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function d(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,a){return t&&p(e.prototype,t),a&&p(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=g(e);if(t){var i=g(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return f(e)}(this,a)}}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var l=[],r=!0,s=!1;try{for(i=i.call(e);!(r=(a=i.next()).done)&&(l.push(a.value),!t||l.length!==t);r=!0);}catch(e){s=!0,n=e}finally{try{r||null==i.return||i.return()}finally{if(s)throw n}}return l}}(e,t)||b(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return S(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if("Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return S(e,t)}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var w="react-compound-slider:";function k(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,a){return t.val>a.val?e?-1:1:a.val>t.val?e?1:-1:0}}function P(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e.findIndex(function(e){return e.key===t});if(-1!==i){var l=e[i],r=l.key;return l.val===a?e:[].concat(v(e.slice(0,i)),[{key:r,val:a}],v(e.slice(i+1))).sort(k(n))}return e}function T(e,t){if(!e)return[0,0];var a=e.getBoundingClientRect();return[t?a.top:a.left,t?a.bottom:a.right]}function j(e){var t=e.type,a=e.touches;return!a||a.length>1||"touchend"===(void 0===t?"":t).toLowerCase()&&a.length>0}function F(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=0;return{handles:e.map(function(e){var t=a.getValue(e);return e!==t&&(i+=1,l()(!n,"".concat(w," Invalid value encountered. Changing ").concat(e," to ").concat(t,"."))),t}).map(function(e,t){return{key:"$$-".concat(t),val:e}}).sort(k(t)),changes:i}}function I(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.forEach(function(t){return t&&t(e)})}}var E=function(){return{value:0,percent:0}},A=function(e){h(a,e);var t=_(a);function a(){var e;d(this,a);for(var n=arguments.length,i=Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).getRailProps=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.props,n=a.emitMouse,i=a.emitTouch;return u(u({},t),{},{onMouseDown:I(t&&t.onMouseDown,n),onTouchStart:I(t&&t.onTouchStart,i)})},e}return m(a,[{key:"render",value:function(){var e=this.getRailProps,t=this.props,a=t.getEventData,i=t.activeHandleID,l=(0,t.children)({getEventData:a||E,activeHandleID:void 0===i?"":i,getRailProps:e});return l&&n.Children.only(l)}}]),a}(n.Component),L=function(e){h(a,e);var t=_(a);function a(){var e;d(this,a);for(var n=arguments.length,i=Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).autofocus=function(e){e.target instanceof HTMLElement&&e.target.focus()},e.getHandleProps=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.props,i=n.emitKeyboard,l=n.emitMouse,r=n.emitTouch;return u(u({},a),{},{onKeyDown:I(a&&a.onKeyDown,function(e){return i&&i(e,t)}),onMouseDown:I(a&&a.onMouseDown,e.autofocus,function(e){return l&&l(e,t)}),onTouchStart:I(a&&a.onTouchStart,function(e){return r&&r(e,t)})})},e}return m(a,[{key:"render",value:function(){var e=this.getHandleProps,t=this.props,a=t.activeHandleID,i=t.children,l=t.handles,r=i({handles:void 0===l?[]:l,activeHandleID:void 0===a?"":a,getHandleProps:e});return r&&n.Children.only(r)}}]),a}(n.Component),D=function(){function e(){d(this,e),this.interpolator=void 0,this.domain=[0,1],this.range=[0,1],this.domain=[0,1],this.range=[0,1],this.interpolator=null}return m(e,[{key:"createInterpolator",value:function(e,t){var a=this,n=e[0],i=e[1],l=t[0],r=t[1];return i<n?function(e){return a.interpolateValue(r,l)(a.deinterpolateValue(i,n)(e))}:function(e){return a.interpolateValue(l,r)(a.deinterpolateValue(n,i)(e))}}},{key:"interpolateValue",value:function(e,t){return t-=e=+e,function(a){return e+t*a}}},{key:"deinterpolateValue",value:function(e,t){return(t-=e=+e)?function(a){return(a-e)/t}:function(){return t}}},{key:"rescale",value:function(){return this.interpolator=null,this}},{key:"getValue",value:function(e){var t=this.domain,a=this.range;return(this.interpolator||(this.interpolator=this.createInterpolator(t,a)))(+e)}},{key:"setDomain",value:function(e){return this.domain=[e[0],e[1]],this.rescale(),this}},{key:"getDomain",value:function(){return this.domain}},{key:"setRange",value:function(e){return this.range=[e[0],e[1]],this}},{key:"getRange",value:function(){return this.range}},{key:"getTicks",value:function(e){var t=this.domain;return function(e,t,a){var n,i,l,c,u,d,p,m=-1;if(a=+a,(e=+e)==(t=+t)&&a>0)return[e];if((c=t<e)&&(u=e,e=t,t=u),0==(i=Math.floor(Math.log(n=(t-e)/Math.max(0,a))/Math.LN10),l=n/Math.pow(10,i),p=i>=0?(l>=r?10:l>=s?5:l>=o?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(l>=r?10:l>=s?5:l>=o?2:1))||!isFinite(p))return[];if(p>0){let a=Math.round(e/p),n=Math.round(t/p);for(a*p<e&&++a,n*p>t&&--n,d=Array(u=n-a+1);++m<u;)d[m]=(a+m)*p}else{let a=Math.round(e*(p=-p)),n=Math.round(t*p);for(a/p<e&&++a,n/p>t&&--n,d=Array(u=n-a+1);++m<u;)d[m]=(a+m)/p}return c&&d.reverse(),d}(t[0],t[t.length-1],e||10)}}]),e}(),M=function(){return{value:0,percent:0}},R=function(e){h(a,e);var t=_(a);function a(){return d(this,a),t.apply(this,arguments)}return m(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.values,i=e.scale,l=void 0===i?new D:i,r=e.count,s=e.getEventData,o=e.activeHandleID,c=t({getEventData:void 0===s?M:s,activeHandleID:void 0===o?"":o,ticks:(a||l.getTicks(void 0===r?10:r)).map(function(e){return{id:"$$-".concat(e),value:e,percent:l.getValue(e)}})});return c&&n.Children.only(c)}}]),a}(n.Component),K=function(){return{value:0,percent:0}},O=function(e){h(a,e);var t=_(a);function a(){var e;d(this,a);for(var n=arguments.length,i=Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).getTrackProps=function(t){var a=e.props,n=a.emitMouse,i=a.emitTouch;return u(u({},t||{}),{},{onMouseDown:I(t&&t.onMouseDown,n),onTouchStart:I(t&&t.onTouchStart,i)})},e}return m(a,[{key:"render",value:function(){for(var e=this.getTrackProps,t=this.props,a=t.children,i=t.left,l=void 0===i||i,r=t.right,s=void 0===r||r,o=t.scale,c=void 0===o?new D:o,u=t.handles,d=void 0===u?[]:u,p=t.getEventData,m=t.activeHandleID,h=c.getDomain(),g=[],y=0;y<d.length+1;y++){var f=d[y-1],_=d[y];0===y&&!0===l?f={id:"$",value:h[0],percent:0}:y===d.length&&!0===s&&(_={id:"$",value:h[1],percent:100}),f&&_&&g.push({id:"".concat(f.id,"-").concat(_.id),source:f,target:_})}var x=a({getEventData:void 0===p?K:p,activeHandleID:void 0===m?"":m,tracks:g,getTrackProps:e});return x&&n.Children.only(x)}}]),a}(n.Component);function Z(e,t,a){return Math.min(Math.max(e,t),a)}var N=m(function e(){var t=this;d(this,e),this.step=1,this.domain=[0,1],this.range=[0,1],this.setDomain=function(e){return t.domain=[e[0],e[1]],t},this.setRange=function(e){return t.range=[e[0],e[1]],t},this.setStep=function(e){return t.step=e,t},this.getValue=function(e){var a=x(t.domain,2),n=a[0],i=a[1],l=x(t.range,2),r=l[0],s=l[1],o=t.step,c=o*Math.round((Z(e,n,i)-n)/(i-n)*(s-r)/o)+r;return Z(c,r<s?r:s,s>r?s:r)}}),z="undefined"!=typeof window&&"undefined"!=typeof document,H=function(){},U=function(e){if(!(0,n.isValidElement)(e))return!1;var t=e.type,a=t?t.name:"";return a===L.name||a===A.name||a===R.name||a===O.name},$=function(e,t,a,n){var i=n?e-t:e+t;return n?Math.max(a[0],i):Math.min(a[1],i)},B=function(e,t,a,n){var i=n?e+t:e-t;return n?Math.min(a[1],i):Math.max(a[0],i)},G=[0,100],V=function(e){h(a,e);var t=_(a);function a(){var e;d(this,a);for(var i=arguments.length,l=Array(i),r=0;r<i;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={step:.1,values:[],domain:G,handles:[],reversed:!1,activeHandleID:"",valueToPerc:null,valueToStep:null,pixelToStep:null},e.slider=n.createRef(),e.onKeyDown=function(t,a){var n=["ArrowRight","ArrowUp"],i=["ArrowDown","ArrowLeft"],l=f(e),r=l.state.handles,s=l.props,o=s.step,c=void 0===o?.1:o,u=s.reversed,d=void 0!==u&&u,p=s.vertical,m=s.domain,h=void 0===m?[0,100]:m,g=t.key||"".concat(t.keyCode);if(n.concat(i).includes(g)){if(void 0!==p&&p){var y=[i,n];n=y[0],i=y[1]}t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault();var _=r.find(function(e){return e.key===a});if(_){var x=_.val,v=x;n.includes(g)?v=$(x,c,h,d):i.includes(g)&&(v=B(x,c,h,d));var b=r.map(function(e){return e.key===a?{key:e.key,val:v}:e});e.submitUpdate(b,!0)}}},e.onMouseDown=function(t,a){e.onStart(t,a,!1)},e.onTouchStart=function(t,a){j(t)||e.onStart(t,a,!0)},e.getEventData=function(t,a){var n,i=f(e),l=i.state,r=l.pixelToStep,s=l.valueToPerc,o=i.props.vertical;return r.setDomain(T(e.slider.current,o)),a&&t instanceof TouchEvent?n=r.getValue(F(o,t)):t instanceof MouseEvent&&(n=r.getValue(o?t.clientY:t.pageX)),{value:n,percent:s.getValue(n)}},e.onMouseMove=function(t){var a=f(e),n=a.state,i=n.handles,l=n.pixelToStep,r=n.activeHandleID,s=void 0===r?"":r,o=a.props,c=o.vertical,u=o.reversed,d=void 0!==u&&u;l.setDomain(T(e.slider.current,c));var p=P(i,s,l.getValue(c?t.clientY:t.pageX),d);e.submitUpdate(p)},e.onTouchMove=function(t){var a=f(e),n=a.state,i=n.handles,l=n.pixelToStep,r=n.activeHandleID,s=a.props,o=s.vertical,c=s.reversed;if(!(null===l||j(t))){l.setDomain(T(e.slider.current,o));var u=P(i,r,l.getValue(F(o,t)),c);e.submitUpdate(u)}},e.onMouseUp=function(){var t=f(e),a=t.state,n=a.handles,i=void 0===n?[]:n,l=a.activeHandleID,r=t.props,s=r.onChange,o=void 0===s?H:s,c=r.onSlideEnd,u=void 0===c?H:c;o(i.map(function(e){return e.val})),u(i.map(function(e){return e.val}),{activeHandleID:l}),e.setState({activeHandleID:""}),z&&(document.removeEventListener("mousemove",e.onMouseMove),document.removeEventListener("mouseup",e.onMouseUp))},e.onTouchEnd=function(){var t=f(e),a=t.state,n=a.handles,i=a.activeHandleID,l=t.props,r=l.onChange,s=void 0===r?H:r,o=l.onSlideEnd,c=void 0===o?H:o;s(n.map(function(e){return e.val})),c(n.map(function(e){return e.val}),{activeHandleID:i}),e.setState({activeHandleID:""}),z&&(document.removeEventListener("touchmove",e.onTouchMove),document.removeEventListener("touchend",e.onTouchEnd))},e}return m(a,[{key:"componentDidMount",value:function(){var e=this.state.pixelToStep,t=this.props.vertical;e.setDomain(T(this.slider.current,t))}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"removeListeners",value:function(){z&&(document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"onStart",value:function(e,t,a){var n=this.state.handles,i=this.props.onSlideStart,l=void 0===i?H:i;!a&&e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),n.find(function(e){return e.key===t})?(this.setState({activeHandleID:t}),l(n.map(function(e){return e.val}),{activeHandleID:t}),a?this.addTouchEvents():this.addMouseEvents()):(this.setState({activeHandleID:""}),this.handleRailAndTrackClicks(e,a))}},{key:"handleRailAndTrackClicks",value:function(e,t){var a,n=this,i=this.state,l=i.handles,r=i.pixelToStep,s=this.props,o=s.vertical,c=s.reversed,u=void 0!==c&&c,d=this.slider;r.setDomain(T(d.current,o)),a=t?r.getValue(F(o,e)):r.getValue(o?e.clientY:e.pageX);for(var p="",m=1/0,h=0;h<l.length;h++){var g=l[h],y=g.key,f=Math.abs(g.val-a);f<m&&(p=y,m=f)}var _=P(l,p,a,u);this.setState({activeHandleID:p},function(){n.submitUpdate(_,!0),t?n.addTouchEvents():n.addMouseEvents()})}},{key:"addMouseEvents",value:function(){z&&(document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp))}},{key:"addTouchEvents",value:function(){z&&(document.addEventListener("touchmove",this.onTouchMove),document.addEventListener("touchend",this.onTouchEnd))}},{key:"submitUpdate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.props,n=a.mode,i=void 0===n?1:n,r=a.step,s=void 0===r?.1:r,o=a.onUpdate,c=void 0===o?H:o,u=a.onChange,d=void 0===u?H:u,p=a.reversed,m=void 0!==p&&p,h=this.state.valueToStep.getValue;this.setState(function(a){var n=a.handles,r=[];if("function"==typeof i)r=i(n,e,s,m,h),l()(Array.isArray(r),"Custom mode function did not return an array.");else switch(i){case 1:r=e;break;case 2:r=function(e,t){for(var a=0;a<e.length;a++)if(e[a].key!==t[a].key||t[a+1]&&t[a].val===t[a+1].val)return e;return t}(n,e);break;case 3:r=function e(t,a,n,i,l){for(var r=-1,s=!0,o=0;o<t.length;o++){var c=t[o],u=a[o];if(!u||u.key!==c.key)return t;u.val!==c.val&&(r=o,s=u.val-c.val>0)}if(-1===r)return t;for(var d=s?n:-n,p=0;p<a.length;p++){var m=a[p],h=a[p+1];if(h&&m.val===h.val){if(p===r){var g=h.val+d;if(l(g)!==g)return t;var y=P(a,h.key,h.val+d,i),f=e(a,y,n,i,l);if(f===a)return t;return f}var _=m.val+d;if(l(_)!==_)return t;var x=P(a,m.key,m.val+d,i),v=e(a,x,n,i,l);if(v===a)return t;return v}}return a}(n,e,s,m,h);break;default:r=e,l()(!1,"".concat(w," Invalid mode value."))}return c(r.map(function(e){return e.val})),t&&d(r.map(function(e){return e.val})),{handles:r}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.handles,i=t.valueToPerc,l=t.activeHandleID,r=this.props,s=r.className,o=r.rootStyle,c=void 0===o?{}:o,d=r.rootProps,p=void 0===d?{}:d,m=r.component,h=void 0===m?"div":m,g=r.disabled,y=void 0!==g&&g,f=r.flatten,_=a.map(function(e){var t=e.key,a=e.val;return{id:t,value:a,percent:i.getValue(a)}}),x=n.Children.map(this.props.children,function(t){return!0===U(t)?n.cloneElement(t,{scale:i,handles:_,activeHandleID:l,getEventData:e.getEventData,emitKeyboard:y?H:e.onKeyDown,emitMouse:y?H:e.onMouseDown,emitTouch:y?H:e.onTouchStart}):t});return void 0!==f&&f?n.createElement(n.Fragment,null,n.createElement(h,u(u({},p),{},{style:c,className:s,ref:this.slider})),x):n.createElement(n.Fragment,null,n.createElement(h,u(u({},p),{},{style:c,className:s,ref:this.slider}),x))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a,n,i=e.step,r=void 0===i?.1:i,s=e.values,o=e.domain,c=void 0===o?G:o,u=e.reversed,d=void 0!==u&&u,p=e.onUpdate,m=void 0===p?H:p,h=e.onChange,g=void 0===h?H:h,y=e.warnOnChanges,f=void 0!==y&&y,_=t.valueToPerc,b=t.valueToStep,S=t.pixelToStep,k={};if(_&&b&&S||(_=new D,b=new N,S=new N,k.valueToPerc=_,k.valueToStep=b,k.pixelToStep=S),t.domain===G||null===t.step||null===t.domain||null===t.reversed||r!==t.step||c[0]!==t.domain[0]||c[1]!==t.domain[1]||d!==t.reversed){var P=x(c,2),T=P[0],j=P[1];b.setStep(r).setRange([T,j]).setDomain([T,j]),!0===d?(_.setDomain([T,j]).setRange([100,0]),S.setStep(r).setRange([j,T])):(_.setDomain([T,j]).setRange([0,100]),S.setStep(r).setRange([T,j])),l()(j>T,"".concat(w," Max must be greater than min (even if reversed). Max is ").concat(j,". Min is ").concat(T,"."));var F=C(s||t.values,d,b,f),I=F.handles;(F.changes||void 0===s||s===t.values)&&(m(I.map(function(e){return e.val})),g(I.map(function(e){return e.val}))),k.step=r,k.values=s,k.domain=c===G?v(c):c,k.handles=I,k.reversed=d}else{if(!((a=s)===(n=t.values)||a.length===n.length&&a.reduce(function(e,t,a){return e&&n[a]===t},!0))){var E=C(s,d,b,f),A=E.handles;E.changes&&(m(A.map(function(e){return e.val})),g(A.map(function(e){return e.val}))),k.values=s,k.handles=A}}return Object.keys(k).length?k:null}}]),a}(n.PureComponent),W=a(883119),Y=a(587703),q=a(696534),X=a(140017),Q=a(72461),J=a(5859),ee=a(943484),et=a(785893);let ea=({domain:[e,t],handle:{id:a,value:n,percent:i},getHandleProps:l,touched:r,activeHandleID:s})=>(0,et.jsx)("div",{"aria-valuemax":t,"aria-valuemin":e,"aria-valuenow":n,role:"slider",style:{left:`${i}%`,position:"absolute",marginLeft:"-11px",marginTop:"-6px",border:"1px solid white",zIndex:2,width:15,height:15,cursor:"pointer",borderRadius:"50%",backgroundColor:"black",transform:r&&s===a?"scale(2)":"scale(1)",transition:"transform 0.2s"},...l(a)}),en=({source:e,target:t,getTrackProps:a,backgroundColor:n})=>(0,et.jsx)("div",{style:{position:"absolute",height:5,zIndex:1,backgroundColor:n||"black",borderRadius:7,cursor:"pointer",left:`${e.percent}%`,width:`${t.percent-e.percent}%`},...a()}),ei=function({cropSource:e,currencyType:t,minPrice:a,maxPrice:i,lowerBound:l,upperBound:r,handlePriceChange:s,withTitle:o,instructions:c}){let u=(0,X.ZP)(),d=(0,Q.Z)(),p=(0,Y.Z)(),{locale:m}=(0,J.B)(),h={position:"absolute",width:"100%",height:5,borderRadius:7,cursor:"pointer",backgroundColor:(0,q.Yc)()?"#454545":"lightGrey"},g=[Math.ceil(l),Math.ceil(r)],y=[Math.ceil(a),Math.ceil(i)],[f,_]=(0,n.useState)([!1,!1]);(0,n.useEffect)(()=>{p({event_type:120,component:13468,view_parameter:3396,view_type:72,aux_data:{commerce_data:JSON.stringify({source:(0,ee.Z)(e)})}})},[]);let x={currency:t,style:"currency",minimum_fraction_digits:0,maximum_fraction_digits:2};return(0,et.jsxs)(n.Fragment,{children:[o&&(0,et.jsx)(W.xu,{"data-test-id":"price-filter-label",paddingY:4,children:(0,et.jsx)(W.xv,{children:u._('Price range', 'FeedFiltering.PriceFilter.PriceRange', 'Area that lists the price slider')})}),(0,et.jsxs)(W.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:3,children:[(0,et.jsx)(W.xv,{weight:"bold",children:(0,et.jsx)(W.xu,{dangerouslySetInlineStyle:{__style:{transform:f[0]?"translateZ(0) translateY(0) scale(1.25)":""}},"data-test-id":"min-price-filter",children:d(m,y[0],x)})}),(0,et.jsx)(W.xv,{weight:"bold",children:(0,et.jsx)(W.xu,{dangerouslySetInlineStyle:{__style:{transform:f[1]?"translateZ(0) translateY(0) scale(1.25)":"",textAlign:"right"}},"data-test-id":"max-price-filter",children:d(m,y[1],{...x,uplimit:r})})})]},"priceSliderValues"),(0,et.jsxs)(V,{domain:g,mode:2,onChange:()=>{_([!1,!1])},onUpdate:e=>{s(e);let[t,a]=y,[n,i]=e;t!==n?_([!0,!1]):a!==i&&_([!1,!0])},rootStyle:{margin:"5%",position:"relative",width:"90%"},step:1,values:y,children:[(0,et.jsx)(A,{children:({getRailProps:e})=>(0,et.jsx)("div",{"data-test-id":"slider-handles-rail",style:h,...e()})}),(0,et.jsx)(L,{children:({handles:e,getHandleProps:t,activeHandleID:a})=>(0,et.jsx)("div",{className:"slider-handles","data-test-id":"slider-handles",children:e.map((e,n)=>(0,et.jsx)(ea,{activeHandleID:a,domain:g,getHandleProps:t,handle:e,touched:f[n]},e.id))})}),(0,et.jsx)(O,{left:!1,right:!1,children:({tracks:e,getTrackProps:t})=>(0,et.jsx)("div",{className:"slider-tracks",children:e.map(({id:e,source:a,target:n})=>(0,et.jsx)(en,{backgroundColor:(0,q.Yc)()?"white":"black",getTrackProps:t,source:a,target:n},e))})})]}),(0,et.jsx)(W.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginTop:12,children:(0,et.jsx)(W.xv,{children:c||u._('Drag to change price', 'FeedFiltering.PriceFilter.PriceDragText', 'Area that instructs how to use price slider')})})]})}},19845:(e,t,a)=>{"use strict";a.d(t,{Z:()=>eU});var n,i,l=a(554786),r=a(149722),s=a(167912),o=a(616550),c=a(883119),u=a(695238),d=a(140017),p=a(340523),m=a(603642),h=a(919085),g=a(689390),y=a(667294),f=a(702664),_=a(207229),x=a(214877),v=a(207012),b=a(213377),S=a(901855),w=a(406893),k=a(179425),P=a(734851),T=a(627408),j=a(160567),F=a(624797),C=a(494125);function I(e,t){let a=0,n=!1,i=-1;return e.forEach((e,l)=>{let{x:r=0,y:s=0,h:o=0,w:c=0}=e,u=function(e,t){let{x:a,y:n,w:i,h:l}=e,{x:r,y:s,w:o,h:c}=t,u=Math.max(a,r),d=Math.min(a+i,r+o),p=Math.max(n,s),m=Math.min(n+l,s+c),h=u<d&&p<m?(d-u)*(m-p):0;return h/(i*l+o*c-h)}(t,{x:r,y:s,h:o,w:c});u>=.9&&u>a&&(a=u,n=!0,i=l)}),{isCropAreaOnDotArea:n,dotIndexToHide:i}}var E=a(250790),A=a(801690),L=a(619033),D=a(771881),M=a(696534),R=a(125768),K=a(785893);function O({handleBackClick:e,viewParameter:t,viewType:a}){let n=(0,M.vs)();return(0,K.jsx)(c.xu,{"data-test-id":"cancelButton",left:!0,margin:2,position:"fixed",top:!0,children:(0,K.jsx)(R.Z,{color:n?"darkGray":"white",disableRedirect:!0,icon:"cancel",onTouch:e,padding:3,size:"lg",viewParameter:t,viewType:a})})}var Z=a(587703),N=a(429218),z=a(585913),H=a(913574),U=a(49808),$=a(957435),B=a(797056);function G({pinDominantColor:e,url:t,closeupImageWidth:a,closeupImageHeight:n}){let i=(0,d.ZP)();return(0,K.jsx)(B.Z,{alt:i._('Pin image', 'flashlight.cropper.closeupImage', 'Pin closeup image'),color:e,isFlashlightPage:!0,naturalHeight:n,naturalWidth:a,placeholder:t,showSpinner:!1,src:t})}let V=e=>{let{alt:t,src:a,top:n,left:i}=e;return(0,K.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{top:n,left:i}},height:24,position:"absolute",width:24,children:(0,K.jsx)(c.Ee,{alt:t,color:"transparent",naturalHeight:24,naturalWidth:24,src:a})})},W={backgroundColor:"#000000",opacity:"0.4"};function Y({closeupImageUrl:e,closeupImageDims:t,cropArea:{x:a,y:n,w:i,h:l},disableBorder:r,disableHandles:s,handleBackClick:o,onTouchEnd:u,onTouchMove:p,onTouchStart:m,pinDominantColor:h,showBackButton:g,viewParameter:y}){let f=(0,d.ZP)(),{closeupImageWidth:_,closeupImageHeight:x}=t,v=Math.floor(x*n),b=Math.floor(_*a),S=Math.floor(x*l),w=Math.floor(_*i),k=b+w,P=v+S;return(0,K.jsxs)(c.xu,{"data-test-id":"cropper-container",onTouchEnd:u,onTouchMove:p,onTouchStart:m,position:"relative",children:[(0,K.jsx)(G,{closeupImageHeight:x,closeupImageWidth:_,pinDominantColor:h,url:e??""}),(0,K.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:W},height:v,left:!0,position:"absolute",top:!0,width:"100%"}),(0,K.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{...W,top:v}},height:S,left:!0,position:"absolute",width:b}),(0,K.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{...W,top:v,left:k}},height:S,position:"absolute",right:!0}),(0,K.jsx)(c.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...W,top:P}},left:!0,position:"absolute",width:"100%"}),g&&(0,K.jsx)(O,{handleBackClick:o,viewParameter:y,viewType:427}),!s&&(0,K.jsxs)(c.xu,{"data-test-id":"CropperHandles",children:[(0,K.jsx)(V,{alt:f._('Top left cropper handle', 'flashlight.cropper.topLeftHandle', 'top left handle for cropping image'),left:b-9,src:U,top:v-9}),(0,K.jsx)(V,{alt:f._('Top right cropper handle', 'flashlight.cropper.topRightHandle', 'top right handle for cropping image'),left:k-15,src:$,top:v-9}),(0,K.jsx)(V,{alt:f._('Bottom left cropper handle', 'flashlight.cropper.bottomLeftHandle', 'bottom left handle for cropping image'),left:b-9,src:z,top:P-15}),(0,K.jsx)(V,{alt:f._('Bottom right cropper handle', 'flashlight.Cropper.BottomLeftHandle', 'bottom right handle for cropping image'),left:k-15,src:H,top:P-15})]}),(0,K.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{top:v-2,left:b-2,border:r?void 0:"2px solid #ffffff"}},"data-test-id":"CroppedArea",height:S+4,position:"absolute",rounding:2,width:w+4})]})}var q=a(520846);function X({auxData:e,onClick:t,shouldLogDotRender:a,showNoHalo:n,style:i,viewParameter:l,x:r,y:s}){let o=(0,d.ZP)(),u=(0,Z.Z)();return(0,C.Z)(()=>{a&&u({aux_data:e,element:1221,event_type:120,view_parameter:l,view_type:72})}),(0,K.jsx)("div",{"aria-label":o._('Select a specific item on image', 'dot.accessibilityLabel', 'Accessibility label for <Dot /> component'),"data-test-id":"dot",onClick:t,onKeyPress:t,role:"button",style:{position:"absolute",top:s-16,left:r-16,outline:"none",...i},tabIndex:"0",children:(0,K.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:n?void 0:"rgba(0, 0, 0, 0.1)",width:32,height:32,border:"none",borderRadius:32,cursor:t?"pointer":"default"}},children:(0,K.jsx)(c.xu,{alignItems:"center",color:"light",dangerouslySetInlineStyle:{__style:{boxShadow:"none",width:16,height:16,border:"none",borderRadius:16,top:8,left:8}},display:"flex",justifyContent:"center",padding:0,position:"absolute"})})})}var Q=a(922719);let J="flashlightDotPop",ee=(0,Q.Ll)([`
  ${J} {
      0% {
          opacity: 0;
          transform: scale(0);
      }

      100% {
          opacity: 1;
          transform: scale(1);
      }
  }
`,`labelReveal {
    0% {
      transform: scale(0, 1)
    }

    100% {
      transform: scale(1, 1)
    }
  }
`]),et=e=>{let t=parseFloat((.1*e).toFixed(2));return{animation:`${J} 0.3s ease-out ${t}s both`}};function ea({closeupImageTop:e,imageHeight:t,imageTop:a,imageWidth:n,onDotTap:i,pinId:l,pinImageSignature:r,setCropArea:s,shouldLogDotRender:o,showNoHalo:c,viewParameter:u,visualObjects:d,visualObjectToHide:p}){let m=(0,Z.Z)();return(0,K.jsxs)(y.Fragment,{children:[(0,K.jsx)(w.Z,{unsafeCSS:ee}),d.map((h,g)=>{if(g===p)return null;let{x:y=0,y:f=0,w:_=0,h:x=0}=h,v={x:y,y:f,h:x,w:_},b=(0,q.Z)({cropArea:{x:y,y:f,w:_,h:x},scaledWidth:n,scaledHeight:t}),S=Math.floor(b.x+b.w/2),w=Math.floor(b.y+a+b.h/2),k=et(g),P={pin_id:l,image_signature:r,visual_objects:JSON.stringify([v]),commerce_data:JSON.stringify({entrypoint:"flashlight",pin_is_stela:"false"})};return(0,K.jsx)(X,{auxData:P,onClick:function(){m({aux_data:P,element:1221,event_type:102,view_parameter:u,view_type:72}),i({cropArea:v,cropSource:4,visualObjects:d}),s?.(v)},shouldLogDotRender:o,showNoHalo:c,style:k,viewParameter:u,x:S,y:w-e},JSON.stringify(v))})]})}var en=a(174281);let ei={OUTSIDE:0,INSIDE:1,LEFT_CROPPER:2,RIGHT_CROPPER:3,TOP_CROPPER:4,BOTTOM_CROPPER:5,TOP_LEFT_HANDLE:6,TOP_RIGHT_HANDLE:7,BOTTOM_LEFT_HANDLE:8,BOTTOM_RIGHT_HANDLE:9,NONE:10};function el({closeupImageUrl:e,closeupImageDims:t,cropArea:a,handleBackClick:n,handleChangeCloseupImageTop:i,handleCropperChange:l,headerHeight:r,inUnifiedFeedExp:s,pinDominantColor:o,pinId:u,pinImageSignature:d,showBackButton:p,viewParameter:m,visualObjects:h,visualObjectToHide:g}){let f=(0,Z.Z)(),_=(0,y.useRef)(),[x,v]=(0,y.useState)(0),[b,S]=(0,y.useState)(0),[w,k]=(0,y.useState)(ei.NONE),[P,T]=(0,y.useState)(a),{current:j}=(0,N.Z)(),{x:F,y:C,w:I,h:E}=P,{closeupImageTop:A,closeupImageMinTop:L,closeupImageWidth:D,closeupImageHeight:M,minCropperWidthRatio:R,minCropperHeightRatio:O}=t,z=r||0,H=(e,t)=>{let a=t-A,n=e-(_.current?_.current.getBoundingClientRect().left:0),i=M*C,l=M*(C+E),r=D*F,s=D*(I+F);if(a>i+12&&a<l-12&&n>r+12&&n<s-12)return ei.INSIDE;if(n<=r+12&&n>=r-12&&a>=i+15&&a<=l-15)return ei.LEFT_CROPPER;if(n<=s+12&&n>=s-12&&a>=i+15&&a<=l-15)return ei.RIGHT_CROPPER;if(n<=s-15&&n>=r+15&&a>=i-12&&a<=i+12)return ei.TOP_CROPPER;if(n<=s-15&&n>=r+15&&a>=l-12&&a<=l+12)return ei.BOTTOM_CROPPER;if(n<=r-9+24&&n>=r-12&&a>=i-12&&a<=i+24-9)return ei.TOP_LEFT_HANDLE;if(n<=s+12&&n>=s-15&&a>=i-12&&a<=i+24-9)return ei.TOP_RIGHT_HANDLE;else if(n<=r-9+24&&n>=r-12&&a>=l-15&&a<=l+12)return ei.BOTTOM_LEFT_HANDLE;else if(n<=s+12&&n>=s-15&&a>=l-15&&a<=l+12)return ei.BOTTOM_RIGHT_HANDLE;else return ei.OUTSIDE};return(0,K.jsx)(c.kC,{justifyContent:"center",width:"100vw",children:(0,K.jsxs)(c.xu,{ref:_,dangerouslySetInlineStyle:{__style:{top:A,touchAction:"none"}},maxWidth:en.g6,overflow:"hidden",position:"fixed",width:"100%",children:[(0,K.jsx)(Y,{closeupImageDims:t,closeupImageUrl:e,cropArea:P,handleBackClick:n,onTouchEnd:()=>{if(![ei.NONE,ei.OUTSIDE].includes(w)){let e=w===ei.INSIDE?7603:7604;f({event_type:e,view_parameter:m,view_type:72}),l({cropArea:P,cropSource:6,visualObjects:h})}},onTouchMove:e=>{let{clientX:t,clientY:a}=e.touches[0];if(v(t),S(a),w===ei.NONE){let e=H(t,a);k(e)}if(null!=R&&null!=O&&null!=L){let e=a-b,n=t-x,l=n/D,r=e/M,s=Math.min(F+I-R,Math.max(0,F+l)),o=I+(F-s),c=Math.min(C+E-O,Math.max(0,C+r)),u=E+(C-c),d=Math.min(1-F,Math.max(R,I+l)),p=Math.min(1-C,Math.max(O,E+r));switch(w){case ei.OUTSIDE:i(Math.floor(Math.max(L,Math.min(z,A+e))));break;case ei.INSIDE:T(e=>({...e,x:Math.max(0,Math.min(1-I,F+l)),y:Math.max(0,Math.min(1-E,C+r))}));break;case ei.LEFT_CROPPER:T(e=>({...e,x:s,w:o}));break;case ei.RIGHT_CROPPER:T(e=>({...e,w:d}));break;case ei.TOP_CROPPER:T(e=>({...e,y:c,h:u}));break;case ei.BOTTOM_CROPPER:T(e=>({...e,h:p}));break;case ei.TOP_LEFT_HANDLE:T({x:s,w:o,y:c,h:u});break;case ei.TOP_RIGHT_HANDLE:T(e=>({...e,w:d,y:c,h:u}));break;case ei.BOTTOM_LEFT_HANDLE:T(e=>({...e,h:p,x:s,w:o}));break;case ei.BOTTOM_RIGHT_HANDLE:T(e=>({...e,h:p,w:d}))}}},onTouchStart:e=>{let{clientX:t,clientY:a}=e.touches[0];v(t),S(a),k(ei.NONE)},pinDominantColor:o,showBackButton:p,viewParameter:m}),!!h.length&&0!==M&&0!==D&&(0,K.jsx)(c.xu,{"data-test-id":"FlashlightDots",children:(0,K.jsx)(ea,{closeupImageTop:A,imageHeight:M,imageTop:A,imageWidth:D,onDotTap:l,pinId:u,pinImageSignature:d,setCropArea:T,shouldLogDotRender:!j,showNoHalo:s,viewParameter:m,visualObjects:h,visualObjectToHide:g})})]})})}var er=a(254292),es=a(676554);let eo=e=>({type:"SET_FLASHLIGHT_CROP_SOURCE",payload:{cropSource:e}});var ec=a(944846),eu=a(670633),ed=a(774812),ep=a(105737),em=a(207993),eh=a(30378),eg=a(5859),ey=a(55202),ef=a(217058),e_=a(623409),ex=a(943484);function ev(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let eb={modal:{baseStyles:{transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",transformOrigin:"bottom",touchAction:"none"}}},eS={NONE:0,UP:1,DOWN:2};class ew extends y.Component{constructor(...e){super(...e),ev(this,"state",{currentDistanceFromTop:this.props.maxDistanceFromTop?this.props.maxDistanceFromTop:-1,headerHeight:this.props.headerHeight||0,isAtTop:!1,scrollDirection:eS.NONE,shouldAnimate:!1,startY:0,canScrollOnChildren:!1}),ev(this,"onTouchStart",e=>{let{clientY:t}=e.touches[0];this.setState({startY:t,shouldAnimate:!1,scrollDirection:eS.NONE})}),ev(this,"onTouchMove",e=>{let{clientY:t}=e.touches[0],{startY:a,currentDistanceFromTop:n}=this.state,{canMoveModal:i,maxDistanceFromTop:l}=this.props,r=t-a;i&&void 0!==l&&(r>0&&n>=0&&n<l&&window.scrollY<=0||r<0&&n<=l&&n>=0)&&this.setModalPosition(t)}),ev(this,"onTouchEnd",()=>{let{entryPoint:e,minDistanceFromTop:t,canMoveModal:a}=this.props;this.props.shouldSnapToEnds&&this.state.scrollDirection===eS.DOWN?(this.header&&eh.Z.removeObstruction("top",this.header),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:this.props.maxDistanceFromTop,shouldAnimate:!0,isAtTop:!1}),e&&(0,ef.My)(`mweb.${e}.snap_to_bottom`)):this.props.shouldSnapToEnds&&this.state.scrollDirection===eS.UP&&(this.state.isAtTop?this.setState({currentDistanceFromTop:0,shouldAnimate:!0}):this.setState({canScrollOnChildren:a,currentDistanceFromTop:t||0,shouldAnimate:!0,isAtTop:!0}),this.header&&eh.Z.addObstruction("top",this.header),e&&(0,ef.My)(`mweb.${e}.sliding_modal.snap_to_top`))}),ev(this,"handleHandleMove",e=>{let{clientY:t}=e.touches[0],{canMoveModal:a,maxDistanceFromTop:n,minDistanceFromTop:i}=this.props,{startY:l,currentDistanceFromTop:r}=this.state;a&&r<=(i||0)&&t-l>0&&(e.stopPropagation(),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:n,isAtTop:!1,scrollDirection:eS.NONE,shouldAnimate:!0,startY:0}))}),ev(this,"handleHeaderTouch",()=>{let{maxDistanceFromTop:e,minDistanceFromTop:t,entryPoint:a,canMoveModal:n}=this.props,{currentDistanceFromTop:i,scrollDirection:l}=this.state;l===eS.NONE&&(i===e?(this.setState({canScrollOnChildren:n,currentDistanceFromTop:t||0,shouldAnimate:!0,isAtTop:!0}),(0,ef.My)(`mweb.${a}.sliding_modal.header_touch.snap_to_top`)):e&&(this.setState({canScrollOnChildren:!1,currentDistanceFromTop:e,shouldAnimate:!0,isAtTop:!1}),(0,ef.My)(`mweb.${a}.sliding_modal.header_touch.snap_to_bottom`)))}),ev(this,"handleCloseIconTouch",e=>{let{currentDistanceFromTop:t}=this.state,{onDismiss:a,logContextEvent:n,maxDistanceFromTop:i,viewParameter:l,viewType:r}=this.props;e.stopPropagation(),a&&(n({aux_data:{commerce_data:JSON.stringify({snapped_top:0===t})},element:75,event_type:102,view_parameter:l,view_type:r}),this.setState({currentDistanceFromTop:i,startY:0,scrollDirection:eS.NONE},()=>a(e)))}),ev(this,"getModalStyles",()=>{let{shouldSnapToEnds:e}=this.props,{currentDistanceFromTop:t,shouldAnimate:a,canScrollOnChildren:n}=this.state,{baseStyles:i}=eb.modal;return{...i,animation:"modalReveal 0.3s ease-out both",position:n?"absolute":"fixed",top:t>-1?t:void 0,bottom:0,width:"100vw",...e&&a?{transitionDuration:"500ms",transitionProperty:"transform, opacity, top"}:Object.freeze({})}}),ev(this,"setModalPosition",e=>{let{startY:t,currentDistanceFromTop:a}=this.state,{maxDistanceFromTop:n,snapToEndThreshold:i,entryPoint:l}=this.props;if(n){let r=e-t,s=Math.floor("CloseupShop"===l||"CloseUpMainPinDrawer"===l?Math.max(0,a+r):Math.min(n,Math.max(0,a+r))),o=eS.NONE;void 0!==i&&i>=0&&(r<0?o=s>Math.floor((1-i)*n)?eS.DOWN:eS.UP:r>0&&(o=s>Math.floor(i*n)?eS.DOWN:eS.UP)),this.setState({startY:e,currentDistanceFromTop:s,scrollDirection:o})}})}componentDidMount(){let{isOpen:e}=this.props;e&&eh.Z.pause()}componentDidUpdate(e,t){let{domainFilters:a,priceFilters:n,cropSource:i,isOpen:l,logContextEvent:r,maxDistanceFromTop:s,setHasDraggedDrawerToFullScreen:o,minDistanceFromTop:c,entryPoint:u}=this.props,{currentDistanceFromTop:d}=this.state;if(l&&!e.isOpen?eh.Z.pause():!l&&e.isOpen&&eh.Z.resume(),"CloseUpMainPinDrawer"===u&&s<e.maxDistanceFromTop&&d>s&&this.handleHeaderTouch(),t.currentDistanceFromTop!==(e.minDistanceFromTop||0)&&d===(c||0)&&o&&o(!0),a&&n&&(!(0,ep.ZP)(a,e.domainFilters)||!(0,ep.ZP)(n,e.priceFilters))){let e=(0,ex.Z)(i);r({event_type:13,view_parameter:"related_products"===e?3455:3456,view_type:72,element:11735})}}componentWillUnmount(){let{isOpen:e}=this.props;this.header&&eh.Z.removeObstruction("top",this.header),e&&eh.Z.resume()}render(){let{children:e,headerChildren:t,heading:a,inUnifiedFeedExp:n,isOpen:i,isRTL:l,mobileAccessibilityCloseIconLabel:r,mobileHideCloseIcon:s,noDivider:o,showHandle:u}=this.props,{headerHeight:d,canScrollOnChildren:p}=this.state,m=!p&&n?"32px 32px 0 0":"0";return i?(0,K.jsx)(ey.Z,{children:(0,K.jsx)(c.xu,{"aria-label":a,role:"dialog",children:(0,K.jsx)(c.xu,{color:"default",dangerouslySetInlineStyle:{__style:{...this.getModalStyles(),borderRadius:m}},onTouchEnd:this.onTouchEnd,onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,children:(0,K.jsxs)(c.iP,{accessibilityLabel:this.props.i18n._('View all search results', 'SlidingModal.Header.a11yLabel', 'Accessibility label for header of search results in flashlight'),onTap:this.handleHeaderTouch,children:[(0,K.jsxs)(c.Le,{top:d||0,children:[u&&(0,K.jsx)(c.xu,{color:"default",dangerouslySetInlineStyle:{__style:{padding:"8px 0 24px 0",borderRadius:m}},"data-test-id":"slidingModalHandle",display:"flex",justifyContent:"center",onTouchMove:this.handleHandleMove,children:em.Z}),!s&&(0,K.jsxs)(c.xu,{ref:e=>{this.header=e},color:"default",rounding:2,children:[(0,K.jsxs)(c.kC,{alignItems:"center",flex:"grow",justifyContent:"start",children:[(0,K.jsx)(c.kC,{alignItems:"center",justifyContent:"start",children:(0,K.jsx)(c.hU,{accessibilityLabel:r||"Close visual search results",icon:"arrow-back",iconColor:"gray",onClick:({event:e})=>this.handleCloseIconTouch(e),padding:5,size:"lg"})}),(0,K.jsx)(c.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:function({filterIconShown:e,isRTL:t}){let a=t?"marginRight":"marginLeft",n=t?"marginLeft":"marginRight";return e?{[a]:38,[n]:50,marginTop:15,marginBottom:15}:{[a]:-10,[n]:50,marginTop:15,marginBottom:15}}({isRTL:l})},"data-test-id":"slidingModalHeader",display:"flex",flex:"grow",justifyContent:"center",children:(0,K.jsx)(c.X6,{accessibilityLevel:2,align:"center",size:"400",children:a})})]}),t||null,!o&&(0,K.jsx)(c.iz,{})]})]}),(0,K.jsx)(c.xu,{overflow:p?"auto":"visible",children:e})]})})})}):null}}function ek(e){let t=(0,d.ZP)(),a=(0,Z.Z)(),{isRTL:n}=(0,eg.B)(),i=(0,e_.Z)();return(0,K.jsx)(ew,{...e,i18n:t,isRTL:n,logContextEvent:a,trackInteraction:i})}let eP=`
  html, body {
    overscroll-behavior: none;
  }
`;function eT(){return Math.min(en.g6,window.innerWidth)}function ej(e,t){return Math.floor(eT()/t*e)}function eF(e,t){let a=0,n=0,i=0;if(e&&e.imageSpec_736x){let t=e?e.imageSpec_736x:null;a=eT(),n=ej(t?.height??1,t?.width??1),i=function(e,t){let a=Math.floor(.6*window.innerHeight);return Math.min(a,ej(e,t))}(t?.height??1,t?.width??1)}return{closeupImageWidth:a,closeupImageHeight:n,closeupImageMinTop:i-n,closeupImageTop:t||0,minCropperWidthRatio:a?50/a:0,minCropperHeightRatio:n?50/n:0,modalTop:i}}function eC(e,t,a,n,i){let l=a?Number(a):.4,r=n?Number(n):.1;e>0&&t>0&&(a||(l=(t-2*t*.1-i)/e),n||(r=.1*t/e));let s={h:l,y:r};return s}function eI({cropArea:e,cropSource:t,headerHeight:a,inUnifiedFeedExp:n,pin:i,pinId:l,queryH:s,queryY:u,searchResourceOptions:m,setCropSource:h,setState:g,state:v,visualSearchFlashlightUnifiedResource:j}){let F=(0,d.ZP)(),{logContextEvent:E}=(0,x.v)(),M=(0,f.useDispatch)(),R=(0,o.k6)(),{previous:Z}=(0,S.Hv)(),{checkExperiment:N}=(0,p.F)(),z=(0,o.TH)(),{isAuth:H}=(0,r.Z)(),{width:U=0}=(0,_.Z)()||{},$=(i?.visualObjects??[]).filter(e=>e.isStela),B=(i?.visualObjects??[]).filter(e=>!!e.label),G=$.length>0||B.length>0,V=G&&(N("mweb_flashlight_show_more_stela_dots").anyEnabled||N("mweb_flashlight_show_more_stela_dots_expansion").anyEnabled?$:B)||[],W=V.map(e=>{let{isStela:t,title:a,label:n,labelId:i,labelX:l,labelY:r,maxAnnotationNumDocuments:s,score:o,showOnCloseup:c,x:u,y:d,h:p,w:m}=e;return{is_stela:t??!1,title:a??"",label:n??"",label_id:i??"",label_x:l??0,label_y:r??0,max_annotation_num_documents:s??0,score:o??0,show_on_closeup:c??!1,x:u??0,y:d??0,h:p??0,w:m??0}}),[Y,q]=(0,y.useState)(I(W,e)),{isCropAreaOnDotArea:X,dotIndexToHide:Q}=Y,J=e=>M((0,ec.By)(e)),ee=e=>M(eo(e)),{data:et,fetchMore:ea,isAtEnd:en,isFetching:ei,isLoaded:ep}=j||{},em=et?.results||[],eh=em.find(e=>"story"===e.type),eg=em.filter(e=>"pin"===e.type),ey=eh?.action,{url:ef=`/pin/${l}`,title:e_=""}=ey||{},ex=F._('Shop similar', 'mobileFlashlight.productUpsellTitle', 'Shop similar products from the image.'),ev=F._('Image search', 'mobileFlashlight.organicFeedTitle', 'Search results from the image.'),eb=F._('Visual search', 'Visual search results', 'Visual search results'),eS=n&&(4===t||X)?3462:3050,ew=JSON.stringify({is_product_only_feed:!1}),{closeupImageWidth:eT,modalTop:ej}=v.closeupImageDims,eI=i?.imageSpec_736x?.url??"",eE=U-60<eT&&n;function eA(){E({component:14339,element:179,event_type:102,view_parameter:eS,view_type:72})}function eL(){if(0===Z.length){R.replace(`/pin/${l}/`);return}R.goBack()}let[eD,eM]=(0,y.useState)(0),[eR,eK]=(0,y.useState)(0),[eO,eZ]=(0,y.useState)(!1),[eN,ez]=(0,y.useState)(!1),[eH,eU]=(0,y.useState)(void 0);function e$(){ez(!1),eZ(!1),eU(void 0)}function eB(e,t){"vertical"!==t&&e.stopPropagation()}let eG=!!i,eV=(0,y.useMemo)(()=>eF(i,a),[i?.entityId,a]);return((0,y.useEffect)(()=>{if(eG){let{closeupImageHeight:e,modalTop:t=0}=eV,n=eC(e,t,Number(s),Number(u),a||0);g(e=>({...e,closeupImageDims:eV,...n}))}},[eG,eV]),(0,C.Z)(()=>{ee(t)}),i&&0!==ej)?(0,K.jsxs)(y.Fragment,{children:[(0,K.jsx)(w.Z,{unsafeCSS:eP}),(0,K.jsx)(A.Z,{auxData:n?{commerce_data:ew}:void 0,viewParameter:n?3462:3050,viewType:72,children:(0,K.jsx)(T.Z,{view:72,children:(0,K.jsxs)(k.default,{hasFixedHeader:!0,hasGutter:!1,children:[(0,K.jsx)(er.Z,{text:F._('Visual Search Page', 'flashlight.accessibilityhiddenheading.fullpage', 'accessibility label for flashlight page')}),(0,K.jsx)(c.xu,{color:"dark",height:"100vh",width:"100vw"}),(0,K.jsx)(el,{closeupImageDims:v.closeupImageDims,closeupImageUrl:eI,cropArea:e,handleBackClick:eL,handleChangeCloseupImageTop:function(e){g(t=>({...t,closeupImageDims:{...t.closeupImageDims,closeupImageTop:e}}))},handleCropperChange:function({cropArea:e,cropSource:t,visualObjects:a}){ee(t),J(l),q(I(a,e)),h(t),g(t=>({...t,...e})),R.replace(`/pin/${l}/visual-search/?x=${e.x}&y=${e.y}&h=${e.h}&w=${e.w}&cropSource=${t}`)},headerHeight:a,inUnifiedFeedExp:n,pinDominantColor:i.dominantColor||"#efefef",pinId:l,pinImageSignature:i.imageSignature,showBackButton:eE,viewParameter:eS,visualObjects:W,visualObjectToHide:Q}),!eE&&n&&(0,K.jsx)(O,{handleBackClick:eL,viewParameter:eS,viewType:427}),(0,K.jsxs)(ek,{canMoveModal:!0,cropSource:t,entryPoint:"flashlight",headerHeight:a,heading:eb,inUnifiedFeedExp:n,isOpen:!0,location:z,maxDistanceFromTop:ej||0,minDistanceFromTop:H?60:a,mobileAccessibilityCloseIconLabel:F._('Close visual search results', 'close visual search results and go back to pin', 'close visual search results and go back to pin'),mobileHideCloseIcon:n,noBorder:!0,noDivider:!0,noMaskOnBackground:!0,onDismiss:eL,pinId:l,shouldSnapToEnds:!0,showHandle:n,snapToEndThreshold:.3,viewParameter:eS,viewType:72,children:[(0,K.jsx)(c.$j,{accessibilityLabel:F._('Loading visual search results', 'mobileFlashlightPage.loadingSpinner', 'Spinner for loading the visual search result'),show:n&&!ep}),n&&ep&&(0,K.jsxs)(y.Fragment,{children:[eh&&(0,K.jsxs)(y.Fragment,{children:[(0,K.jsxs)(c.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginBottom:2,paddingX:4,children:[(0,K.jsx)(c.Tg,{href:ef,onTap:({event:e})=>{e.stopPropagation(),eA()},tapStyle:"compress",children:(0,K.jsx)(c.X6,{accessibilityLevel:2,size:"400",children:ex})}),(0,K.jsx)(c.I_,{accessibilityLabel:e_||F._('See more', 'headerModule.headerModuleActionButton.iconButton', 'An right arrow icon button to show more similar pins to the user in a new page'),bgColor:"transparent",dataTestId:"product-upsell-action-button",href:ef,icon:"arrow-forward",iconColor:"darkGray",onClick:eA,size:"sm"})]}),(0,K.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{touchAction:"pan-x",overflowY:"hidden"}},onTouchEnd:function(e){eB(e,eH),e$()},onTouchMove:function(e){let{clientX:t,clientY:a}=e.touches[0];Math.abs(a-eR)>10&&eZ(!0),Math.abs(t-eD)>10&&ez(!0),eN&&eO?eU(e=>e||"vertical"):eN?eU(e=>e||"horizontal"):eO?eU(e=>e||"vertical"):eU(void 0),eB(e,eH)},onTouchStart:function(e){let{clientX:t,clientY:a}=e.touches[0];eM(t),eK(a),e$()},children:(0,K.jsx)(P.default,{component:14339,disableHeader:!0,story:eh,storyGraphqlRef:null,surface:"ShoppingDynamicHeightGrid",view:72,viewParameter:3462})})]}),(0,K.jsx)(c.xu,{marginBottom:3,paddingX:4,children:(0,K.jsx)(c.X6,{accessibilityLevel:2,size:"400",children:ev})}),(0,K.jsx)(c.xu,{color:"default",dangerouslySetInlineStyle:{__style:{touchAction:"pan-y"}},paddingX:b.D6,children:(0,K.jsx)(ed.Z,{feedItems:eg,feedKey:(0,eu.J)("VisualSearchFlashlightUnifiedResource",m)??"",pagination:{loadNext:ea||(()=>void 0),hasNext:!en,isLoadingNext:ei||!1,refetch:()=>void 0},renderFeedItem:(e,t)=>(0,K.jsx)(D.cn,{children:(0,K.jsx)(es.ZP,{auxData:{commerce_data:ew},componentType:0,duploQueryRef:null,pinId:e.id,slotIndex:t,trackingParams:e.trackingParams||void 0,viewParameter:3462,viewType:72})})})})]}),!n&&(0,K.jsx)(c.xu,{color:"default",paddingX:b.D6,children:(0,K.jsx)(L.ZP,{feedItemProps:{viewParameter:3050,viewType:72},feedKey:(0,eu.J)("VisualLiveSearchResource",m)??"",resourceConfig:{name:"VisualLiveSearchResource",options:m},trafficSource:"flashlight"})})]})]})})})]}):null}function eE(e){let{searchResourceOptions:t}=e,a=(0,h.Z)({name:"VisualSearchFlashlightUnifiedResource",options:t});return(0,K.jsx)(eI,{...e,visualSearchFlashlightUnifiedResource:a})}let eA=void 0!==n?n:n=a(990563);function eL({pinKey:e}){let{checkExperiment:t}=(0,p.F)(),{anyEnabled:a}=t("mweb_flashlight_unified_feed"),n=(0,o.$B)(),{pinId:i}=(0,g.Z)(n.params.id||""),s=(0,o.TH)(),c=(0,F.mB)(s.search),{cropSource:u,x:d,y:m,h,w:f}=c,{isAuth:_}=(0,r.Z)(),x=(0,l.ZP)(),b=!_&&(0,j.x9)(x)||void 0,S=(0,v.Z)(eA,e),[w,k]=(0,y.useState)(()=>{let e=eF(S,b);e.closeupImageTop=0;let{closeupImageHeight:t,modalTop:a=0}=e,n=eC(t,a,Number(h),Number(m),b||0);return{closeupImageDims:e,x:d?Number(d):.1,w:f?Number(f):.8,y:n.y,h:n.h}}),[P,T]=(0,y.useState)(()=>{let e=(0,E.Z)(Number(u));return e||(d&&m&&h&&f?6:5)}),C={x:w.x,y:w.y,w:w.w,h:w.h},I={cropArea:C,cropSource:P,headerHeight:b,inUnifiedFeedExp:a,pin:S,pinId:i,queryH:h,queryY:m,searchResourceOptions:{pin_id:i,crop:C,crop_source:P,is_shopping:!1,entry_source:"flashlight",entrypoint:null},setCropSource:T,setState:k,state:w};return a?(0,K.jsx)(eE,{...I}):(0,K.jsx)(eI,{...I})}var eD=a(19447);let eM=void 0!==i?i:i=a(853512);function eR(e){return{width:e.width??0,url:e.url??"",height:e.height??0}}function eK(e){return e?.map(e=>({id:e.itemId??"",additional_images:function(e){let t=[];return e.forEach(({additionalImages:e,spec:a})=>{t.push(...function({additionalImages:e,spec:t}){let a=[];return e?.forEach(e=>{e.canonicalImage&&a.push({canonical_images:{[t]:eR(e.canonicalImage)},image_signature:e.imageSignature??""})}),a}({additionalImages:e,spec:a})??[])}),t}([{additionalImages:e.additionalImageOrig,spec:"orig"},{additionalImages:e.additionalImage736x,spec:"736x"},{additionalImages:e.additionalImage564x,spec:"564x"},{additionalImages:e.additionalImage474x,spec:"474x"},{additionalImages:e.additionalImage236x,spec:"236x"}])??[]}))}function eO(e){let t={};return e.forEach(({image:e,spec:a})=>{e&&(t[a]=eR(e))}),t}let eZ=(0,u.Z)({useGraphQLAdapter:function({pinId:e}){var t,a,n,i,l;let r=(0,s.useLazyLoadQuery)(eM,{pinId:e}),o=r.v3GetPinQuery?.data;if(!o)return null;let c={id:o.entityId??"",dominant_color:o.dominantColor??"",image_signature:o.imageSignature??"",visual_objects:(t=o.visualObjects,t?.map(e=>({detection:e.detection??!1,h:e.h??0,index:e.index??0,is_stela:e.isStela??!1,label:e.label??"",label_id:e.labelId??"",label_x:e.labelX??0,label_y:e.labelY??0,max_annotation_num_documents:e.maxAnnotationNumDocuments??0,score:e.score??0,show_on_closeup:e.showOnCloseup??!1,w:e.x??0,x:e.w??0,y:e.y??0}))??[]),images:eO([{image:o.imageOrig,spec:"orig"},{image:o.image736x,spec:"736x"},{image:o.image564x,spec:"564x"},{image:o.image474x,spec:"474x"},{image:o.image236x,spec:"236x"}])??{},rich_metadata:(a=o.richMetadata,{products:eK(a?.products)??[]}),rich_summary:(n=o.richSummary,{products:eK(n?.products)??[]}),carousel_data:(i=o.carouselData,{carousel_slots:(l=i?.carouselSlots,l?.map(e=>({image_signature:e.imageSignature??"",images:eO([{image:e.imageOrig,spec:"orig"},{image:e.image736x,spec:"736x"},{image:e.image564x,spec:"564x"},{image:e.image474x,spec:"474x"},{image:e.image236x,spec:"236x"}])??{}}))??[]),index:i?.index??0}),type:"pin"};return{pin:c}},useLegacyAdapter:function({pinId:e}){let{data:t}=(0,h.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0,is_mobile_fork:!0}}),a=(0,eD.S6)()(e),n=t??a;return n?{pin:n}:null}});function eN(){let{checkExperiment:e}=(0,p.F)(),t=(0,d.ZP)(),a=(0,o.$B)(),{pinId:n}=(0,g.Z)(a.params.id||"");return(0,K.jsx)(m.Z,{measureGridVisuallyComplete:!0,surface:"visual_search",children:(0,K.jsx)(eZ,{input:e("auth_mweb_graphql_flashlight_pinResource").anyEnabled||e("unauth_mweb_graphql_flashlight_pinResource").anyEnabled?{enabled:!0,data:{pinId:n},suspense:{fallback:(0,K.jsx)(c.$j,{accessibilityLabel:t._('Loading Pin data', 'mobileFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})}}:{enabled:!1,data:{pinId:n}},children:({data:e})=>!!e&&(0,K.jsx)(eL,{pinKey:null!=e.pin?{type:"deprecated",data:e.pin}:null})})})}var ez=a(270766),eH=a(109486);let eU=function(){let e=(0,l.HG)(),t=(0,r.Z)();return e?t.isAuth?(0,K.jsx)(eH.Z,{}):(0,K.jsx)(ez.Z,{}):(0,K.jsx)(eN,{})}},118923:(e,t,a)=>{"use strict";a.d(t,{P:()=>l,b:()=>r});var n=a(340523),i=a(5859);function l(e,t){return!!e&&e(t?"web_auth_lazy_component":"web_unauth_lazy_component").anyEnabled}function r(){let{checkExperiment:e}=(0,n.F)(),{isAuthenticated:t}=(0,i.B)();return l(e,t)}},832853:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var n=a(667294),i=a(14583),l=a(342513);let{Provider:r,useMaybeHook:s}=(0,l.Z)("LazyComponent");var o=a(785893);function c(e,t,a){let l,r,c;let u=!!(t?.ssr??!0),d=u?n.Suspense:i.Z,p=a=>{s(),t?.dynamicRequestKey,r||(r=(0,n.lazy)(()=>e(a)));let i=(0,n.useRef)(l??r),c=i.current;return(0,o.jsx)(d,{fallback:a.fallback||t?.fallback,children:(0,o.jsx)(c,{...a})})};function m(t){return c||(c=(async()=>{let a=await e(t);return l=a.default})()),c}return p.preload=e=>{m(e)},p.load=e=>m(e),p}},585913:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_bottom_left-d4d98c77.svg"},913574:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_bottom_right-ccae4564.svg"},49808:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_top_left-68937c82.svg"},957435:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_top_right-4d7ae997.svg"}},e=>{var t=t=>e(e.s=t);e.O(0,[97270,83119,16550,24797,55169,9233,76594,33739,33,8575,62536,40370,73984,63787,70633,33021,22987,97699,42839,34851,71980,37300,66573],()=>t(706737)),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/pin/[id]/visual-search-a9fb2c6f5bd0f964.mjs.map